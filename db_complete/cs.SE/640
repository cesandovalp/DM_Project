composit feedback determinist input recept system viorel stavro univers california berkeley april abstract feedback essenti composit oper class reactiv system paper studi feedback context composit theori refin theori allow reason system compon compon basi character substitut refin relat composit theori feedback exist limit determinist system function input recept system total relat work propos composit theori feedback appli determinist input recept system partial relat achiev semant framework predic properti transform relat fail unknown valu defin instantan feedback stateless system feedback unit delay state system oper preserv refin relat appli determinist input recept system introduct larg complex system best design compon base monolith methodolog compon base paradigm system assembl interact compon compon subsystem compos compon arbitrari compon hierarchi built manner allow decompos complex system simpler simpler subsystem system constant evolv key concern compon base set substitut replac compon compon issu properti preserv replac result break essenti properti exist system avoid verifi system scratch verif expens process ideal simpl check suffic guarante system correct assum system correct composit theori refin provid eleg framework reason problem theori notion central notion compon composit oper creat compon compos exist notion refin binari relat compon typic main theorem provid theori preserv refin composit rough state refin refin composit refin composit preserv properti refin rough state refin satisfi properti satisfi work partial support academi finland nation scienc foundat award icyphi center support ibm unit technolog figur composit oper serial composit left parallel composit middl feedback compo sition theorem consid scenario replac avoid verifi system refin true preserv refin composit system refin system implicit refin reflex typic true preserv properti refin properti hold system will hold system avoid check direct system expens system larg refin easier verif problem deal compon paper compon block input output set three basic composit oper figur serial composit output compon connect input compon parallel composit compon stack top connect encapsul singl compon feedback composit output compon connect input semant compon model system determinist input recept determin system produc output input determin well establish power model mechan allow abstract unnecessari detail thing input recept system declar input valu illeg time exampl compon comput squar root real number declar negat input illeg note state input negat output arbitrari correspond logic implic denot input output correspond conjunct common domain formal method verif input recept system common program languag type theori provid basi type check type check key featur languag lightweight verif mechan programm provid formal specif program program type check set input recept essenti order model compat compon composit extens discuss point set parallel composit straightforward defin logic conjunct specif compon serial composit bit trickier logic involv quantif essenti state output upstream compon legal input downstream compon exist output downstream compon game theoret semant compon determinist input recept collaps standard semant composit function relat logic conjunct compon determinist input recept parallel serial composit defin composit sens preserv refin composit theori feedback exist limit determinist system input recept system knowledg composit feedback determinist input recept system remain elus main difficulti definit feedback preserv refin refin refin feedback composit oper extens account difficulti fail attempt framework relat interfac illustr earlier problem handl framework consid exampl compon input variabl output variabl input output relat true accept input input return output true satisfi tripl compon input output relat accept input return relat interfac framework well framework refin legal input fact input legal determinist suppos appli feedback connect output input denot compon singl input longer free input connect relat note refin refin preserv feedback straightforward defin feedback add constraint connect essenti wire true relat fals relat problemat fals refin game theoret semant refin implic input output treat differ exampl input legal input legal replac refin paper attack problem feedback afresh adopt framework refin calculus refin calculus reactiv system rcrs classic composit framework reason sequenti program rcrs extens reason reactiv system program model monoton predic transform function set post state set pre state rcrs system model monoton properti transform function transform set output infinit sequenc set input infinit sequenc predic properti transform power mathemat tool captur determinist input recept system fact power partial relat semant basi relat interfac hope difficulti obtain composit definit feedback relat framework overcom refin calculi framework consid stateless system instantan feedback feedback singl step model stateless system predic transform post pre state interpret output input interpret employ strict conjunct predic transform correspond input output relat domain extend special fail denot model illeg input return output extend relat addit unknown denot unknown defin feedback point iter start unknown converg valu idea unknown valu point method deal instantan feedback determinist input recept system total function case system determinist reject input general point method relat fail unknown precis definit involv def rough speak input explor comput path includ feedback input stabil unknown well relat return path stabil consid input post feedback system legal execut path fail stabil reach instantan feedback oper preserv refin exampl discuss definit compon fail reject input procedur stabil case indic feedback oper illeg discov incompat serial composit relat fail unknown model power strict conjunct predic tran former input output valu unknown model altern best suit defin instantaneus feedback oper relat fail unknown prove oper preserv refin predic transform represent turn case state system syntact model symbol transit system relat input output current state state variabl instanc simpl counter model relat denot current state state semant predic transform variabl defin feedback unit delay predic transform correspond connect unit delay compon unit delay output step input previous step feedback unit delay ensur state current state step feedback unit delay oper defin definit aid iter oper properti transform defin combin feedback oper general block diagram languag simulink handl determinist input recept compon treatment paper semant syntact object symbol transit system repres predic properti transform exampl formula repres counter mention formula input output repres relat fail predic transform tempor logic ltl express properti infinit sequenc input output valu includ live properti exampl system ltl formula ensur input infinit true will output represent construct present paper comput order formula quantifi ltl formula present paper formal prove isabell theorem prover isabell code http work idea relat unknown inspir point base method construct semant reason instantan feedback cyclic combin circuit syn chronous languag method deal monoton function flat cpo unknown element assum total function limit determinist input recept system refin absent framework point base method reason instantan feedback system kahn process network process model continu function stream total function determinist input recept determinist extens process network exist includ notion refin framework allow determin includ refin automata reactiv modul focus three framework assum compon input recept note exampl introduct compon input recept straightforward definit feedback preserv input recept unclear exampl handl framework interfac automata allow determinist well input recept specif posit framework asynchron parallel composit input output label synchron difficult direct compar feedback composit framework interfac automata limit safeti framework express live properti check compat framework function program languag type check standard languag advanc techniqu refin type depend type liquid type techniqu base subtyp depend type allow check compil time invari comput valu program techniqu general autom applic class decid problem compat check system composit general decid case check compat system composit reduc check satisfi formula under logic formula decid automat compat test model synchron nondeterminist system studi preserv secur properti composit system includ delay feedback model treat input recept system background higher order logic implement isabell theorem prover capit letter denot type small letter denot element type bool denot type boolean valu true fals nat natur number real real boolean oper type denot type function function applic dot notat function function appli function type constructor associ correspond function applic associ left lambda abstract construct function exampl nat natur express nat nat nat function map notat cartesian product denot pair predic function argument return boolean predic argument signatur bool relat predic argument relat bool denot bool predic relat argument defin quantifi argument extend point wise oper boolean oper predic relat exampl bool relat relat smallest greatest predic relat fals true relat bool bool denot relat composit relat bool denot bool invers relat total call left total reactiv system infinit sequenc trace valu formal type valu trace element nat read easier denot infinit sequenc bold face letter valu normal ital small letter exampl occur formula convent element type xij consid pair trace trace pair linear tempor logic linear tempor logic ltl logic properti reactiv system paper semant algebra version ltl logic formal isabell detail formal ltl formula predic trace tempor oper function map predic predic call predic trace set trace properti bool properti properti denot properti true true time point true true time point true time true true formal addit defin oper intuit hold hold continu step hold step relat trace defin tempor oper exampl relat valu extend trace refin calculus reactiv system refin calculus program model monoton predic transform program input type output type model function bool bool weakest precondit interpret bool post condit set final state set initi state program termin termin state model reactiv system monoton properti transform weakest precondit interpret reactiv system input type output type formal model monoton function bool bool bool post properti set output trace set input trace execut fail produc output trace remain appli equal monoton predic transform monoton properti transform will call simpli monoton transform point wise extens boolean oper predic monoton transform complet lattic oper unionsq observ unionsq preserv monoton lattic oper meaning oper program reactiv system order lattic refin relat refin refin refin replac context oper unionsq model demon angel determin choic interpret system correct satisfi specif correct hand unionsqt correct correct unionsq repres uncontrol control determin denot bottom top lattic monoton transform fail magic fail refin monoton transform magic refin monoton transform fail guarante properti input sequenc fail will produc output sequenc hand magic establish properti problem magic implement serial composit system model transform simpli function composit monoton transform denot composit compos type output type input system skip defin neutral element serial composit skip skip defin special type monoton transform will form general properti transform composit predic bool relat bool defin assert transform bool bool demon updat transform bool bool assert system execut sequenc behav skip true fail demon updat statement establish post condit start magic express exampl system produc output input express variabl occur free assert statement introduc notat express variabl bound havoc monoton transform determinist statement havoc true assign arbitrari output rcrs model global specif reactiv system ltl specif languag well concret implement symbol transit system relat input output state state variabl global specif defin output system input entir sequenc global specif impos condit entir input sequenc includ live condit exampl formula assert input true infinit implement describ system work step step instanc implement start input initi intern state comput output intern state comput exampl system model properti predic transform model global reactiv system sum input sequenc comput sequenc model sum monoton properti transform sum model step implement sum predic transform stepsum relat describ symbol transit system current state state input output stepsum work iter start initi state element input assum comput second element comput will exampl sum properti transform connect stepsum output input feedback unit delay assert demon choic predic transform satisfi properti theorem appropri type monoton predic transform strong weak iter denot greatest point skipus point exist knaster tarski point theorem monoton function complet lattic execut repeat demon chosen finit number time execut indefinit fail semant statement suitabl total correct reason semant statement suitabl partial correct reason paper will altern definit instantan feedback oper product fusion monoton transform predic product denot product parallel composit monoton transform denot collect monoton transform fusion denot monoton transform transform write fusion fusion note product fusion result product compon separ input output figur parallel composit result fusion compon share input output theorem fusion product satisfi fusion impli impli strict conjunct predic transform dijkstra introduc predic transform reason program addit monoton iti requir properti conjunct law exclud miracl predic transform paper strict conjunct predic tran former predic transform satisfi conjunct properti stronger dijkstra predic transform strict conjunct commut arbitrari empti meet nonempti bool set strict conjunct predic transform exact predic transform form set strict conjunct predic transform satisfi law exclud miracl exact predic transform form theorem predic transform strict conjunct exist predic relat strict conjunct satisfi law exclud miracl exist relat instanc predic transform skip skip predic transform fail magic fail magic transform strict conjunct skip fail satisfi law exclud miracl exampl hand magic magic satisfi law exclud miracl consid set exampl transform strict conjunct equal implic valid legal input output transform input legal input legal transform satisfi law exclud miracl exampl satisfi law exclud miracl fals input return output input behav difer return output behav magic realat fals return arbitrari relat true fail illeg input strict conjunct predic transform weak iter equal enumer demon choic theorem strict conjunct nat theorem simpler definit weak iter strict conjunct compar case monoton theorem will connect definit instantan feedback relat correspond definit predic transform relat fail unknown formal introduc relat fail unknown valu mention intro duction relat fail unknown strict conjunct predic transform express power better suit defin explain prove relat fail introduc relat augment special element call fail relat equival strict conjunct predic transform addit relat total equival predic transform strict conjunct satisfi law exclud miracl relat fail semant imper program languag model termin context determin paper model input recept system output input illeg assum element belong ordinari type defin type element element pair relat fail element bool assum relat fail map true fals relat fail illeg input defin relat fail defin defin assum state relat properti state case addit requir condit relat fail map need ensur consist serial composit relat respect illeg input exampl relat fail appropri type illeg input true illeg input serial composit true impli exampl divis div real bool relat fail model divis div div div true illeg input div illeg input map proper output true relat ident fals consid model system restrict relat fail relat map illeg input model demon choic relat union type model demon choic illeg illeg legal relat fail defin input illeg fail predic transform syntax relat satisfi express relat fail close relat composit serial composit union demon choic definit bool relat fail type defin refin relat fail predic transform relat bool introduc correspond predic transform defin precondit bool proper relat bool predic transform weakest precondit bool bool predic true legal input true system model produc determinist output input predic transform correspond weakest precondit interpret explain div relat lemma map oper relat correspond oper predic transform lemma hold prec prec rel rel replac binari union intersect theorem arbitrari empti union resp intersect hold relat bool reflex transit closur transit closur denot relat bool defin compos time relat fail lemma hold lemma bool relat fail lemma refin relat preserv oper lemma relat fail appropri type unknown valu denot special element call unknown ordinari type nat bool real set defin partial order order flat complet partial order flat cpo extend partial order partial order cartesian product smallest element cartesian product denot tupl element smallest element order extend cartesian product simplic call cartesian product collect flat cpos flat cpo partial order element maxim element greater context will distinguish case element smallest predic relat case denot smallest element partial order set exampl gate unknown consid function bool bool bool defin tabl model logic gate return fals input fals input unknown will return exampl exampl fals true fals fals fals fals fals true fals true tabl gate unknown figur exampl rfus div left relat fail unknown rfus unknown valu start feedback variabl iter comput feedback repres failur illeg input distinguish suppos repres concept suppos true relat illeg input input output unknown suppos relat map unknown input compos seri composit produc input illeg map avoid ambigu separ concept valu exampl divis fail unknown continu exampl extend relat div unknown input div fail result unknown complet definit div div div div illustr figur divis oper extend unknown valu defin instantan feedback introduc definit instantan feedback rfu bool figur intent feed output input figur fact requir extra input extra output loss general model absenc wire type unit type type empti tupl element figur rfu idea instantan feedback calcul outlin start construct tree node tree label element root tree node tree form creat children node creat child exist creat child exist creat child node tree leav form note depth tree finit creat child requir strict increas infinit sequenc element product flat cpos valu children leav illustr tree construct exampl exampl tree relat true discuss consid rfus true neq input output defin true neq true rfu correspond relat true discuss introduct system call havoc true accept input input recept determinist return output note output equal constraint neq rfu correspond relat discuss introduct compon neq accept input return output input equal neq rfu defin relat behav unknown valu true neq illustr figur figur figur true neq tree true neq figur tree independ input tree true start tree construct rule creat children case rule creat child true true node child rule true true note true allow arbitrari order hold flat cpo properti child tree neq start choos figur tree true left tree neq tree construct instantan feedback rfu denot will relat true leaf tree true leaf tree type figur defin formal addit defin version feedback remov output compon maxim unknown feedback fail type figur definit rfu bool defin bool fb_end bool fb_end fb_end fb_end exampl instantan feedback true neq continu exampl comput stantan feedback oper defin rfus true neq fail fail expect result instantan feedback definit fail relat straightforward definit discuss introduct elimin problem present refin true neq preserv feedback solv problem identifi introduct result appli fb_hide true neq fail tree figur feedback variabl assign includ unknown provid exampl illustr instantan feedback oper prove result oper reduc standard oper special case determinist input recept system bus scope figur bus function block feedback exampl seem algebra loop simulink diagram diagram figur inspir real simulink model pattern automot fuel control system benchmark toyota jdk jdk pictur input bus block output tupl tupl fed function block perform addit element tupl output function fed bus algebra loop function depend element tupl output bus fed scope block suppos print three element tupl figur gate screen model bus scope ident function bus scope fun sys bus fun scope sys system feedback connect appli feedback expect exampl instantan feedback gate suppos connect feedback gate function tabl appli feedback add extra output figur fals fals fals fals fals true result feedback compon output fals free input fals hand true unknown compon fail result consist result classic theori instantan feedback total function construct semant will general case determinist system tree describ instantan feedback calcul singl path case special case total function semant special construct semant state formal flat cpo bool relat exist total function monoton theorem flat cpo fixpoint exist assumpt monoton exampl gate addit wire fals fals fals fals fals true feedback compon feedback compon exampl instantan feedback wonder happen connect ident function feedback feedback oper take relat input output wire defin ident oper figur gate addit wire ignor input assign output input figur output allow record result feedback hide feedback variabl expect result appli feedback fail fail result fail feedback variabl assign unknown consist result construct semant power framework appli determinist input recept system exampl determinist input recept system exampl determinist input recept system exampl exampl instantan feedback determinist input recept system consid rfu nondet input nat nat output nat nat nondet defin nondet nondet input illeg output determinist note output tree figur figur tree nondet feedback fb_hide output compon observ feedback nondet case occur feedback stabil case main paper feedback oper preserv refin theorem bool prove theorem introduc addit function altern point free definit figur definit relat bool defin fb_begin bool fb_a bool fb_b bool lemma fb_a fb_b preserv refin defin point free combin fb_begin lemma bool fb_begin fb_end relat fail fb_begin lemma lemma prove theorem assum lemma fb_begin lemma lemma fb_begin lemma main result paper serial composit express parallel composit feedback state defin cross product relat essenti parallel composit output swap figur swap appli feedback wire figur figur cross product feedback cross product definit cross product relat fail bool bool relat fail bool prove feedback cross product relat serial composit theorem bool bool total instfeedback instfeedback fb_hide fb_hide condit need map unknown fail feedback iter stop left term map extern input fail hand map map serial composit fail assumpt reason state unknown legal context compon feedback associ instantan feedback comput feedback relat bool figur way comput feedback figur second comput feedback figur composit pattern result relat relat figur equival assumpt figur compos instantan feedback feedback figur correspond note applic instfeedback take input pair output pair defin feedback figur introduc three adapt function composit adapt repres inner dash rectangl figur appropri type construct feedback variabl system input output connect feedback second adapt function switch system correspond outer dash rectangl figur system input output appli defin instfeedback instfeedback adapt order prove equal introduc addit assumpt relat appropri type defin definit assum variabl rang proper valu properti true relat input unknown valu input choic true feedback comput easier properti dual state fail input unknown valu fail properti introduc independ input compon comput theorem suffici condit equal hold theorem relat figur true proper valu unknown fail instantan feedback predic transform construct instantan feedback direct predic transform defin fb_a fb_b fb_begin fb_end instfeedback fb_hide predic transform valu definit monoton predic transform defin fb_begin fb_end skip fusion fb_begin fb_end unknown occur explicit definit fb_begin occur implicit definit fb_end fb_a order relat valu defin theorem relat fail unknown fb_begin fb_begin fb_end fb_end fb_a fb_b instfeedbackpt fb_hide part theorem prove expand definit properti fusion product theorem lemma direct theorem part definit feedback oper predic transform equival definit feedback relat fail unknown iter oper will defin feedback unit delay arbitrari predic transform introduc auxiliari oper aid definit properti transform input output type construct properti transform work start execut input sequenc output execut suffix start posit execut output sequenc oper iteratenextomega illustr figur figur multipl incom arrow repres sequenc valu separ input wire figur step defin defin properti transform input execut leav compon unchang definit properti transform nat properti transform skip denot sequenc prepend element head sequenc figur graphic illustr transform figur doubl arrow repres sequenc intuit take sequenc remov head appli propend output head take sequenc output sequenc element arbitrari figur skipnext skiptop satisfi properti theorem properti transform properti relat skipnext fusion skipnext skiptop havoc eqtop intuit infinit serial composit formal defin infinit serial composit order solv problem construct finit composit infinit fusion properti transform formal definit properti transform nat map monoton properti tran former defin fusion properti transform appli sequenc calcul sequenc compon correct valu output figur compon valu comput compon correct compon final result reason set compon arbitrari valu arbitrarili larg arbitrari larg prefix output fusion sequenc output exampl iter unit delay appli unit delay initi delay arbitrari input prefix size proof delay definit iterateomega fusion theorem logic calcul state properti iter oper introduc definit iter preserv refin theorem monoton map properti transform theorem calcul iter oper properti transform form state theorem introduc iter oper relat monoton transform relat bool map bool bool relat defin theorem predic relat map monoton transform map predic map relat theorem theorem theorem calcul iteratenextomega theorem properti relat iteratenextomega feedback unit delay defin instantan feedback oper stateless system turn attent feedback system state model state system predic transform input output model current state state type will connect feedback unit delay state current state step result feedback unit delay oper appli predic transform properti transform take input infinit sequenc produc infinit output sequenc initi state system start execut compon valu step second input comput depict figur achiev comput lift special properti transform appli iteratenextomega oper definit predic transform describ earlier defin properti transform input tupl infinit sequenc output type skip properti transform take input sequenc execut input produc valu set output compon assign arbitrari valu transform return second output compon time add unit delay output compon adapt input output type appli iteratenextomega figur graphic represent figur input split compon input split output split output equal input output split figur input compon connect insid output compon assign arbitrari valu connect figur unit delay feedback final introduc transform definit init predic initi feedback variabl predic transform describ unit delay feedback iteratenextomega intuit definit plug figur figur tupl desir system figur major result oper adddelay delayfeedback preserv refin theorem predic transform present appli predic transform structur describ input output practic describ transform symbol transit system predic init set initi state predic set legal input relat transit output relat symbol transit system form prove theorem theorem unit delay feedback predic transform ident properti transform semant correspond symbol transit system saniti check construct condit fals input exist true fals reach fals assert system will fail fail choic intuit behavior system theorem explain elabor intuit explain work determinist input recept system system start initi state input element check input condit condit fals illeg input state execut fail system comput determinist output state true end execut step system proceed step test input condit point execut fals system fail system output determinist infinit sequenc note determinist exist function process yield standard execut run exampl state system feedback consid relat model system state repres current state variabl state equal current state state increment current state will relat stepsum defin three case output equal state predic compos system connect feedback unit delay three case predic init three case input recept compon initi state output output step equal output summat sequenc input three exampl input recept determinist framework handl input recept determinist system illustr exampl determinist input recept system stepsum impos condit step state bound constant appli feedback note local step condit feedback global condit sum element prefix input equal exampl determinist input recept system weaken relat previous system determinist exampl step choos comput observ global condit remain worst case determinist choic pick altern lead higher number store compar altern symbol comput relat quantifi definit bound strict increas sequenc element properti calcul feedback symbol fb_begin relat defin order formula order formula check refin relat defin order formula reduc check valid order formula refin predic transform form reduc check valid order formula theorem predic transform form close serial demon composit fusion product defin order formula oper theorem delay feedback predic transform form equival theorem properti transform form quantifi ltl formula check refin reduc theorem check refin predic transform reduc order logic quantifi ltl formula implement isabell state proven present paper isabell hol theorem prover theori built top theori refin calculus semant formal ltl proof paper isabell code http time write isabell theori compris total line code formal benefit rich collect isabell formal mathemat structur paper partial order boolean algebra complet lattic conclus feedback composit challeng defin determinist input recept system refin preserv paper progress goal propos instantan feedback composit oper partial relat fail unknown oper gener aliz construct semant limit total function second propos feedback unit delay oper system state oper preserv refin theorem framework appli arbitrari simulink diagram translat predic transform handl current state variabl input output appli ing feedback unit delay variabl contrari simulink construct allow instantan feedback well determinist input recept compon open problem remain seek general feedback oper direct properti tran former semant level worthwhil albeit difficult goal general will treat simulink basic block properti transform appli serial feedback composit direct refer alur henzing reactiv modul formal method system design butler explor summat product oper refin cal culus mathemat program construct volum lncs springer berri construct semant pure esterel broy st√∏len specif develop interact system focus stream interfac refin springer von wright refin calculus systemat introduct springer alfaro game model open system nachum dershowitz editor verif theori practic volum lectur note comput scienc springer alfaro henzing interfac automata foundat softwar engin fse acm press doyen henzing jobstmann petrov interfac theori compon reus emsoft dijkstra guard command nondeterminaci formal deriv program comm acm davey priestley introduct lattic order cambridg univers press york second edit edward lee semant execut synchron block diagram languag sci comp progr juli freeman pfen refin type sigplan jdk jin deshmukh kapinski ueda butt benchmark model transform conform check intl workshop appli verif continu hybrid system arch benchmark simulink model http cps org group arch benchmark jdk jin deshmukh kapinski ueda butt powertrain control verif benchmark intl conf hybrid system comput control hscc acm jonsson fulli abstract trace model dataflow asynchron network distrib comput kahn semant simpl languag parallel program pro cess proceed ifip congress north holland lynch tuttl introduct input output automata cwi quarter malik analysi cyclic combin circuit ieee tran comput aid design millen hookup secur synchron machin comput secur foundat workshop iii milner toft harper definit standard mit press cambridg usa nipkow paulson wenzel isabell hol proof assist higher order logic lncs springer plotkin powerdomain construct siam journal comput pnueli tempor logic program foc preoteasa formal refin calculus reactiv system archiv formal proof octob http entri preoteasa tripaki refin calculus reactiv system embed softwar emsoft acm rondon kawaguci jhala liquid type sigplan tarski lattic theoret fixpoint theorem applic pacif math tripaki lick henzing lee theori synchron relat interfac acm transact program languag system topla juli tripaki shaver feedback synchron relat interfac program system volum lncs springer pfen depend type practic program popl acm 