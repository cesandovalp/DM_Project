stale view clean fresh answer stale materi view sanjay krishnan jiannan wang michael franklin ken goldberg tim kraska berkeley brown univers sanjaykrishnan jnwang franklin goldberg tim kraska abstract materi view mvs store pre comput facilit fast queri larg dataset record arriv high rate infeas continu updat main tain mvs common solut defer mainten batch ing updat batch mvs increa ing stale incorrect miss superflu row lead increas inaccur queri propos stale view clean svc address problem data clean ing perspect svc effici clean sampl row stale clean sampl estim aggreg queri approxim estim queri reflect data sampl sensit long tail dis tribut explor outlier index techniqu increas accuraci data distribut skew svc complement exist defer mainten approach accur bound queri answer mainten evalu method generat dataset tpc bench mark real video distribut applic experi con firm theoret clean sampl effici full view mainten estim accur stale svc applic wide varieti mvs introduct store pre comput queri materializa tion extens studi approach reduc queri latenc larg data materi view mvs port major commerci vendor pre comput cach key challeng mvs main tain fresh base data chang substanti work increment mainten mvs ger mainten appli updat feasibl applic monitor visual ana lyst creat mvs slice aggreg dimens eager mainten requir updat mvs incom transact addit work licens creativ common attribut noncommerci noderiv unport licens view copi cens visit http licens mission prior cover licens contact copyright holder email info articl volum invit intern confer larg data base august septemb kohala coast hawaii proceed vldb endow copyright vldb endow stale stale sampl outlier sampl queri inaccur result queri result estim effici data clean figur svc pose view mainten sampl clean problem sampl clean row correct inaccur queri stale view duce transact throughput problem harder view distribut computa tional resourc contend task result pro duction environ common batch updat amort overhead batch size set system constraint vari second night increas batch period user flexi biliti schedul system constraint disadvantag mvs stale mainten period cate guess base data user know incorrect queri type view queri workload sensit small number base data updat exampl updat disproportion affect subset frequent queri row amount stale danger present dichotomi face cost eager mainten cope consequ unknown inaccuraci paper explor intrigu middl ground deriv bound approxim correct answer fraction cost small amount data compens error aggreg queri induc stale method reli model queri answer stale mvs data clean problem stale incorrect miss superflu row problem studi data clean literatur rahm survey increas data volum led develop effici sampl base approach cope dirti data prior work develop sampleclean framework scalabl gregat queri process dirti data data clean expens propos clean sampl data ing sampl improv aggreg queri full dataset stale mvs dirti data approach sampleclean rais possibl sampl clean row mvs return accur queri stale view clean svc illustr figur approxim aggreg queri stale small sampl data calcul relat express materi uniform sampl row express terpret clean stale sampl row clean sampl row estim result aggreg queri view estim procedur approxim flect data approxim error manag stale uniform sampl allow appli theori statist central limit theorem tight bound approxim approxim error parametr sampl size user control trade accuraci comput set present challeng consid prior work summar contribut hash base techniqu ficient materi sampl view algorithm process general aggreg queri sampl view bound ing confid interv outlier index techniqu reduc sensit skew dataset push deriv relat evalu techniqu real synthet dataset svc high accur sult small mainten cost paper organ background work maliz problem section describ sampl queri process techniqu describ outlier index framework evalu approach discuss work final conclus background motiv exampl materi view mainten expens stale case requir creat larg number view includ visual person privaci real time monitor problem eager mainten view creat analyst place bottleneck come transact fast mainten algorithm dbtoaster sql queri compil higher order mainten optim materi view comput difficult increment maintain exampl increment mainten view correl subqueri grow size data common infrastructur maintain multipl mvs analyt task content comput resourc reduc throughput face chal leng solut batch updat amort mainten overhead log analysi exampl suppos video stream pani analyz user engag databas consist bles log video schema log video ownerid log tabl store visit specif video primari key sessionid foreign key video tabl videoid analysi interest find aggreg statist visit averag visit video total num ber visit predic subset owner defin count visit videoid associ owner durat creat view select ownerid count log video log video group log tabl grow stale denot insert tabl login stale affect queri uniform number entri login small relat log queri inaccur exampl view newli video account login queri count visit video will inaccur amount inaccuraci unknown user esti mate expect error base prior experi assumpt hold rapid evolv data opportun approxim sampl bound queri reduc mainten cost small amount data allow user estim magni tude queri result error stale sampleclean sampleclean framework scalabl aggreg queri pro cess dirti data tradit data clean explor pensiv front clean entir dataset increas queri curaci unwil pay full clean cost avoid data clean altogeth propos sampleclean add addit trade design space sampl bound aggreg queri sampl data clean problem high comput cost curat mirror challeng face set tradeoff mainten expens defer mainten inexpens stale explor sampl clean data improv queri process mvs incur full cost mainten metaphor stale mvs sampl clean problem challeng address paper prior work model data clean ing row row black box transform model work miss superflu row stale mvs sampl method account issu propos hash base techniqu effici materi uniform sampl presenc miss superflu row great expand queri process scope sampleclean sum count avg queri bound estim sum count avg queri complic requir analyt tool statist bootstrap estima tion calcul confid interv final add outlier index techniqu improv estim skew data framework overview notat definit svc return bound approxim aggreg queri stale mvs flexibl addit mainten cost materi view databas collect relat materi view result appli view definit view definit compos standard relat algebra express select project join aggreg union intersect differ parametr notat join aggreg general project general project select attribut allow attribut arithmet transform join select tupl satisfi denot type join extend outer join appli aggreg function relat group distinct valu subset attribut distinct oper consid special case aggreg oper composit unari binari relat express repres tree call express tree leav tree base relat view leav node result appli relat pression relat avoid ambigu refer tupl base relat record tupl deriv relat row primari key assum base relat pri mari key case add extra column assign increas sequenc integ record defin relat express row materi view primari key will describ primari key formal subset attribut uniqu stale relat set insert model relat set delet updat model delet insert refer set insert delet relat delta relat denot view consid stale exist insert dele tion base relat delta relat empti mainten multipl way increment main tenanc recomput maintain view denot view formal procedur maintain view mainten strategi mainten strategi relat express execut will return function databas stale view insert delet relat work consid mainten strategi compos relat express materi ize view describ stale data error consequ stale correct miss superflu row formal stale view primari key view incorrect incorrect row set row identifi primari key updat primari key incorrect row exist miss miss row set row identifi primari key exist view stale view primari key miss row exist superflu superflu row set row identi fie primari key exist stale view view primari key superflu row exist uniform random sampl defin sampl ratio row view includ sampl probabl hat notat denot sampl relat relat uniform sampl sampl clean uniform random sampl view exampl exampl summar key con cept terminolog pertain materi view stale data error mainten strategi exampl view visitview join log tabl video tabl count visit video group videoid foreign key rela tionship relat visit count uniqu video addit attribut primari key base relat sessionid log videoid video record log tabl visitview consid stale incorrect row view video visitcount incorrect miss row video view time materi run exampl superflu row video log record delet formal exampl databas ideo log delta relat login suppos appli chang tabl ivm algorithm propos creat delta view appli view definit gin calcul visit count video log ideo login full outer join delta view stale view visitview equal videoid isitv iew ideo login appli general project oper add visit count delta view row visitview treat null isitv iew ideo login mainten strategi isitv iew ideo log login isitv iew ideo login svc workflow formal workflow svc view defin mainten strategi updat mainten period view stale period mainten view problem stale sampl view clean find expr sion deriv fromm clean uniform random sampl stale view produc clean sampl view problem queri result estim aggreg queri state queri result estim result option maintain outlier improv estim skew data stale sampl view clean problem address paper clean sampl stale materi view problem stale sampl view clean stale view sampl stale view ratiom mainten strategi base relat insert delet relat find relat express sampl view ratio queri result estim second problem address paper queri result estim problem queri result estim gregat queri form select agg view view stale result will incorrect object find estim exampl suppos user video receiv view select count suppos user run queri result record insert log ble make result stale sampl visitview suppos sampl sampl stale sampl view clean problem appli updat insert delet sampl effici materi sampl view queri result estim problem estim aggreg queri base stale sampl sampl effici clean sampl describ find relat express deriv mainten strategym effici clean sampl stale view produc challeng setup problem consid naiv solut problem will work trivial applym entir stale view updat sampl result correct problem formul save comput mainten avoid materi row sampl naiv altern solut flaw exampl applym stale sampl sampl delta rela tion challeng thatm commut sampl proven understand commut problem consid maintain group aggreg view simplic exclud group claus queri paper model condit figur appli rule describ definit illus trate assign primari key view select count log group view row distinct videoid materi sampl sampl distinct videoid sampl base relat log sampl view view count partial achiev sampl ensur contribut row subexpress sampl problem row proven proven term lineag tool analysi materi view approxim queri process definit proven row relationr deriv relat exp exp relat express compos express fine proven row respect defin set row updat row guarante unchang primari key relat express defin previous section proven well defin track primari key rule enforc subexpress recur sive defin set primari key relat express tree definit primari key generat lation express defin primari key attribut eri express base case relat leav attribut design primari key primari key result primari key primari key result primari key primari key includ projec tion primari key result tupl primari key primari key result group key set attribut primari key result union primari key primari key result intersect primari key primari key result primari key node express tree key guarante uniqu identifi row rule defin construct definit pli defin relat express exampl variant run exampl view primari key creat view select count log video log video group illustr key generat process figur suppos base relat log miss primari key ses sionid add attribut generat increas sequenc integ record log base tabl video log primari key videoid sessionid respec tive result join will primari key videoid ses sionid group attribut videoid primari key view hash oper primari key allow determin set row con tribut row deriv relat determinist map primari key boolean ensur contribut row sampl achiev hash ing procedur denot hash oper tupl oper appli hash function rang primari key set select record hash equal work studi uniform hash condit impli fraction row sampl hash function util aspect databas practic hash partit hash join hash tabl hash function applic design uniform avoid collis numer piric studi establish common appli hash func tion linear sdbm sha neglig differ true uniform random variabl cryptograph hash work well support commerci open sourc system exampl mysql avoid materi extra row push hash oper express tree push oper sampl benefit push analog predic push oper queri optim interest find ing optim relat express materi identi cal sampl push formal push rule definit hash push deriv relat rule appli push express tree push express push project push general special case push push group claus push push push special case join general join block push hash oper consist attribut constraint enforc attribut equal push foreign key join join foreign key rela tion fact tabl foreign key dimens tabl sens video miss primari key run exampl foreign key relationship exampl hash function bit unsign integ normal maxint primari key sampl key push sampl guaran teed equal join join equal join attribut equal join push push oper oper exampl illustr hash procedur term sql express run exampl push hash function express select video select video log video log select count log group express exampl push hash function select video log select count select count log group group theorem prove correct push rule theorem deriv relat primari key sampl sampl creat appli push sampl creat appli push rule ident sampl sampl ratio proof sketch prove induct base case express tree node trivial make true induct consid level oper tree clear commut hash commut project sampl oper push constraint link group aggreg group claus aggreg hash operand filter row suffici materi deriv row effici view clean appli hash oper tom optim clean express avoid materi unnecessari row appli stale sampl view databas delta relat produc sampl sampl ratio address problem previous exampl illustr propos approach ampl view visitview express tree list figur start appli hash oper primari key videoid oper express tree project increment visitcount view allow push primari key project second express hash equal join key merg aggreg delta view view allow push branch tree special case equal join left side reach stale view visitview login video delta view primarykey visitview login video delta view optim optim primarykey primarykey primarykey figur appli rule describ illus trate optim sampl exampl mainten strategi side reach aggreg queri count primari key group claus push sampl reach point hash equal iti join key allow push sampl relat login video correspond sampl start uniform random sampl stale view hash push allow effici materi sampl uniform random sampl view sampl uniform random sampl respect relat sampl correl generat clean hash techniqu ensur primari key depend primari key statist posit correl queri result will properti leverag improv queri estim accuraci properti correspond suppos uniform sampl denot pri mari key correspond uniform uniform random sampl sampl ratio remov superflu row sampl miss row key preserv updat row queri result estim svc return correspond sampl dirti sampl sampl stale view clean sampl sam ple view discuss estim queri correspond sampl discuss bound guarante class aggr gate queri result estim suppos aggreg queri form view select view cond quantifi stale aggreg queri result differ queri appli stale view compar view object work estim approx imat queri process aqp literatur sampl base estim well studi inspir estim gorithm svc aqp svc materi sampl view aqp style result estim techniqu svc aqp clean sampl view queri scale factor appli queri sampl scale exampl sum count scale factor avg scale factor refer detail dis cussion scale factor svc aqp return call direct estim estim stale view queri full stale view timat differ sampl call approach svc corr repres calcul correct direct estim svc corr clean sampl correspond dirti sampl queri scale factor appli svc aqp rest fresh appli svc aqp rest stale appli full stale view rstale differ add rstale rest fresh rest stale common studi properti aqp literatur unbias ness unbias result estim expect estim sampl size prove svc aqp unbias aqp method unbias result svc corr unbias lemma exist unbias sampl estim exist unbias sampl estim proof sketch suppos unbias sampl esti mator substitut express appli linear expect queri unbias sampl estim bias sampl estim bound exampl queri clude median percentil corollari previous lemma bound bias estim achiev bound bias well exampl formal earlier exampl queri term svc corr svc aqp suppos initi queri result log record insert log tabl make result stale suppos work sampl ratio svc aqp count number video clean sampl current count greater scale result count clean sampl estim svc aqp avg queri consid condit unbias work svc corr svc aqp dirti sampl suppos video dirti sampl count result run svc aqp dirti sampl differ valu correct result estim confid interv bound estim confid interv explor three case aggreg written sampl gregat bound empir statist boot strap min max sum count avg written sampl sum sampl scale relat size count indic function scale relat size case analyt confi denc interv allow analyz effici tradeoff case exampl median lose properti empir techniqu bound queri min max fall categori ili bound empir discuss queri technic report confid interv sampl case aggreg express sampl sum count avg sampl uniform random sampl call sampl replac converg popul central limit theorem clt sampl calcul sampl varianc sampl popul error distribut confid interv gaussian tail probabl discuss calcul confid interv sql svc aqp step queri rewrit step move predic cond select claus true fals attr aggreg attribut sampl ratio defin intermedi result tran tabl transform row column primari key second column defin term cond statement scale sum select cond count select cond avg scale write queri select cond svc aqp confid interv result defin select count calcul confid interv svc corr statist differ sampl row exist associ addit subtract rewrit row row differ challeng miss row side ill defin defin null handl subtract oper call definit correspond subtract gregat queri correspond relat schema primari key aggreg attribut queri defin project full outer join equal null valu repres oper defin intermedi result diff diff tran tran svc corr svc aqp bound result clt select count aqp corr sampl term bound analyz svc aqp pare svc corr fix sampl size svc aqp estim proport varianc clean sampl view svc corr varianc differ chang differ stale view rewritten correct will varianc previous correspond correl sampl differ small ident cov result point updat stale direct estim accur cross break point switch svc corr svc aqp svc aqp depend cov measur data chang guarante approxim error experi figur evalu break point empir select sampl select queri sampl size fraction record relat satisfi predic queri model select reduct effect sampl size make estim varianc confid size scale tradeoff accuraci mainten cost fix accuraci tradeoff answer select queri mainten cost optim sampl optim unbias estim theori defin term varianc estim proposit estim call minimum varianc unbias estim mvue unbias varianc estim equal unbias estim sampl relat defin discret distribut impor tant note distribut data generat ing distribut continu valu attribut defin discret distribut popul finit finit sampl sampl take discret set valu general case distribut describ set valu smaller parametr representa tion set sampl mvue assumpt under distribut valu svc aqp svc corr optim spectiv estim estim vari abl optim svc corr accur svc aqp vice versa case assumpt knowledg optim condit hold simpl counter exampl knew data exact sampl size suffici answer aggreg queri paramet ric distribut sampl estim mvue poisson bernouilli binomi normal exponenti difficult unknown case deriv mvue sampl approach valid choic estim exist analysi sampl esti mator set estim optim bootstrap confid interv second case explor bound queri express sampl analyt confid terval guarante estim optim aqp common techniqu call sta tistic bootstrap empir bound proach repeat subsampl replac sam ple appli queri sampl techniqu bound svc aqp detail svc corr propos variant bootstrap bound estim variant repeat estim sampl build empir distribut svc corr bootstrap find confid interv subsampl replac appli svc aqp record differ aqp aqp return iter return percentil distribut outlier index sampl sensit outlier power law long tail distribut common practic basic idea creat outlier record record attribut deviat great ensur record includ sampl record great increas varianc data indic base relat step user select attribut base lation specifi threshold size limit singl pass updat maintain view built store refer record attribut greater size limit reach incom record compar smallest index record greater evict smallest record approach extend attribut tail direct make threshold rang take highest lowest valu techniqu threshold clariti approach select threshold prior base tabl calcul background period mainten cycl size limit attribut select top record attribut top list set threshold attribut lowest record threshold altern calcul varianc attribut set threshold repres standard deviat threshold adapt set mainten period outlier sampl question infor mation materi view propag indic upward express tree add condit elig indic base relat sampl push hash oper relat iter sampl test threshold add record outlier formal propag properti recurs relat outlier set attribut set record exceed threshold attribut main idea treat index record relat propag upward mainten strategi definit outlier pushup defin lier tupl set index attribut set record outlier propag upward rule base relat outlier indic base relat push relat sampl sampl oper push relat push outlier appli lection outlier push upward push upward group aggreg set aggr gation attribut outlier step appli aggreg outlier distinct select row select set outlier push outlier set attribut combin intersect avoid miss outlier push outlier push outlier outlier indic propag view top tree final set record rule fact subset materi view queri process advantag theori describ previ ous incorpor set implement outlier addit attribut sampl boolean flag true fals outlier index record row contain sampl outlier outlier take preced ensur doubl count outlier queri process result estim sampl outlier distinct part membership outlier preced sampl actu alli sampl restrict set queri creg correct calcul techniqu propos previous adjust sampl ratio account outlier remov sampl appli techniqu outlier set set determini tic sampl ratio set call result cout count record satisfi con dition number outlier satisfi condit merg correct creg cout queri previous unbias approach preserv unbiased averag unbias estim creg cout linear expect oper preserv properti cout determinist fact bias varianc creg cout uncorrel make bound describ previous applic well exampl chose attribut base data exampl durat exampl threshold hour appli rule push materi entir set row durat longer hour svc aqp queri set clean row durat longer hour updat rule updat result base number record total size view svc corr addit queri set dirti row durat longer hour differ svc aqp svc aqp updat rule updat result base number record total size view evalu svc singl node mysql databas eval uat accuraci perform effici varieti mate rializ view scenario evalu outlier index proach term improv queri accuraci evalu overhead associ evalu benchmark applic server log analysi dataset video stream compani conviva experiment setup singl node experiment setup singl node experi larg amazon node intel xeon memori ssd disk mysql ver sion databas experi evalu view tpcd skew dataset tpcd skew dataset base transact process benchmark schema tpcd modifi generat dataset valu drawn zipfian distribut uniform zipfian dis tribut long tail distribut singl paramet larger extrem tail correspond basic tpcd benchmark experi crement mainten algorithm experi chang tabl delta tabl method numer work increment mainten applic updat memori temporari tabl discount load time experi build primari key view updat scribe view definit queri join view tpcd specif tabl receiv inser tion updat lineitem order parametr queri specif group aggreg join extend paper detail experiment setup lineitem order defin materi view foreign key join lineitem order compar increment view mainten svc treat group aggreg queri view complex view goal demonstr applic svc simpl materi view includ nest queri complex relat algebra tpcd schema denorm databas treat tpcd queri view denorm schema tpcd queri parametr queri paramet select predic random set tpcd qgen program program generat random instanc queri random instanc materi view set view benefit svc exclud view static updat view base tpcd workload main view small cardin make suitabl sampl view generat queri view outer queri view group aggreg pick random attribut group claus random tribut aggreg generat predic attribut domain tpcd stan dard select random subset domain tribut countri predic countrycod countrycod generat random sum avg count queri view distribut experiment setup evalu svc apach spark log video stream compani conviva denorm user activ log correspond video view metric data transfer rate latenc accompani data month trace queri sql identifi common summari statist type queri calcul engag error diagnosi metric queri defin view experi popul view definit user activ log record appli remain user activ log record updat order arriv experi generat aggreg random queri view random time rang random subset custom metric evalu mainten stale baselin evalu pli mainten materi view increment view mainten ivm appli increment view mainten chang tabl base mainten full view svc aqp maintain sampl materi view svc estim result aqp style estim techniqu svc corr maintain sampl materi view svc process queri view correct appli aqp clean dirti sampl estim correct stale queri result svc sampl paramet denot sampl size svc corr svc aqp evalu accuraci perform defin metric relat error queri result incorrect result relat error queri multipl group queri relat error defin median error mainten time defin mainten time time need produc view increment view main tenanc time need produc sampl svc join view experi evalu svc perform terial view join lineitem order generat base tpcd skew dataset skew deriv view dataset generat base data updat insert updat exist record vari sampl size perform figur mainten time svc function sampl size bold dash note time full ivm materi view sampl allow save mainten time albeit approxim answer full increment mainten take second svc sampl complet second speedup svc figur figur eval uat speedup sampl size plot speedup svc compar ivm vari size updat axi updat size percentag base data small updat size speedup smaller updat size updat size larger svc effici updat size speedup super linear view join lineitem order assum join updat tabl grow sampl reduc comput super linear accuraci design point sampl evalu accuraci svc figur answer tpcd queri view tpcd queri group aggreg plot median relat error svc corr main tenanc svc aqp averag queri svc corr accur stale baselin accur appli svc aqp sampl svc corr svc aqp accur true svc corr move comput maint nanc queri execut svc corr calcul correct queri full materi view top queri time full view ivm addit time calcul cor rection sampl hand svc aqp run queri sampl view evalu overhead fig ure compar total mainten time queri execut time sampl svc corr requir sec execut sum view ivm requir sec svc aqp requir sec compar overhead save mainten time small svc corr accur materi view stale predict analysi hand svc aqp robust stale consi tent relat error error svc corr grow proport stale figur explor queri process techniqu svc corr svc aqp sampl find svc corr accur updat size base data complex view experi demonstr breadth view port svc tpcd queri materi view generat base tpcd skew dataset skew deriv view dataset generat base data updat insert updat exist record vari sampl size figur mainten time sampl compar full view experi ain tim sampl ratio join view svc updat size svc ivm updat base data join view svc speedup figur view insert date vari sampl ratio measur mainten time svc fix sampl ratio vari updat size plot speedup compar full increment mainten lat ive rro join view queri accuraci stale svc aqp svc corr figur fix sampl ratio updat size generat tpcd parameter queri answer queri stale materi view svc corr svc aqp plot median rela tive error queri illustr view definit play role effici approach view sampl lead larg speedup indic previous experi view nest structur block pushdown hash con tain subqueri predic involv primari key requir scan base relat evalu string transform key block push consist previous experi show svc faster ivm accur svc aqp mainten outlier index experi evalu outlier index top strategi describ set outlier index help svc aqp svc corr extendedpric attribut lineitem tabl evalu outlier complex tpcd view find view benefit push rule view depend extendedpric set complex view chosen outlier index experi figur analyz set record appli svc corr svc aqp view deriv dataset skew paramet queri time measur error quartil find skew data svc outlier index reduc queri error factor figur plot overhead outlier index size overhead small compar gain sampl mainten strategi note prior experi outlier caveat experi moder skew data zipfian paramet paramet set quartil queri estim error figur outlier index improv queri reduc varianc ivm svc corr svc aqp join view total time queri updat mainten updat lat ive rro updat base data join view svc corr svc aqp svc corr svc aqp figur fix sampl ratio updat size measur total time increment maint nanc queri time svc corr accur svc aqp break point complex view mainten ivm svc tiv complex view generat queri accuraci stale svc aqp svc corr figur updat size compar mainten time accuraci svc sampl view benefit svc nest queri structur sampl size updat size svc corr accur svc aqp mainten estim set reduct varianc largest longer tail conviva deriv view base data add updat view store maintain apach spark distribut environ goal experi evalu svc perform real scenario real dataset distribut architectur figur averag view svc speedup view full increment mainten take second node cluster cost figur svc high accur sult averag error consi tenci synthet dataset experi highlight salient benefit svc sampl rela tive cheap oper relat speedup singl node distribut environ analyt workload conviva user engag analysi sampl accuraci save system spark support select updat addit experi aggreg view experi evalu aggreg view case data cube generat base tpcd dataset rti rro zipfian paramet accuraci svc aqp svc aqp svc corr svc corr stale overhead outlier index ivm figur view updat plot quartil error techniqu vari skew data outlier add overhead small relat total mainten time conviva mainten time ivm svc tiv conviva queri accuraci stale svc aqp svc corr figur compar mainten time svc sampl full increment mainten find tpcd svc save mainten time evalu accuraci estim techniqu skew deriv base cube materi view dataset add updat appli svc estim roll dimens perform observ trade previous experi sampl reduc mainten time figur take second maintain entir view sampl maintain second fore sampl size vari updat size observ svc effici updat size grow figur updat size speedup accuraci figur measur accuraci roll aggreg queri view dimens aggreg dimens sampl size updat size averag svc corr accur stale baselin accur svc aqp figur data cube oper construct group aggreg measur max error aggreg median stale close queri group aggreg error figur svc great mitig error queri queri final data cube illus trate svc support broader rang queri sum count avg chang roll queri median function figur svc corr svc aqp accur estim median estim sum median sensi tive varianc data ain tim sampl ratio agg view svc updat size svc ivm updat base data aggview svc speedup figur aggreg view case sampl save mainten time updat size grow svc ideal speedup lat ive rro agg view roll queri accuraci stale svc aqp svc corr figur measur accuraci roll aggreg queri view sampl size updat size find svc corr accur svc aqp mainten mini batch experi devis experi simul real integra tion period mainten mysql case apach spark support select updat insert view immut point immut view fault toler requir view maintain synchron avoid overhead updat view batch spark stream variant support complex sql deriv materi view paper reli mini batch updat svc ivm will separ thread rdd materi view applic svc ivm maintain respect rdds batch updat model lot paramet batch size period main tenanc batch size svc sampl ratio svc fact concurr thread reduc throughput goal throughput cluster measur svc ivm ivm lead accur queri answer batch size spark larger batch size amort overhead bet ter figur trade batch size throughput spark throughput small batch smaller throughput larger batch concurr svc ivm measur reduct throughput run multipl thread svc loop thread ivm measur reduct throughput cluster previous batch size experi ment figur plot throughput batch size mainten thread run small batch size throughput cluster reduc factor larger size reduct smaller experi figur larger batch size amen parallel comput idl cpu time choos batch size figur fig ure larger batch size effici ela tiv agg view roll queri max group error stale max svc aqp max svc corr max figur updat plot max error pose median error previous experi updat dataset size queri incorrect svc help mitig ror lat ive rro agg view median queri stale svc aqp svc corr figur experi replac sum queri median queri find svc accur larger batch size lead stale combin sult figur figur svc ivm ivm cluster throughput function batch size fix throughput find smallest batch size achiev throughput fix record record ivm smallest batch size met throughput demand svc ivm smallest batch size run period mainten view updat frequent conjunct svc frequent approach continu loop svc ivm ivm measur maxim error mainten period trade sam pling ratio larger sampl accur estim svc batch stale quantifi error approach max error maximum error mainten period figur compet object lead optim sampl ratio sampl point find appli svc accur accur intuit svc accur figur plot averag cpu util cluster period ivm svc period ivm find svc take advantag idl time system common shuffl oper synchron parallel model experi worst case applic svc improv term queri accuraci typic deploy throughput demand variabl forc mainten period longer night svc take advantag micro idl time communic step provid larg gain control idl time mainten concurr work batch size throughput batch size thread batch size throughput batch size figur spark rdds effici updat batch batch size increas system throughput creas run multipl thread throughput reduc larger batch duction rro sampl ratio max error ivm svc ivm rro sampl ratio max error ivm svc ivm figur fix throughput svc period mainten accur address cost materi view mainten ject paper focus perspect includ complex analyt queri transact real time analyt physic design increas search focus parallel major concern industri system increment updat pre comput indic googl percol rainbird stream ing communiti studi view mainten problem spark stream zaharia studi exploit memori materi mon etdb liarou studi idea columnar storag appli enabl real time analyt work focus correct consist fault toler materi view mainten svc propos altern model view main tenanc allow approxim error guarante queri materi view vast reduc mainten time decis problem exact need long probabl error boundabl sampl well stud context queri process prob lem effici sampl relat process complex queri well studi svc problem effici sampl mainten strategi relat express updat materi view gen eral uniform sampl procedur work context lineag hash problem approxi mate queri process perspect estimat ing correct estim queri srinivasan carey studi problem queri correct call compens base queri process concurr control studi sampl estim work appli context concurr control work consid applic correct appli sampl svc sampl svc introduc challeng sensit outlier question bias estim opti maliti ili tio measur ivm ivm svc figur svc better util idl time cluster main tain sampl sampl studi perspect main tain sampl joshi jermain studi index materi view amen random sampl spirit queri view approxim goal work optim queri process address cost increment mainten work sampl view limit context cardin estim special case framework count queri nirkhiwal studi algebra estim con fidenc interv aggreg queri object work sampl effici svc estim special case consid view construct select project oper hash pushdown will yield model theoret work mainten approxim histogram synops sketch close resembl aggreg materi view object work includ techniqu sketch approxim count reduc requir storag reduc requir updat time meliou propos techniqu trace error base data find respons erron tupl propos techniqu correct error svc cor rect general error meliou hard constraint sat isfact problem svc formal stale model updat base data mod ele error affect mvs allow trace error clean madden propos model correct outlier delet record base data restrict model data clean svc author consid chang exist row insert delet handl general lation express nest aggreg challamalla propos approxim techniqu error con straint materi view propos chang base data constraint satisfi compl mentari major differ three work svc requir explicit specif erron row materi view identifi row erron requir materi error equival full increment mainten formal main tenanc strategi relat express updat view allow sampl row materi direct applic stale svc plementari work dirti data set sampl techniqu propos paper proxim data clean techniqu excit avenu futur work sampl explor stream communiti idea sampl incom updat pli stream process work studi problem materi exampl jet stream project rabkin sampl help real time analysi aggreg work malli studi class view benefit sampl formal queri view idea rabkin appli svc futur work ampl descript coarsen oper aggreg experi roll queri aggr gate view varieti effort propos storag effici process aggreg queri stream problem set motiv limit opportun experi svc work varieti plicat limit summar primari limit svc class queri type materi view work cuse aggreg queri accuraci decreas select queri increas sampl base method fundament limit support point lookup queri select singl row predict theoreti cal result accuraci decreas fraction row satisfi predic term view definit svc support view order top claus sampl assum order row clear sampl commut general order oper ation futur will explor mainten optim propos work exampl dbtoaster main compon higher order delta process sql queri piler complementari svc svc propos approach accur queri process mvs promis avenu futur work par ticular interest deeper explor multipl set interest design problem storag constraint throughput demand optim sampl tio view interest challeng queri join mutlipl sampl mvs manag svc interest possibl share comput tween mvs mainten view deriv view final straight forward implemen tation adapt select paramet svc view sampl ratio outlier threshold conclus materi view mainten expens prac tice eager view mainten avoid cost lead stale materi view incorrect miss superflu row work formal problem stale ness view mainten data clean problem svc sampl base data clean approach accur queri reflect data great reduc comput cost achiev extend prior work data clean sampleclean effici clean stale mvs includ process wider set aggreg queri handl miss data error prove queri opti maliti estim hold present empir oret show sampl data clean approach expens full view mainten larg class materi view provid accur aggreg queri answer reflect data promis avenu futur work work focus aggreg queri accuraci decreas select queri increas sampl base method fundament limit support point lookup queri select singl row address problem parametr machin learn singl paramet esti mator interest deeper explor multipl set interest design prob lem storag constraint throughput demand optim sampl ratio view kai zeng advic feedback paper support nsf cise expedit award ccf lbnl award darpa xdata award gift amazon web servic googl sap thoma stacey siebel foundat adatao adob appl blue goji bosch cisco cray cloudera ericsson facebook guavus huawei informatica intel microsoft netapp pivot samsung schlumberg splunk virdata vmware refer conviva http abadi carney etintemel cherniack convey lee stonebrak tatbul zdonik aurora model architectur data stream manag vldb agarw milner kleiner talwalkar jordan madden mozafari stoica know wrong build fast reliabl approxim queri process system sigmod confer agarw mozafari panda milner madden stoica blinkdb queri bound error bound respons time larg data eurosi baili feket hellerstein ghodsi stoica scalabl atom visibl ramp transact sigmod confer chalamalla ilya ouzzani papotti descript prescript data clean sigmod confer chaudhuri das datar motwani narasayya overcom limit sampl aggreg queri icd chaudhuri narasayya tpc data generat skew user viveknar tpcdskew chirkova yang materi view foundat trend databas clauset shalizi newman power law distribut empir data siam review cormen leiserson rivest stein introduct algorithm cormod garofalaki haa jermain synops massiv data sampl histogram wavelet sketch foundat trend databas cox hinkley theoret statist crc press cui widom lineag trace general data warehous transform vldb dobra garofalaki gehrk rastogi process complex aggreg queri data stream sigmod confer garofalaki gehrk rastogi data stream manag process high speed data stream springer garofalaki gibbon approxim queri process tame terabyt vldb ghanem elmagarmid larson aref support view data stream manag system acm transact databas system tod gibbon matia poosala fast increment mainten approxim histogram acm tran databas syst golab johnson shkapenyuk scalabl schedul updat stream data warehous ieee tran knowl data eng greenwald khanna space effici onlin comput quantil summari sigmod confer gupta mumick mainten materi view problem techniqu applic ieee data eng bull gupta mumick increment mainten aggreg outerjoin express system yang guo chen lin zhou comet batch stream process data intens distribut comput socc henk schmoll zsebi empir evalu hash function packetid generat sampl multipoint measur passiv activ network measur springer joshi jermain materi sampl view databas approxim ieee tran knowl data eng koch ahmad kennedi nikol tzli lupei shaikhha dbtoaster higher order delta process dynam frequent fresh view vldb krishnamurthi franklin davi farina golovko thombr continu analyt discontinu stream sigmod confer krishnan wang franklin goldberg kraska stale view clean fresh answer stale materi view http sanjayk pub svc pdf larson lehner zhou zabback cardin estim sampl view qualiti assur sigmod larson yang comput queri deriv relat vldb simard librari empir test random number generat acm transact mathemat softwar tom lefevr sankaranarayanan hacigu tatemura polyzoti carey opportunist physic design big data analyt sigmod confer liarou idreo manegold kersten monetdb datacel onlin analyt stream column store pvldb liu jiang heer immen real time visual queri big data comput graph forum meliou gatterbau nath suciu trace data error view condit causal sigmod confer mitzenmach histori generat model power law lognorm distribut internet mathemat nikol elseidi koch linview increment view mainten complex analyt queri sigmod confer nirkhiwal dobra jermain sampl algebra aggreg estim pvldb olken random sampl databas phd thesi univers california olken rotem simpl random sampl relat databas vldb olken rotem mainten materi view sampl queri icd peng dabek larg scale increment process distribut transact notif osdi rabkin ary sen pai freedman aggreg degrad jetstream stream analyt wide area nsdi rahm data clean problem current approach ieee data eng bull srinivasan carey compens base queri process sigmod confer tatbul etintemel zdonik cherniack stonebrak load shed data stream manag vldb wang krishnan franklin goldberg kraska milo sampl clean framework fast accur queri process dirti data sigmod confer weil rainbird real time analyt twitter strata madden scorpion explain outlier aggreg queri pvldb zaharia das hunter shenker stoica discret stream fault toler stream comput scale sosp zeng gao mozafari zaniolo analyt bootstrap method fast error estim approxim queri process sigmod appendix extens min max min max fall categori canoni cal case bootstrap fail devis estim procedur correct queri achiev bound interpret confid inter val calcul probabl larger smaller element exist unsampl view devis correct estim max row calcul row row differ max differ add max stale view weak bound inequ iti random variabl varianc var probabl larger constant var var set differ max timat averag calcul probabl will higher estim modifi min correspond ing bound var var bound interpret confi denc interv probabl larger smaller element exist unsampl view select queri svc explor extend correct procedur select queri suppos select queri predic select view select queri stale view return set row result three type data error row miss row fals includ row valu incorrect sum count avg queri case appli queri sampl view sampl ing lineag defin earlier identifi row updat delet updat row sam ple overwrit row stale queri result row union sampl select date stale select miss row remov stale select quantifi approxim error rewrit select queri count estim number row updat delet three confid interv extend proof hash equival rng work argu hash sampl relat express complex theori spectiv hash equival random number generat rng exist true hash function conjec ture impli conjectur assumpt cryptographi cours ideal hash function requir theori exist practic find exist hash linear hash close ideal advantag theori hand hash order magnitud slower uniform assumpt call simpl uniform hash assumpt suha analyz perform hash tabl hash partit interest tradeoff latenc comput hash compar uniform exampl lin ear hash store procedur mysql fast pseudoran dom number generat tablesampl oper hash exhibit uniform hash correspond benefit determinist hash appli con junction primari key view correspond properti definit free proposit hash correspond suppos stale view view view schema primari key hash function appli hash primari key sampl correspond proof condit correspond uniform uniform random sampl sampl ratio remov superflu row sampl miss row key preserv updat row uniform satisfi definit suha simpl uniform hash assumpt condit satisfi delet impli condit convers satisfi condit satisfi sampl primari key consist will sampl theorem proof theorem deriv relat primari key sampl sampl creat appli push sampl creat appli push rule ident sampl sampl ratio proof prove induct base case express tree node trivial make true induct consid level oper tree clear commut hash key allow push commut project sampl oper push constraint link case foreign key relationship equal iti join key group aggreg group claus aggreg hash operand filter row suffici materi rive row provabl hard pushdown nest group aggreg select count select sum log group group reduct subset sum problem hash oper defin concept tupl lineag primari key curious properti determinist hash techniqu hash attribut retain statist properti uniform random sampl attribut uniqu includ individ ual row probabl consequ push hash oper arbitrari equal join hash join key defer explor properti futur work introduc tradeoff exampl sampl uniqu key unbias expect higher varianc size sampl happen hash larg group lead creas perform suppos key duplic time averag vari anc varianc sampl size sampl frac tion equat deriv formula varianc mix ture distribut set sampl con sider varianc benefit push hash oper queri tree experiment detail join view tpcd queri experi materi join lineitem order treat tpcd queri queri view select includ experi queri join conviva view workload annot summari statist queri filter common type detail queri high level characterist summari statist type view count error type group resourc user sum byte transfer group resourc user count visit group express resourc tag user nest queri group user region ser vice provid aggreg statist nest queri group user region ser vice provid aggreg error type union queri filter subset resourc aggreg visit byte transfer aggreg network statist group resourc user aggreg aggreg visit statist group resourc user aggreg data cube specif defin base cube materi view sum revenu partkey cus tomer custkey regionkey group partkey queri aggreg subset dimens cube sum revenu column custkey nationkey regionkey partkey custkey nationkey custkey regionkey custkey partkey nationkey regionkey nationkey partkey custkey nationkey regionkey custkey nationkey partkey nationkey regionkey partkey experi median queri chang sum median revenu tabl tpcd queri denorm tpcd schema treat queri view denorm schema experi evalu svc provid tabl queri reason queri suitabl exper iment main reason queri cardin result small sampl view result small sens appli svc tpcd specif tabl updat lineitem order queri depend tabl chang mainten list exclud queri reason exclu sion queri result cardin small queri queri static queri result cardin small queri result cardin small queri result cardin small queri queri static queri result cardin small queri result cardin small queri queri inner queri treat view queri queri static queri result cardin small queri result cardin small queri result cardin small 