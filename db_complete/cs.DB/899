insert thesi task czech technic univers pragu faculti technolog depart softwar engin thesi cross match engin increment photometr sky survey dvorn supervisor rndr petr csc june acknowledg supervisor petr patienc willing help astronom aspect thesi filip hroch support munipack usag well theoret aspect thesi person support help martin reineck healpix support markus demleitn gavo support exceed scope gavo dach packag acknowledg grant gacr declar declar present thesi work cite sourc guidelin adher ethic principl elabor academ final thesi acknowledg thesi subject right oblig stip ulat coll copyright amend articl grant nonexclus author izat licens util thesi includ comput program incorpor attach correspond document hereinaft collect refer work person util work person entitl work includ profit purpos detract author limit term time locat quantiti person licens oblig grant licens scope defin respect work creat wholli base work modi work combin work work includ work collect work adapt work includ translat time sourc code work scope compar scope sourc code work pragu june czech technic univers pragu faculti technolog dvorn right reserv thesi school work defin copyright czech republ submit czech technic univers pragu faculti technolog thesi protect copyright usag permiss prohibit except defin copyright citat thesi dvorn cross match engin increment photometr sky survey thesi czech technic univers pragu faculti technolog abstrakt pro dnes napla novat oblohi kde jsou dane expoz ktere tato pra ukazuj nen nutn lze astronomicki dat ktera tomu ubec nebyla usobem zrecyklovat fotometrick nim pozorovani objekt tato pra zabi zejm usobem generova katalogu objekt kteri nutni pro praxi jeden probl astroinformatic jedna klastrova datovi jemu rovni big data kde technik selha mus hledat nove cesti zabi lou pohledu konu lovatelnosti distribuovatelnosti atd definujem krite ria pro ktera jsme vyhodnotili testovani kvalitativn roki ktere hod nocen sledk databa jako choz bod implementac srovna technologiemi potencia pro probl mohou nosql array databa nebo paralelismu slova astronomi paralelismus klastrova big data databa abstract light curv generat preplan photometri survey need nowaday exposur coordin chang survey thesi requir data mine light curv astronom data meant purpos approach recycl photometr survey generat light curv observ object thesi address catalog generat process need creat light curv practic focus problem astroinformat cluster data volum big data scale tradit techniqu stagger search path achiev goal consid wide varieti solut view perform scalabl distribut defin criteria time memori complex evalu test solut creat qualiti standard account evalu relat databas start point implement compar newest technolog usabl solv problem nosql array databas transfer heavi comput cluster tower supercomput parallel keyword astronomi parallel cluster big data databas content introduct motiv data structur solut review solut prove concept general background databas background pure sql solut array databas apach spark applic design mpi openmp design detail function requir applic model time complex scalabl realis implement integr time complex qualiti result summari conclus bibliographi acronym content enclos sourc code buildchunksfromcoordin xii list figur state state small magellan cloud imag osp coverag astrometri accuraci typic star observ cluster star observ model catalog cross match pixel light curv generat workflow applic uml class diagram elbow method basic memori consumpt memori save appli light curv display splat total time base data size program part time thread time base data size thread time base task size parallel effici cluster time linear algorithm cluster phase time compar total run time real time hybrid algorithm parallel effici algorithm aladin view healpix grid cluster overlap region xiii initi center chosen random converg variant comparison elbow factor high cluster join radius high cluster join radius low catalog cross match increment strategi catalog cross match increment strategi xiv chapter introduct chapter will defin topic thesi content justif purpos abstract main thesi set cluster base euclidean metric ultim goal provid light astronom object user qualiti generat object main problem cross match exist catalog creat light curv observ creat catalog guarante observ will light curv state fig fig motiv chapter will justifi motiv thesi will explain work benefit will bring user user system astronom natur data interest geospati scienc high level motiv creat light curv catalog osp southern sky photometri survey project data origin ate form danish telescop photometri survey hundr thousand imag observ term observ light dot identifi imag sky curv graph bright base time observa tion astronom object list celesti object identifi coordin planet star galaxi quasar match astronomi understood process match data set criterium distanc data point point set will match point set distanc smaller criterium introduct telescop munipack postgresql light curv object extern catalog figur state telescop munipack postgresql catalog creation light curv object figur state region sky identifi celesti object imag plicat process output process set observ identifi imag data produc light curv meant origin differ standard solut nowaday aspect will brought detail data structur lot sky survey clear solv problem answer question decis introduc structur data process measur exact posit movement celesti object process measur flux intens astronom object electromagnet radiat observ individu object defin sky coordin photon flux lot paramet data structur figur small magellan cloud field locat area small magellan fig dens imag cca identifi observ comparison averag region sky coverag deep will observ cca imag dataset total identifi observ dataset will grow project expect identifi observ assign celesti object typic imag fig typic versus data will compar typic approach creat light curv catalog choos reason structur typic data magellan cloud dwarf iregular galaxi closest neighbor milki open star cluster small magellan cloud introduct figur imag typic data typic light curv survey will hand defin grid imag area will observ repeat regular time interv grid will chang project imag time cover region will overlap entir intersect coverag will big imag differenti photometri astrometri crucial condit differenti astrometri success compar imag common coverag match posit differ absolut differenti astrometri present data differenti astrometri survey age osp object interest planet teroid star thing data origin meant second grid restrict imag posit best fig solut chaotic spread imag differenti astrometri pho tometri stagger imag referenti star common figur osp coverag solut data thrown qualiti easili lead discoveri survey rare case data unus approach recycl imag origin meant produc light curv data mine reason approach survey increment case standard survey close complic add sooner imag survey imag light curv updat generat anew astrometri differenti compar imag direct help packag munipack comput astrometri photometri imag creat set calibr star select catalog currenti calibr coordin astrometri separ imag point mind imag overlap creat small random error will observ immov object creat group point gaussian distribut coordin accuraci astrometri arcsec half size pixel fig group introduct point cluster assign cluster identifi point observ sky queri light curv individu object sky figur astrometri accuraci product astrometri binari tabl observ imag data imag hun dred observ cluster assign real physic object cluster topic thesi increment survey transient creat increment survey itera tion cluster observ creat version catalog individu star observ imag assign object catalog process survey expand imag process cross match creat catalog match catalog generat process separ ate updat catalog identifi assign individu star observ detect transient supernova catalog identifi great advantag usual approach cross match catalog throw observ object catalog solut public project will present ivoa interoper workshop spring meet chapter review solut prove concept exist solut solv exact problem chapter will typic analysi partial implement solut prove concept evalu result decid solut feasibl chapter defin background environ appli solut will solut fail aspect solut analyz care throw partial fulli implement solut background need will defin section inac ceptabl solut section pure sql array databas apach spark final accept solut chapter general background possibl store astronom data publish infrastructur inherit thesi general data flow fig detail view fig main thing will focus thesi proper cluster astronom data produc desir light curv star fig cca observ distribut star center closer fig observ object period time error astrometri arcsec form cluster diamet cca arcsec point gaug review solut prove concept figur typic star observ figur cluster star observ databas background databas model under architectur fig imag repres row exposur tabl observ identifi imag will observ tabl track obsnam exposur will creat identifi actual object write objcat tabl observ assign catalog object cat foreign key objob complet view easi access complet inform ation observ join data exposur observ objcat tabl effect link imag data observ filter actual observ point imag identifi attribut catalog identifi real object observ correspond objob lightcurv tabl base objob complet tabl ssa protocol publish light curv process describ pure sql solut detail thesi exposur obsname_id accref dateob hjd band tel_alt tel_az airmass pressur tmp orira oridec observ obsname_id starno id_cat flx photon photrat fnu fnu mag abmag stmag photonerr photrateerr flxerr fnuerr flamerr magerr abmagerr stmagerr sky skyerr objcat id_cat ipix_cat weight objobs_complet accref obsname_id starno dateob hjd band tel_alt tel_az airmass pressur tmp orira oridec mag abmag stmag photrat photon flx fnu flam magerr abmagerr stmagerr photrateerr photonerr flxerr fnuerr flamerr sky skyerr objobs_lightcurv ssa_pubdid accref ssa_dstitl ssa_creatordid ssa_cdat ssa_pdat ssa_bandpass ssa_cvers ssa_targnam ssa_targclass ssa_redshift ssa_targetpo ssa_snr ssa_loc ssa_apertur ssa_dateob ssa_timeext ssa_specmid ssa_specext ssa_specstart ssa_specend ssa_length ssa_publish min_dat max_dat figur model pure sql solut sum postgresql databas store observ data nice support astronomi area multipl sphere index algorithm implement easili handl amount data main reason architectur gavo dach packag data ingest publish packag built postgresql databas will describ solut process work insid postgresql databas ppmxl catalog origin solut describ thesi creat identifi observ cross match deep catalog idea illustr imag review solut prove concept individu observ left cluster fig cross match catalog object observ match object catalog assign light curv will forgotten best produc help ppmxl catalog manag identifi cca observ error caus duplic entri catalog throw data unaccept drawback figur catalog cross match silver bullet queri creat catalog integr friend solut write simpl sql queri extract identifi data ingest relat postgr esql conveni creat identifi insid databas move big amount data extern applic creat silver bullet queri data observ tabl group criteria write catalog identifi objcat tabl assign point cat field observ tabl big queri queri base fact cluster cca arcsec diamet group data condit point group connect distanc smaller arcsec practic implement join iter point creat group point closer arcsec pure sql solut iter group point member group observ cluster point view choos best view mean see point largest group point closest center cluster creat averag coordin neighbor will lie precis center cluster approach solv corner case three point equilater triangl cluster algorithm implement sql run fast high precis pattern observ creat imag complex algorithm high depend number point cluster unlucki cluster point exact coordin coordin distanc complex number point cluster count comput memori complex fact data high densiti imag high densiti sens lot overlap imag cca point cluster averag cca exampl dataset cca point basic point repres ascens declin doubl precis cca intermedi algorithm work bigger data set major drawback silver bullet queri algorithm parallel smaller queri complex problem fatal memori parallel queri smaller chunk data will solv problem creat problem divid data chunk observ sort data slice chunk sequenti spatial local identifi good guarante close point sky will close high probabl slice cluster edg chunk guarante local will produc duplic cluster close problem reduc iter point chunk neighbor observ tabl accept duplic error continu test will encount final bottleneck solut smaller chunk memori will thread identifi point sky long integ review solut prove concept machin push postgresql limit actual implement sql function loop tabl manu alli planner confus will produc reason queri plan load process chunk observ tabl memori will lot random disk seek search close neighbor memori store intermedi queri realiz chang easili chang postgresql sourc code dis tribut postgresql databas disk node complic limit queri plan qualiti solv problem silver bullet queri summari silver bullet queri solut work well small data encount big problem scalabl solut limit disk capac store intermedi disk speed random seek parallel queri smaller part limit overcom search solut iter queri limit silver bullet queri problem sql high complex actual cluster algorithm creat stream algorithm process data linear complex will call approach iter queri idea naiv sort algorithm iter point databas process condit catalog identifi rang coordin cluster identifi add cluster updat cluster coordin weight averag mine coordin cluster approach solv corner case iter point order exampl pattern cluster direct mas diamet start point complet left creat cluster second point complet distanc creat catalog exact arcsec creat cluster iter rest point will assign left cluster cluster close case practic rare accept error rate implement bigger drawback sql languag built loop singl row data oper level point pure sql solut coupl random seek spheric databas index find point closer distanc limit averag coupl cycl fast close neighbor lookup relat databas take week process dataset high disk usag time load discov postgresql unstabl simpli meant usag iter queri summari argument benefici simpli accept instabl solut option matter ipix iter approach oper databas level fol low iter point iter measur defin cluster creat grid squar res olut cluster size iter grid point column sky index plugin call effici call strategi ipix iter fig sphere partit squar algorithm base quad tree cube partit sphere imag figur pixel assign point squar grid join point assign slice cluster lie border squar approach cost precis higher densiti area cluster distanc compar cluster size join cluster catalog identifi review solut prove concept big ipix iter method speed dataset cca observ run cca minut complex number squar sphere partit accuraci catalog object identifi identifi correct combin nice advantag fast algorithm high precis cca observ fall star field densiti cluster closer separ rest process slower algorithm problem will day process iter queri link silver bullet queri describ chapter help solv spars field easili problem dens biggest problem tell join interm diat correct hard cluster problem heurist separ erron time wors combin approach combin ipix iter sort cluster algorithm nice idea manag solv creat simpl fast metric select incorrect assign point incorrect identifi cluster array databas relat databas clear meant kind work argument transfer big amount data free bond standard databas exot array databas nice store data general talk column store standard row store data data logic store spars matric search close neighbor effect suit data well dimens ascens declin coordin benefit strength array databas effect dimens data add paramet cluster strength array databas spars matric easili slice partit multipl physic databas node biggest advantag solut high tune data memori disk problem disk random seek search closest neighbor array databas group data spatial assign concret partit cluster algorithm separ know point physic partit add small overlap region sky will sure cluster will split edg approach high support extens exampl monetdb write cluster algorithm extens databas core call direct sql leav parallelis manag databas scidb simpl program transfer data databas node process return databas care parallel databas node small geometr chunk sky will store process will famous array databas nowaday monetdb scidb will detail comparison databas sens benchmark detail analysi will compar point view usabl store publish cluster astronom data requir main point demand array databas summar ize instal debian server chang futur support system storag astronom data store astronom data well postgresql spatial index scheme publish astronom data decid migrat array data base possibl migrat data function migrat function complic integr array databas postgresql order data data decid migrat fulli implement protocol publish data top array databas current reli gavo dach packag implement major ivoa protocol work current postgresql transfer data model chang will difficult accommod process decid array databas partial bring troubl benefit decis review solut prove concept connect aspect termin analysi compar aspect need data migrat postgresql easi data migrat data center current run postgresql extens cluster write extens databas call program databas cluster data benefit fact databas handl parallel process data partit databas node fast neighbor lookup need cluster gorithm databas stand program kind data publish astronom queri will spatial base easi data partit simpl control partit data databas node distribut cluster algorithm effect ensur high spatial local data partit repres area sky cluster permit member store data partit physic databas node reli decid process data smaller chunk easier process separ communic monetdb detail analysi monetdb close monetdb written support linux system easi instal linux monetdb advanc develop biggest strength belong high perform vertic fragment auto matic adapt indic time queri optim worri exampl index data correct mon etdb will creat indic statist base queri will request data instal instal databas server easi linux base system instal relat databas distribut packag array databas storag astronom data monetdb base exot data storag store tabl vertic fragment store column tabl call binari asso ciation tabl bat tabl store key mechan key dens sort list key valu store memori map file ensur high perform data access time valu store case variabl width type separ refer offset real variabl length index case monetdb sort data sphere partit algorithm implement geometr queri postgresql test reliabl plugin user defin function monetdb lsst packag base htm spatial index pub lish astronom data incomplet document choos htm index data complex climb index resolut guarante pixel size project monetdb sdss survey skyserv implement spatial queri base zone algorithm describ articl method viat current solut integr cluster algorithm difficult publish astronom data real problem mention transform data difficult rewrit implement protocol respons publish data good altern gavo dach implement support databas layer packag direct simpli effort invest sake better cluster function current implement postgresql data migrat postgresql migrat data channel dump util databas dump tabl data data type monetdb postgresql match direct manual repair dump file monetdb data type open sourc tool automat bad experi thing chose safer approach review solut prove concept second approach base export simpl text csv file defin tabl monetdb manual ingest data csv approach safer complet control data type monetdb solv conflict hand separ data postgresql monetdb built tool export import csv file problem requir extens cluster construct name user defin function udf monetdb function written pure wrap monetdb inner assembl languag call mal write function direct mal advis easili debugg languag mal instruct link function map sql function call function direct sql front architectur complic allow call bat function direct code conveni pass point cluster function write direct tabl cluster cluster assign origin point function store monetdb sourc code bootstrap algorithm includ build monetdb distribut origin thought interest monetdb function actual integr databas lot cluster function modul nice cluster data databas direct exampl monetdb modul convent cluster algorithm fall time high complex qualiti merg cluster merg big data divid data smaller chunk comput parallel nice synergi databas partit parallel small part data ensur high bandwidth partit save separ hard disk fast neighbor lookup mention storag astronom data argument data store separ tabl column cluster coordin ascens declina tion neighbor lookup will fast explicit index array databas tabl store separ head sort actual valu data sort geometr lookup will fast ensur data local hard problem nowaday number sky sphere index algorithm easi data partit offici document monetdb word partit support mention possibl experi sdss skyserv paper monetdb cluster data iter queri approach mention sort data disk geometr local sky help find nearest neighbor decid healpix librari care nice futur pixel partit sphere equal size data will distribut uniform grid will talk separ chapter discov synergi monetdb pos sibl complic monetdb written entir bootstrap user defin function mention extens cluster point work pure function healpix librari api well pure key function need data partit thing neighbor pixel comput overlap chapter declar api function program extern build distribut applic separ monetdb code high cost pay collid point extens cluster conclus discuss individu point databas conclus strong point monetdb instal data migrat fast neighbor lookup storag astronom data fine implement plugin queri astronom data base plugin healpix data index distribut plugin monetdb written pure extens cluster requir monetdb open easili extens pure function extend code review solut prove concept monetdb matur fact inextens healpix info chapter lack horizont partit inappropri case scidb option consid scidb realiz fit analysi will thorough justifi decis scidb partial commerci project linear algebra mod ule good commerci version scientif open sourc version standard func tional will dismiss instal scidb nice instal autom script instal multipl databas node server easili scidb packag distribut sensit version instal packag requir redhat cento ubuntu releas system version case debian instal manual sourc consid extend sourc big obstacl storag astronom data scidb found lsst project origin flow time deviat origin purpos form stand partial commerci project lsst chose massiv distrib ute data center base mysql node exampl scidb geospati well astronom data internet logic storag data multi dimension array cell hold arbitrari number attribut attribut user defin type data transform will need complic monetdb will lot easier defin cell coordin attribut assign coordin hold array attribut direct publish astronom data real issu support ivoa protocol publish data problem manag chang data model better simpli afford invest time connect databas support gavo dach packag array databas data migrat postgresql decid csv export postgresql scidb support futur fulli dump file requir correct type monetdb data migrat previous chapter extens cluster scidb support multipl type extens user defin aggreg user defin array oper user defin function interest scalar function accept variabl number argument data type return data type defin type pass input data servat function well return origin point group cluster parallel insid func tion problem scidb current support user defin function perfect suit healpix librari fast neighbor lookup scidb storag model ensur neighbor lookup will fast long neighbor will physic close multidimension matrix talk cell matrix repres point coordin sky mention enabl fast lookup ensur data local sort data sphere index algorithm healpix need extens scidb allow easi data partit scidb transpar system logic chunk divid multi dimension array group easili partit separ media defin overlap implement cluster algorithm work node will requir data transfer node conclus strong point scidb data partit extens fast neighbor lookup point point accept controversi publish actual data store data postgresql scidb integr scidb implement ivoa protocol review solut prove concept array databas conclus idea move data center array databas work astronom data natur relat databas cost high discont nowaday function provid standard databas postgresql sky index plugin reason inappropri cluster algorithm origin thought migrat cluster gorithm array databas overkil compar stand program agre profit move function array databas solv problem apach spark thing consid apach spark languag effici parallel cluster comput term cluster server cluster dismiss languag linear algebra modul small support cluster algorithm fact algorithm lower level languag benchmark multipl cluster algorithm data applic resort oldest effici tool will implement cluster algorithm stand applica tion will transfer data postgresql fast csv export import stick idea data will transfer format chose explicitelli fast easi compar pure healpix librari support will bring chapter will chang origin databas model input will tabl observ repres ascens declin uniqu identifi track observ imag file identifi output will list catalog coordin light curv catalog list origin observ assign limit databas possibl implement cluster algorithm decid implement increment queri defin base benchmark manag load data set memori will problem iter point algorithm limit applic lot cluster librari integr test hope better divid work main problem cluster algorithm expecta tion maxim hierarch algorithm complex grow number cluster data algorithm long data tend join cluster averag number point cluster cca cluster dataset complex cluster algorithm process data reason result key divid data small chunk help complex improv actual cluster algorithm instanc cluster algorithm run data set cluster point good better sure chunk point cluster find slice cluster edg simpl solut fact data actual error observ coordin inaccuraci astrometri comput object defin chapter size cluster smaller inaccuraci techniqu data defin threshold greater maxium size cluster defin overlap edg chunk will wider threshold ensur percent assur slice cluster will realiz chapter detail chapter gpu comput possibl acceler comput process mov ing expens process gpus processor enhanc effici requir intens memori micro manag advantag gpus origin abil process high amount small task requir communica tion memori cluster algorithm deepli analyz bottleneck standard processor comput identifi address gpu comput implement exist applic transform small part program test effici exampl review solut prove concept nvidia cuda toolkit toolkit librari call simpl function solut implement gpu accel ation plan approach decreas number point parallel task parallel insid task effici better effect decreas complex assign point instanc parallel instanc bigger data set consid mention fact decid plement gpu optim applic chapter design aspect solut mention previous chapter care consid final design decis accept fulli implement solut will describ chapter will implement catalog generat stand applica tion applic will data postgresql produc will transfer databas approach chang under architectur data manipul mpi openmp dimension data high coordin photon flux magnitud dimens load data memori process possibl stream interm diat parallel task distribut disk problem sure task complet iter point data set process cost individu task will small term memori depend task size compar memori amount need construct task small benefit distribut work multipl node high task suppos small reason thread approach easier faster implement easi implement thread base produc consum applic openmp librari final decis parallel parallel task will process arbitrari number thread collect master thread written disk design design detail complet pipelin light curv generat fig main thesi cluster swim lane figur light curv generat workflow cluster algorithm analyz multipl cluster algorithm choos will applic possibl simpl expect maxim base techniqu gaussian mix ture agglom divis hierarch cluster cluster algorithm consid integr seamless integ ration larg varieti cluster algorithm implement usabl test small amount data complex grow quick possibl influenc behavior modul final reason favor librari integr modul usabl big amount data faster equal comput advantag debug chang repair librari decid implement iter queri algorithm defin chapter will benchmark cluster gorithm decid librari random function requir gorithm armadillo librari algorithm base mahalanobi distanc healpix consid sphere index librari will work spatial data librari complex build chunk parallel process reason pre implement optim comput angular distanc point sphere possibl htm index algorithm healpix quad tree cube algorithm will detail benchmark algorithm effect decis simpl chose healpix major reason htm higher complex higher resolut sphere tessel healpix constant complex dir ection will work general high resolut cluster algorithm pixel size area sphere quad tree cube will produc size individu pixel complic distribut data chunk uniform healpix distribut data uniform pixel equal size resolut popular implement aladin client easier test compar function requir summar analysi requir applic data input will process csv format input file will column identifi observ obsnameid starno composit primari key observ tabl export column will ascens declin imageid starno design data ouptut will csv format will place file will repres catalog column catalog ascens declin second will repres observ map catalog file column obsnameid starno identifi observ databas column defin ing catalog catalog imageid starno program will creat group observ process parallel complet separ degrad will accomplish healpix librari will support cluster strategi comparison will increment strategi describ variant kmlocal librari expect maximis strategi armadillo librari solut will integr current data center integ ration will implement script export import csv data postgresql databas applic model uml diagram applic fig will explain design typic applic main applic logic contain class clusteringcon troller entri point function pars command argument pass control call function cluster ingcontrol class hold instanc control csvoper chunkoper csvoper respons work input output csv file csvoper will pars input file vector coordin pass clusteringcontrol vector logic own chunkop ator work data obscoord vector applic model buildchunksfromcoordin method call chunkop ator result store map obsincel obsinoverlap map coordin assign healpix pixel select resolut overlap function describ chapter healpix pixel clusteringtask creat clus tere task strategi solv strategi hold list pointer coordin process clusteringcontrol ensur task process parallel number thread alloc program cluster task will store cluster map type map clusterid point list member clusterid instanc coordin struct repres cluster medoid individu collect result cluster algorithm sequenti parallel phase actual cluster finish iter task throw duplic neighbor task merg common result result ensur cluster will duplic member list cluster member set coordin configur applic will configur valu valu optim test rest configur configur will list bigpixelnsideexp task lappix lns ideexp overlap topt idnsideexp catalog genera rdup sarcsec distanc arcsec ementa tegi catalogindexnsideexp reso lut ion task lus terradiusarcsec distanc add int arcsec design kmeansezhybrid kmeansezhybrid kmeansezhybrid kmeanshybrid kmeanshybrid kmeanshybrid kmeanslloyd kmeanslloyd kmeanslloyd kmeansstrategi cluster kmeansstrategi kmeansstrategi kmeansswap kmeansswap kmeansswap clusteringstrategi cluster lusteringstrategi clusteringstrategi emstrategi cluster emstrategi emstrategi incrementalstrategi cluster incrementalstrategi incrementalstrategi chunkoper buildchunksfromcoordin getobservationcoordin getobservationsincel getobservationsinoverlap chunkoper chunkoper main clusteringcontrol lusteringcontrol clusteringcontrol clusteringtask cluster clusteringtask clusteringtask getobsincel getobsinoverlap getresult gettaskid vector typedef coords_list vector typedef coords_pointer_list map typedef coords_by_pix unordered_map typedef cluster_map unordered_map typedef cluster_distinct_map csvoper csvoper readcoordin writecatalog writerel struct coordin dec imageid starid coordin coordin coordin coordin gethealp ixpoint isa lmostsam oper oper result obsinoverlap obsincel obsincel clusteringtask obscoord strategi result figur applic uml class diagram time complex crucial applic phase complex scalabl build chunk phase complex touch observ cluster phase depend cluster algorithm simpl strategi strategi implement collect merg depend task size check neighbor task duplic cluster worst case merg scalabl scalabl solut chosen architectur memori solut base thread individu pro cess favor share memori architectur memori limit applic point lation linear billion point ram machin processor divis parallel task individu complex depend strategi solv task idea small better effici result qualiti cluster algorithm beneath chapter realis deduc appropri solut problem stand program will integr current data center will comment implement chapter point interest part solv problem mention solut will document integr current solut origin data ingest publish light curv implement chapter will interest part solut exampl code healpix usag healpix librari creat parallel task process individu communic key aspect defin task nside paramet healpix grid nside size healpix pixel number rang case conveni specifi pixel size cluster pixel defin overlap region parallel task equival area healpix pixel nside nside parallel task meaning overlap bigger task area simplic task size term will expon nside task size will task size will will talk task size will refer expon actual nside realis creat spatial chunk describ function buildchunksfrom coordin function mention interest part code function appendix transform coordin system healpix interest creat healpix base resolut task spatial partit big will area individu task second resolut overlap healpix nest set nside healpix nest set nside iter observ decid cell lie rva check point belong overlap base finer grid neighbor cell base rougher grid big cell task neighbor healpix geometri check surround touch ghbor ing rva ighbor ighbor ighbor iter neighbor nbidx lore big pixel small pixel overlap current idx lore add current point neighbor big overlap region ighbor touch neighbour obsinoverlap empti obsinoverlap obscoord obsinoverlap push obscoord algorithm distribut kind spheric coordin chunk equal size equal area sphere overlap variabl size linear complex touch observ biggest obstacl parallel cluster data implement actual cluster task rememb solv parallel process task resolv openmp librari cluster loop omp set dynam enforc number thread provid will comput omp set dynam dynam team omp set num thread nothread pragma omp nothread cluster ingtask currtask currtask increment strategi wrote strategi benchmark strategi parti librari will document strategi basic written increment queri chapter iter observ cell iter overlap final remov cluster decid incomplet slice edg overlap region remov incomplet cluster strategi void incrementa lst rategi luster map taskresu proce sobs rvat ion obsincel skresu proce sobs rvat ion obsinoverlap skresu removeincompleteclust skresu code process individu observ simpl observ check catalog close updat add catalog findandupdateneighbor function updat catalog creat identifi coordin current observ set imageid starid observ origin databas catalogindex index process observ task memori faster neighbor lookup void incrementa lst rategi roce sobs rvat ion obsli luster map taskresu obslist obslist softwar design pattern solv task way realis coordin currob indexid indexbas currob gethealpixpoint bool catalogupd catalogupd findandupdateneighbor indexid currob skresu catalogupd coordin coordin currob currob dec skresu push currob cata log indexid push findandupdateneighbor method close point catalogin dex search point neighbor pixel iter coordin comput distanc distanc smaller configur cluster return fals cluster base bool incrementa lst rategi findandupdateneighbor indexid coordin currob luster map taskresu lustersclosetom getc losepo int clustersclosetom indexid clustersclosetom clustersclosetom coordin currneighborclusterid doubl anc healpixhelp computedist currob currneighborclusterid anc config rrad updateneighbor ingclust currneighborclusterid currob skresu turn true turn strategi algorithm librari kmlocal librari metric optim euclidean distanc coordin centroid call distort averag distort better compat elbow method minim function minim number cluster algorithm enhanc simmul anneal random bring better implement paramet great reduc risk stuck local minimum algorithm paramet number cluster number estim elbow method standard method choos base iter algorithm paramet choos best ratio minim well averag distort data form cluster size simpl identif elbow graph averag distort ratio averag distort previous current figur elbow method paramet meanslocalstrategi maxclust maximum number task number minconsecrdl min consec rdl minaccumrdl min accum rdl maxrunstag max stage tprobaccept accept temprunlengt temp length tempreducfact temp reduct ion elbowfact elbow method acept number maxclust task size smaller number elbow method realis will choos comput bigger task size thousand cluster algorithm will slower will complex individu task depend actual best cluster elbow method maxclust paramet number stage iter cluster algorithm repres total number random start algorithm best result choos small qualiti will drop choos high cluster will slow complex task number run stage actual complex individu elbowfact coeffici actual test number cluster averag distort satisfi accept solut best algorithm termin paramet specif kind gorithm will discuss result chapter collect task complet collect individu task merg common result overlap cluster produc individu task will incomplet threw will duplic identif cluster spatial neighbor task base cluster techniqu cluster will exact will close compar cluster center base float point coordin reli exact equal defin threshold distanc will declar cluster duplic merg accuraci astrometri improv cluster algorithm insid individu task exampl divid cluster dens area mul tipl smaller center close typic mas merg techniqu will serv purpos remov duplicit collect edg individu task merg duplicit cluster insid task problem will elbowfactor tune task size lower task size bigger amount observ converg slowli big algorithm will long implement clusterid find cluster center closer threshold case cca choos closest merg coordin cluster comput weight coordin merg cluster base number member cluster merg actual point set contain cluster member addit inevit memori overhead memori topic chapter techniqu merg describ simpl step stream algorithm will ensur corner case under cluster will solv point enter phase accur under cluster algorithm case will extrem rare memori optim critic memori consumpt point program distribut data individu task major data spatial local sort dataset sure task complet point need process task communic observ repres doubl coordin integ databas memori dataset stand pretti usabl share memori base architectur reduc memori kind stream process postpon optim version start build pointer coordin repres process task cluster group collect process memori consum ensur cluster duplic ensur set contain base tree structur effect memori pointer simpl vector simpl memori usag memori consumpt small data set observ optim fig optim fig graph valgrind tool massif display massif visual effici save shrink data vector capac coordin load discard coordin pointer task process enhanc integ indic data vector direct pointer content pointer array integ size observ micro optim will implement need current solut realis program fast grow memori consum set store cluster cluster need ensur will duplic entri cluster merg program result map origin data structur memori memori save figur basic memori consumpt integr integr postgresql data simpl base csv export requir actual cluster csv import cluster tabl export import chapter result work publish mechan implement thesi light curv fig display splat bright star magnitud period star observ julian julian integr figur memori save appli figur light curv display splat chapter will measur perform qualiti formanc test machin core ram qualiti test will comparison catalog well analys among decid comparison data logarithm scale test data set compos observ metric qualiti will fit chosen cluster center cluster center assign correct express way decid nativ algorithm distanc point cluster center metric linear depend distort algorithm time complex will discuss time complex algorithm key para meter complex depend strategi data size parallel task size number thread paramet specif strategi strategi measur will increment describ tion hybrid version qualiti fig data size will mention observ parallel task size explain start simpl increment cluster strategi increment strategi increment cluster strategi describ chapter will analyz time usag simpl algorithm data size task size base data size fig total time cluster algorithm observ lower task size greater number observ task time behavior explain fig figur total time base data size program phase base task size fig run time part algorithm observ base task size algorithm part time increas number point task decreas task size paramet will time collect merg individu task cluster phase thread base data size fig run time number thread observ algorithm time complex figur program part time linear increas number thread will acceler cluster phase algorithm take averag cca time need read data csv run thread relat compar fig figur thread time base data size thread base task size fig run time number thread incr mental cluster strategi observ base parallel task size number thread accel erat comput parallel phase cluster simpl short smaller task size bigger amount object task algorithm run longer figur thread time base task size parallel effici fig real time cluster phase algorithm row parallel effici benefit parallel worth cluster phase take cca comput time complex linear number point figur parallel effici cluster time linear algorithm qualiti hybrid strategi higher complex will measur hybrid algorithm object number consider high complex strategi cluster relat time graph comparison cluster phase time total time increment algorithm low ratio parallelis poor algorithm percentag high parallelis work excel comparison fig figur cluster phase time compar total run time parallel effici smaller data set observ run algorithm time fig parallel effici graph fig parallel worth parallel effect close run time minut parallel acceler close linear will better bigger data set qualiti chapter will discuss cluster algorithm test will discuss qualiti individu well error rate comparison catalog figur real time hybrid algorithm figur parallel effici algorithm result analysi latest version aladin function display healpix grid statist analysi histogram topcat healpix partit fig big pixel individu parallel task mark red arrow individu observ mark red circl cluster center current task yellow squar smaller quadrilater yellow border overlap region red mark task clear bigger cluster size qualiti figur aladin view healpix grid fig big pixel task border mark red dot small quadrilater overlap small pixel red form overlap region big pixel situat bottom imag green mark observ form cluster overlap region discard interact cluster big pixel point need task detail view fig expect maximis expect maxim poor data imag fig initi center fig converg center iter matter figur cluster overlap region paramet result merg data big cluster differ speed converg local minimum reason inappropriaci expect maxim gorithm data misinterpret argument actual implement parti librari overcom algorithm discard inappropri cluster data qualiti figur initi center chosen random figur converg type algorithm display fig show flaw exampl misinterpret cluster legend arrow point cluster center version produc cluster data display red dot figur variant comparison elbow factor fig elbow factor high willing algorithm accept higher number center low end separ data correct merg radius high fig defin cluster join radius high will join multipl cluster duplic merg radius low hand fig duplic join radius low mas will duplic edg task remain will mark duplic result cluster center closer arcsec observ split duplic cluster qualiti figur elbow factor high figur cluster join radius high catalog comparison will cross match creat catalog point creat averag distanc cluster center figur cluster join radius low member graph fig pattern chi squar distribut fact comput distanc dimens term simplifi greater lost power subtract point histogram accuraci under astrometri process state arcsec catalog identifi precis origin astrometri averag coordin cluster effect reduc error fact histogram high qualiti catalog identifi cluster center precis distanc shift higher number remain astrometri accuraci fig increment algorithm row cross match catalog histo gram distanc catalog identifi catalog red big pixel parallel task size blue finer task size work parallel cost qualiti case increment algorithm algorithm differ algorithm wors fig result summari catalog generat observ compar blue histogram distanc center sdss catalog object red distanc increment strategi center sdss catalog object figur catalog cross match increment strategi figur catalog cross match increment strategi result summari result qualiti strategi explain high depend actual data fed program test data increment strategi accur spars data algorithm will produc better parallel acceler solut will kick method provid high qualiti work exact expect design phase project conclus goal thesi met final manag creat fulli oper solut small time creat catalog light curv observ approach chose natur data hard succeed approach reus sky survey light curv mine data cluster algorithm linear plexiti promis sofist algorithm run polynomi time process data size complex algorithm divid work effici comparison strategi state linear complex cluster algorithm compar complex algorithm huge benefit thesi effect creat pattern cluster process spheric data effici high complex algorithm slice data space chunk process separ degrad result qualiti bibliographi hroch dvorn employ technolog virtual observatori fundament framework ccd pho tometri survey astronom data analysi softwar system xxiii astronom societi pacif confer seri volum edit manset forshay danish metr telescop april cite avail http public tele instr lasilla ros high precis differenti astrometri april cite http event oral wednesday ros mgr filip hroch munipack april cite http zacharia finch girard fourth naval observatori ccd astrograph catalog astronom ical journal volum http ivoa interoper workshop spring april cite http confer detail ivoa interoper workshop spring html dvorn southern sky ccd photometri survey cata log server thesi czech technic univers pragu cite https brows bach doug todi markus dolenski ivoa recommend simpl spectral bibliographi access protocol version http gavo softwar distribut april cite avail http roeser demleitn schilbach ppmxl catalog posi tion proper motion icr combin usno micron sky survey astronom journal volum http koposov bartunov quad tree cube sky index concept huge astronom catalogu realiz main astronom queri cone search xmatch open sourc data base postgresql astronom data analysi softwar system astronom societi pacif confer seri volum edit gabriel arviset ponz enriqu juli monetdb april cite https scidb april cite http intern virtual observatori allianc april cite http lsst project april cite http lsst szalay gray feket index sphere hierarch triangular mesh technic report msr microsoft septemb http app pub ivanova nes goncalv monetdb sql meet skyserv challeng scientif databas proceed intern confer scientif statist databas manag ssdbm washington usa ieee comput cieti isbn doi ssdbm http ssdbm gray szalay thakar neigh borhood relat algebra spatial data search corr volum http journal corr html bibliographi monetdb integr april cite https watch rski hivon banday healpix framework high resolut discret fast analysi data distribut sphere volum apr doi astro apach spark april cite https nvidia cuda toolkit april cite http object cuda openmp april cite http project statist comput april cite http eddelbuettel francoi rcpp seamless integr journal statist softwar volum issn http kanungo mount netanyahu effici cluster algorithm analysi implement pattern analysi machin intellig ieee transact volum sanderson armadillo open sourc linear algebra lib rari fast prototyp comput intens experi nicta australia oct bonnarel ferniqu bienaym aladin interact ive sky atlas refer tool identif astronom sourc volum apr doi massif heap profil tool valgrind april cite http doc manual massif visual april cite https project extragear sdk massif visual starlink splat april cite http star pdraper splat splat bibliographi taylor topcat stil starlink tabl votabl process soft ware astronom data analysi softwar system xiv astro nomic societi pacif confer seri volum edit shopbel britton ebert dec appendixa acronym bat binari associ tabl dach data center helper suit expect maxim gavo german astrophys virtual observatori gpu graphic process unit healpix hierarch equal area isolatitud pixel sphere htm hierarch triangular mesh ivoa intern virtual observatori allianc lsst larg synopt survey telescop mpi messag pass interfac osp southern sky photometri survey quad tree cube smc small magellan cloud sql procedur languag structur queri languag ppmxl catalog posit proper motion icr fourth naval observatori ccd astrograph catalog udf user defin function virtual observatori appendixb content enclos file content descript src directori sourc code src implement sourc thesi directori latex sourc code thesi text thesi text directori thesi text pdf format appendixc sourc code buildchunksfromcoordin chunkoper buildchunksfromcoordin gor thm vec work conver ion vector point ing rva obscoord rva push ing rva theta obscoord dec radian func rva phi obscoord radian func noobservat ion obscoord healpix nest set nside healpix nest set nside noobservat ion job rva inc push obscoord obsinoverlap obsinoverlap obsinoverlap vector coordin check surround touch ighbour ing rva ighbor ighbor ighbor sourc code ighbor ighbor touch neighbour obsinoverlap empti obsinoverlap obscoord obsinoverlap push obscoord turn 