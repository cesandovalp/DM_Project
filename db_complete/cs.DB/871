aggreg estim locat base servic weimo liu farhadur rahman saravanan thirumuruganathan nan zhang gautam das georg washington univers univers texa arlington abstract locat base servic lbs popular cent year rang map servic googl map store geograph locat point interest onlin cial network wechat sina weibo foursquar lever age user geograph locat enabl recommend function public queri interfac servic abstract model knn interfac databas mension point plane arbitrari queri point system return point databas nearest queri point paper consid problem obtain approxim estim sum count aggreg queri databas restrict public interfac distinguish interfac return locat return tupl googl map interfac return locat sina weibo type terfac develop aggreg estim algorithm base novel techniqu precis comput timat voronoi cell tupl discuss comprehens set real experi test algorithm includ experi googl map wechat sina weibo introduct lbs knn interfac locat base servic lbs popular cent year rang map servic googl map store geograph locat point interest poi social network wechat sina weibo foursquar leverag user geograph locat enabl recommenda tion function under data model servic view databas tupl poi case map servic user case social network geograph coordin latitud longitud plane third parti applic user complet direct access entir databas databas essenti hidden access typic limit restrict public web queri interfac api work licens creativ common attribut noncommerci noderiv unport licens view copi cens visit http licens mission prior cover licens contact copyright holder email info articl volum invit intern confer larg data base august septemb kohala coast hawaii proceed vldb endow copyright vldb endow arbitrari locat queri return nearest tupl queri point typic small number exampl googl map arbitrari locat ten nearest starbuck queri interfac servic abstract model nearest neighbor knn interfac databas dimension point plane arbitrari queri point system return point databas nearest queri point addit differ servic base type return tupl servic googl map return locat coordin return tupl refer servic locat return lbs lbs servic wechat sina weibo return rank list nearest tupl suppress locat tupl return tupl attribut tupl refer servic locat return lbs lnr lbs type servic impos addit queri limit user limit number queri issu time frame default googl map api impos queri rate limit user day aggreg estim interest third parti applic collect aggreg statist tupl contain den databas sum count distribut tupl satisfi select condit exampl hotel rec ommend applic averag review score marriott hilton hotel googl map cafe chain startup number starbuck restaur geograph region demograph research gender ratio user social network china cours aggreg tere data share agreement locat base servic provid approach extrem expens imposs data owner unwil share data paper consid problem ing approxim estim aggreg queri databas restrict public interfac goal minim queri cost queri effort rate limit impos interfac aggreg estim accur closest prior work approach base gen erat random point queri estim area voronoi cell return top tupl queri estim aggreg top tupl make correct sampl bias area voronoi cell limit work approach work lbs work lnr lbs inappli cabl larg varieti locat base servic wechat sina weibo return precis locat distanc format second approxim natur techniqu estim area voronoi cell aggr gate estim inher bias third method top return tupl queri calcul remain ing tupl ignor lead ineffici estim procedur discuss work outlin technic lbs interfac describ lbs interfac approach base generat random point queri comput area voronoi cell return tupl key differenti proach effici precis comput area voronoi cell procedur fundament approxim procedur estim area voronoi cell contribut paper lead unbias estim sum count aggreg lbs interfac contrast estim inher unknown sampl bias leverag top return tupl queri top general concept top voronoi cell lead effici aggreg esti mation algorithm develop techniqu reduc estim error estim error lbs interfac faster initi leverag histori vari anc reduct dynam select queri mont carlo method leverag current knowledg lower bound voronoi cell sacrif biased estim combin idea produc algorithm lbs agg complet unbias estim count sum queri select condit note avg queri comput sum count lnr lbs interfac consid problem aggreg estim lnr lbs interfac best knowledg novel problem prior work recal type knn interfac return rank list top tupl respons point queri locat tupl suppress prior work lbs interfac extend lnr lbs interfac terfac develop aggreg estim algorithm complet bias free guarante arbitrarili small sam pling bias key idea infer voronoi cell arbitrari precis level small number queri rank return tupl note infer posit tupl lnr lbs level arbitrari precis problem independ interest critic enabl estim aggreg featur select condit tupl locat count social network user meter major highway studi subtl extens case studi challeng brought case concav natur top voronoi cell develop effici algorithm detect potenti concav guarante accuraci infer voronoi cell combin idea produc algorithm lnr lbs agg estim count sum queri select condit algorithm lbs agg esti mator bias bias control arbitrari desir precis note avg queri comput sum count summari contribut locat base servic popular year aggreg estim hidden databas restrict knn queri interfac problem numer applic work con sider lbs locat return well novel lnr lbs locat return interfac lbs interfac develop algorithm lbs agg estim count sum aggreg select condit repres improv prior work multipl dimens novel precis calcul voronoi cell lead complet unbi ase estim top return tupl leverag top innov techniqu develop reduc error increas effici lnr lbs interfac develop algorithm lnr lbs agg estim count sum aggreg select novel problem prior work estim aggreg bias free sampl bias control desir precis key idea voronoi cell infer arbitrari degre precis rank return tupl point queri contribut includ comprehens set real experi conduct onlin test number real lbs googl map lbs estim number starbuck compar ground truth publish star buck wechat sina weibo estim percent age male femal user china background model lbs locat base servic lbs support knn queri databas tupl locat tupl point interest googl map user wechat sina weibo knn queri take input locat lon gitud latitud combin return top nearest tupl select rank pre determin rank func tion input queri locat denot locat introduc ambigu popular lbs follow knn queri model part paper consid rank function euclidean distanc queri locat locat extens rank function discuss note tupl lbs system locat format attribut poi googl map includ attribut poi averag review rate depend attribut tupl return knn interfac locat tupl return classifi lbs main categori lbs locat return lbs lbs return precis locat top return tupl attribut googl map bing map yahoo map promin exampl lbs display precis locat return poi note lbs return variant precis locat skout momo return precis locat tupl precis distanc queri locat tupl locat consid lbs lbs categori studi techniqu trilater infer precis locat tupl queri lnr lbs locat return lbs lnr lbs hand return tupl locat attribut review rate return categori preval locat base social network presum potenti privaci concern precis user locat exampl includ wechat return attribut gender top user precis locat distanc exampl includ sina weibo wechat featur queri return semant common interfac featur limit general speak ing way lbs lnr lbs support knn queri interact web api interfac allow locat explicit lat itud longitud pair googl map exampl common lbs mobil app direct retriev queri locat posit servic gps wifi cell tower automat issu knn queri accord ing second case explicit mechan enter locat note case abil issu queri bitrari locat physic travel locat mobil debug featur allow arbitrari locat output posit gps servic lbs impos interfac restrict aforement top restrict nearest tupl return common queri rate limit lbs limit maximum number knn queri issu unit time exampl default googl map allow locat queri day sina weibo allow queri hour constraint purpos queri issu process bottleneck aggreg esti mation understand note generous limit provid googl map issu queri minut second queri order magnitud higher offlin process overhead requir aggreg estim algorithm interfac limit sential queri cost perform metric opti mize aggreg estim lbs impos subtl constraint maximum coverag limit forbid tupl mile queri locat return discuss constraint voronoi cell voronoi cell key geometri concept extens algorithm develop paper introduc concept preliminari consid tupl point euclidean plane bound box cover tupl definit definit voronoi cell tupl voronoi cell denot set point bound plane closer tupl note bound ensur voronoi cell finit region voronoi cell tupl mutual exclus voronoi diagram subdivis plane gion correspond queri locat return tupl nearest cours shorten multipl address api account parallel process speed offlin process well assum general posit tupl exact locat point circl purpos paper defin extens voronoi cell concept accommod top queri return semant tupl defin top voronoi cell denot set queri cation plane return top observ concept top voronoi cell tupl longer mutual exclus locat belong exact top voronoi cell correspond top tupl return queri second concept top voronoi cell fundamen talli order voronoi cell geometri form point exact closest tupl differ illustr figur color region order voronoi cell top voronoi cell cover multipl region color exampl top voronoi cell tupl mark red border consist order voronoi cell figur concav top voronoi diagram third top voronoi cell order voronoi cell guarante convex hold top voronoi cell exampl figur aforement top voronoi cell tupl concav fourth top voronoi cell tend edg top voronoi cell discuss paper larger number edg potenti concav comput top voronoi cell tupl difficult problem definit paper address problem aggreg estim lbs consid aggreg queri form select aggr cond aggr gregat function sum count avg eval uat attribut cond select condit exampl includ count user wechat avg rate restaur texa googl map note select condit cond support select condit ind pendent evalu singl tupl termin tupl satisfi cond base second lnr lbs support specif locat cond locat return lnr lbs discuss lnr lbs deriv locat tupl arbitrari precis issu small number queri support aggreg percentag femal wechat user washington technic section focus aggreg select condit straightforward extens var ious type select condit will discuss perform measur perform aggreg esti mation algorithm measur term effici accuraci queri rate limit enforc lbs effici measur queri cost number queri api figur illustr theorem step step step figur illustr lbs agg figur faster initi success call algorithm issu lbs fix budget base rate limit design effici algorithm generat accur estim budgetari constraint crucial accuraci estim aggr gate measur standard measur relat error note sampl base approach relat error determin factor bias varianc squar error mse estim comput mse varianc interest question aris practic determin relat error achiev estim pop ulat varianc appli standard statist techniqu comput confid interv aggreg estima tion absenc knowledg common practic approxim popul varianc sampl varianc comput sampl generat final timat correct correct result lbs agg develop lbs agg algorithm generat unbias sum count estim lbs queri interfac start introduc key idea precis comput top voronoi cell tupl enabl unbias aggreg estim idea guarante unbiased requir larg number queri random estim lead larg estim varianc error queri budget limit develop techniqu reduc estim ror maintain complet unbiased aggreg timat final combin idea produc algorithm lbs agg key idea precis comput voronoi cell reduct comput voronoi cell start describ baselin design illustr problem aggreg estim knn interfac ultim boil comput volum voronoi cell correspond tupl exampl consid estim count region lbs top interfac start choos locat uniform random region issu queri tupl return suppos comput voronoi cell defin key observ sampl proba biliti probabl describ random process return exact volum entir region note knowledg direct lead complet unbias timat count exp exp expect estim random estim process total num ber tupl databas sum count aggreg support estim bias chang requir numer estim count case evalu aggreg estim sum attribut numer aggreg count select condit numer satisfi condit discus sion essenti problem enabl unbias sum count estim reduc precis comput volum voronoi cell tupl comput voronoi cell comput voronoi cell tupl nice featur lbs interfac turn precis locat return tupl clear collect tupl voronoi cell adjac precis comput voronoi cell base locat tupl key challeng collect tupl collect tupl adjac voronoi cell challeng address theorem form foundat design algorithm lbs agg theorem tupl subset tupl voronoi cell defin repres entir dataset denot vertic tupl return nearest neighbor queri issu belong proof note locat tupl closer tupl closer second vertex fall exist tupl closer tupl exampl figur illustr theorem order comput voronoi cell tupl correspond red dot suffic locat adjac tupl voronoi edg perpendicular bisector adjac tupl entir voronoi cell comput convex shape induc intersect edg theorem answer challeng outlin tell collect adjac tupl vertic voronoi cell comput collect tupl return col lect tupl tell collect adjac tupl collect vertex fail test natur return tupl collect collect start round test theorem simpl algorithm construct exact voronoi cell start voronoi cell entir region extrem larg rectangl issu queri correspond vertic queri return point append tod recomput voronoi cell repeat process queri correspond vertic voronoi cell return point real voronoi cell queri complex algorithm number point databas queri issu confirm vertex final voronoi cell vertic return point easi bound tight construct voronoi cell edg requir top queri discov queri return tupl exampl center circl point locat algorithm pseudocod baselin approach improv algorithm lnr lbs agg baselin queri budget exhaust locat chosen uniform random queri repeat till chang iter vertex queri updat produc aggreg estim sampl exampl figur simpl gorithm dataset tupl suppos comput initi set entir bound box issu queri return tupl voronoi edg perpendicular bisector voronoi cell step highlight light grey step issu queri return updat step issu queri return voronoi edg perpendicular bisector depict dark medium gray step issu queri return final voronoi edg depict dark grey queri vertic result tupl conclud invoc algorithm extens interest chang requir algorithm consid top voronoi cell tradit top voronoi cell understand note theorem direct extend top voronoi cell top voronoi comput complet cover vertex top voronoi side return tupl describ leverag section error reduct describ error reduct techniqu velop aggreg estim lbs note term error reduct titl subsect techniqu describ focus make comput voronoi cell effici reason call error reduct inher relationship effici estim error voronoi cell comput effici sampl lead larger sampl size timat lower estim error invers proport squar root sampl size faster initi key observ design bottleneck initi process databas locat tupl larg bound box correspond area interest aggreg queri natur lead initi voronoi cell bound box queri corner bound box cours tentat voronoi cell will close real speed close binari search averag case queri cost log scale bound box size initi process cost bound box larg address problem develop faster initi tech niqu featur simpl idea start insert fake tupl form bound box size bound box conserv larg wrong set size will jeopard accuraci computa tion comput initi voronoi cell issu queri correspond vertic queri return real tupl cours exclud fake fromd bound voronoi cell case simpli continu comput save number initi queri outcom bound box set small real tupl bound real voronoi cell specif ical extrem case scenario vertic initi voronoi cell return case simpli revert origin design wast queri faster initi process guarante exact comput voronoi cell potenti save larg amount initi queri averag case scenario worst case wast queri gorithm pseudocod faster initi strategi algorithm fast init input output updat base queri vertic return return repeat till chang iter vertex queri updat return exampl figur scenario strategi success success base bound box fake tupl conserv larg small dataset tupl initi bound box correspond fake tupl figur initi bound box tight comput precis lower queri cost tupl visit tupl exampl algorithm hand bound box figur faster initi failur histor data tighter initi box figur leverag histori upper bound lower bound figur upper lower bound tight figur queri vertic bound box return revert origin bound box cover entir region leverag histori voronoi cell comput natur optim leverag glean comput voronoi cell tupl pute tighter initi voronoi cell recal algorithm pute voronoi cell tupl theorem start initi voronoi cell extrem larg bound box cover entir plane converg process comput voronoi cell algorithm retriev addit tupl issu queri vertex bound box notic lbs static tupl poi googl map locat queri order distanc remain static restart iter algorithm larg bound box comput voronoi cell tupl leverag histori start tighter initi bound box ver tice set tupl reus tupl round notic approach remain locat tupl top return lbs tupl lever age tupl initi voronoi cell granular substanti save queri cost algorithm pseudocod strategi pseudocod simpl perpendicular bisector half plane approach sophist approach gorithm comput bound box tupl tupl histor queri algorithm leverag histori input set tupl histor queri output bound box tupl updat perpendicular bisector return tightest bound box exampl comput exampl locat comput initi bound box red figur offlin issu queri varianc reduct larger system cours choos top voronoi cell top result return choos top voronoi cell long intuit appear return tupl definit better top theoret analysi suggest top top voronoi cell better depend exact aggreg estim distribut attribut aggreg better align size distribut top top voronoi cell simpli consid extrem case scenario aggreg estim avg salari salari user tupl exact proport size top voronoi cell case beat top voronoi cell produc varianc estim error aggreg better estim top voronoi cell size top cell uniform top cell vari extrem figur experi exampl real aggreg uniform distribut top cell volum exper iment justif simpli increas introduc undesir consequ recal larger complex top voronoi cell queri spend order pin exact volum voronoi cell key proper tradeoff benefit ceiv smaller varianc sampl cost incur larger queri cost sampl main idea combin method leverag histori upper lower bound approxim return tupl perform process consid return result decid version voronoi cell definit answer determin comput upper bound volum top voronoi cell comput histor retriev tupl choos largest satisfi pre determin threshold intuit mean elabor chosen satisfi threshold comput top voronoi cell final estim return sum count queri volum top voronoi cell explain intuit approach specif ical threshold note top top voronoi cell larg increas reason observ describ justif varianc reduct note larg top voronoi cell translat larg select probabl small add varianc increas contribut varianc reduct creas varianc averag second admit upper bound estim larg top hvoronoi cell increas remain possibl larg over loos bound histori real volum voronoi cell note negat signal larg thorough explor neighborhood issu queri order reduc estim comput correct avoid larg order reduc queri cost explan heurist natur note set estim pro duce sum count aggreg unbias algorithm varianc reduct input output aggreg estim top tupl locat chosen uniform random tupl return queri max satisfi condit generat estim equat upper lower bound voronoi cell note entir process voronoi cell comput bar ring step faster initi idea discuss maintain tentat polygon cover entir real voronoi cell upper bound volum aris practic comput top voronoi cell tend edg bound poli gon close real voronoi cell volum fewer edg mean issu queri pin exact voronoi cell key idea develop avoid queri cost sacrif accuraci aggreg estim specifi calli consid simpl mont carlo approach choos uni form random point current bound polygon issu queri point queri return voronoi cell repeat pro cess interest number trial take reach point return unbias estim volum bound polygon real voronoi cell exp maintain unbiased estima tion issu queri requir pin exact voronoi cell close simpli call describ method likelihood requir queri produc bias sum count estim exampl simpli multipli number trial volum entir region consider produc bias estim count sum count aggr gate estim bias analog conclud idea optim lower bound top voronoi cell discuss lower bound reduc queri cost describ idea comput lower bound note knowledg region cover entir real top voronoi cell process random choos point belong longer queri belong produc unbias estim cost save produc knowledg lower bound understand construct lower bound region key understand anytim execut algo rithm test vertic confirm consid vertex circl center distanc radius note guarante observ tupl essenti lead lower bound estim point lower bound region circl center radius distanc entir cover union vertic confirm region save queri process exampl upper bound step exampl algorithm lbs agg baselin figur quadrilater red edg three lower vertic guarante criteria describ polygon induc lower bound estim algorithm lbs agg combin baselin idea precis comput voronoi cell techniqu error reduct design ficient algorithm lbs agg aggreg estim lbs algorithm pseudocod lbs agg algorithm lbs agg queri budget exhaust locat chosen uniform random tupl queri comput optim construct initi algorithm vertic repeat till updat voronoi bound tight vertex queri updat produc aggreg estim sampl lnr lbs agg voronoi cell comput key idea consid case rank order point return locat start case extend general case start defin primit oper binari search consid object find voronoi cell ple databas locat occupi tupl return consid half pass voronoi cell convex resid voronoi cell half intersect voronoi cell associ edg voronoi cell defin primit oper binari search binari search process find voronoi edg associ intersect refer appendix detail design process natur binari search process associ ror bound precis deriv edg exampl set upper bound maximum distanc point real voronoi edg segment closest point deriv edg refer maximum edg error object binari search oper number queri requir binari search proport log appendix exact queri cost definit discov voronoi cell precis level afford binari search oper queri complex ofo log number edg voronoi cell correspond process start queri point return construct point bound dimens longitud lat itud locat call binari search oper find correspond voronoi edg intercept half line matter discov edg form close initi test process describ vertic pass test voronoi cell vertex fail test perform binari search oper locat discov voronoi edg repeat vertic pass test time real voronoi cell subject error bound binari search process describ comput queri cost process key observ call binari search process initi step call caus vertex fail test increas number discov real edg voronoi cell number time call binari search process iso lead queri cost complex log estim error theorem theorem estim bias count nearest distanc tupl aforement maximum edg error estim bias aggreg deriv distribut attribut aggreg observ theorem smaller max imum edg error larg inter tupl distanc smaller bias will second bias arbitrarili small shrink lead log scale increas queri cost algorithm pseudocod lnr lbs agg util error reduct idea exampl consid dataset exampl lnr lbs locat tupl return figur algorithm voronoi edg identifi initi bound box entir region line start construct algorithm mid point small segment point side return tupl queri estim voronoi edg comput segment connect refer appendix detail extrem case edg polygon bound box algorithm lnr lbs agg queri budget exhaust locat chosen uniform random queri construct point bound binari search close polygon voronoi edg vertic repeat till updat vertex queri find voronoi edg updat produc aggreg estim sampl extens complic brought rank return semant extens case recal extend top voronoi cell concav case lbs case problem moment deriv top voronoi cell comput exact tupl locat observ tupl complet cover real top voronoi cell lnr lbs case longer case unveil top voronoi cell edg edg happen concav edg earli settl region real top voronoi cell figur demonstr exampl scenario fortun effici situat stand key observ concav vertex top voronoi cell posit equal distanc three tupl note hold outward vertic properti prove lemma lemma vertex top voronoi cell equal distanc tupl databas proof consid partit entir region base cell return combin top tupl top voronoi cell union adjac base cell addit general posit bar special posit bound edg vertex top voronoi cell form three edg base cell partit consid three edg form vertex denot note ward three edg insid top voronoi cell edg separ top voronoi cell locat side return top locat side pendicular bisector segment connect tupl databas tupl equal distanc properti extens straightfor ward letd set tupl observ appear top result queri answer note polygon output top voronoi cell region miss ver tex lemma vertex form perpendicular bisector tupl key observ miss ver tice entir form tupl ind reason simpl miss vertex satisfi properti correct top voronoi cell step step figur illustr algorithm lnr lbs agg figur handl concav top voronoi diagram super region correct top voronoi entir databas contradict previous conclus region task reduc find miss vertex note equival find perpendicular bisector tupl perpendicular sector identifi rest simpli intersect offlin tupl readi identifi perpendicular bisector pre vious call binari search process initi find perpendicular bisector note ind vertic polygon current return vertic polygon current return exist edg current polygon vertic return edg intercept perpendicular bisector simpli return binari search process edg find perpendicular bisector updat polygon repeat process iter enumer perpendicular bisector node time conclud miss vertex top voronoi cell queri complex process remain log binari search process call will return edg top voronoi cell tupl posit comput problem lnr lbs case compu tation posit return queri answer lbs case discuss intro duction problem independ interest call subroutin aggreg queri process select condit involv locat exampl interest number wechat user meter major highway drive estim aggreg comput locat tupl wechat user order determin satisfi select condit aggreg queri comput voronoi cell tupl comput figur demonstr tupl posit comput exact locat take addit call binari search process key idea comput demonstr figur figur depict vertex top voronoi cell vertex center figur origin point figur includ edg voronoi cell correspond perpendicular bisector note equal distanc attach third edg voronoi cell depict figur describ comput locat three step knowledg comput angl figur note indic long vertex voronoi cell locat deriv intersect line cours practic voronoi cell comput demonstr second step deriv take singl call binari search process understand angl deriv key observ figur line tupl form equal angl voronoi edg form equal angl angl equip observ obvious exact angl easili comput comput base knowledg explain comput three edg voronoi cell singl call binari search process note fact pute issu queri return top result queri return top intercept segment exact simpli call binari search process deriv enabl putat exact locat queri complex comput voronoi cell locat tupl remain log number edg voronoi cell discuss aggreg select condit previous discuss consid aggreg select condit tupl bound gion aggreg straightforward extens aggreg select condit scenario select condit pass lbs exampl goal count starbuck bound region select condit star buck pass lbs simpli append queri issu exact select condit gregat starbuck chang requir aggreg estim process scenario lbs support selec tion condit exampl count busi averag review score star bound ing region simpli pass select condit lbs support filter averag review score case simpli post process select condi tion exampl random choos queri return tupl determin tupl satisfi filter condit continu origin process return estim return aggreg queri appli return tupl divid sampl probabl estim result remain unbias estima tion aggreg select condit experi demonstr onlin test real lbs aggreg select condit cate gori count starbuck googl map pass count restaur open sunday leverag extern knowledg previous discuss focus process sult return random chosen queri comput top voronoi cell return tupl initi queri chosen remain simpl design choos locat uniform random bound region admit knowledg distribut tupl locat uniform distribut appear natur choic real applic priori knowledg ple distribut leverag optim sampl distribut queri exampl goal estim aggreg count point interest poi restaur reason assumpt densiti poi region posit correl popul densiti choic sampl locat uniform dom lead poi rural area return higher probabl voronoi cell tend larger sampl locat probabl proport popul densiti hope lead uniform select probabl poi clear second strategi better count estim uniform select prob abil distribut direct lead smaller estim varianc error exampl extrem case scenario poi select equal probabl count estim will precis error optim techniqu adopt case design initi sampl dis tribut queri popul densiti retriev extern sourc census data note optim matter extern knowledg accur count sum estim produc remain unbias obvious guarante unbiased matter sampl distribut second optim sam pling distribut depend tupl distribut aggreg queri exampl estim sum review count poi optim sampl dis tribut sampl tupl probabl proport review count design produc estim varianc error difficulti predict aggreg review count case ahead time leverag extern knowledg better consid heurist effect demonstr experiment prac tice guarante reduct estim error special lbs constraint consid special constraint enforc queri interfac real lbs max imum radius return distanc queri locat return tupl bound pre determin threshold dmax tupl databas fall circl center radius dmax queri return empti googl map weibo enforc constraint threshold interest chang requir algorithm lbs agg lnr lbs agg handl situat long queri result empti nearest neigh bor return enabl usag algorithm queri return empti simpli return count sum estim sampl queri unbiased unaffect note unbiased guarante matter sampl probabl tupl sum long tupl posit probabl return constraint remain prob abil return lead unbias sum count estim second constraint observ real lbs complex rank function involv distanc queri locat tupl factor static rank attribut tupl googl place api exampl allow rank promin take account distanc tupl constraint applic longer straightforward key challeng area return wiki place nearbi user googl place api support tradit distanc base rank abl direct usag algorithm tupl segreg disjoint region make extrem difficult comput sampl probabl tupl understand consid exampl tupl rank sum score distanc award higher score tupl closer tupl mile static score popular happen popular tupl bound region return queri place tupl mile middl desert nevada clear extrem difficult enumer disjoint region return tupl fortun lbs practic high lbs agg algorithm handl constraint algorithm work proper long nearest neigh bor includ top lbs turn tupl locat post process queri answer nearest neighbor distanc appli algorithm real lbs anticip probabl nearest neighbor includ top enabl lbs agg extens higher dimens lbs practic confin point theoret interest algorithm appli knn queri higher dimension data euclidean distanc rank function note lbs theorem hold matter dimens aliti tupl locat higher dimension voronoi cell comput subset tupl complet encompass real optim discuss appli well lnr lbs agg chang requir binari search process find perpendicular sect tupl case find perpendicular bisect dimension plane dimension case correspond vertex voronoi cell intercept dimension plane vertic voronoi cell deriv locat lnr lbs enabl usag lnr lbs agg experiment experiment setup hardwar platform experi perform quad core ghz intel machin run ubuntu ram algorithm implement python offlin real dataset verifi correct sult start test algorithm local openstreetmap real spatial databas consist poi includ restau rant school colleg bank public domain data sourc user creat data focus usa portion openstreetmap enrich sum count avg aggreg test grew tribut poi restaur school join ing openstreetmap extern data sourc googl map census applica ble restaur poi review rate googl map school poi enrol number census cen sus data option extern knowledg sourc provid popul densiti data optim techniqu discuss note complet access enrich dataset full control queri interfac implement knn interfac rank function euclidean distanc turn attribut attribut includ locat test lbs locat lnr lbs vari ing observ chang perform algorithm onlin lbs demonstr order showcas efficaci algorithm real applic conduct experi onlin popular real lbs googl map wechat sina weibo servic hundr million user offlin exper iment direct access ground truth aggreg lack partnership lbs attempt verifi accuraci aggreg estim format provid extern sourc news report detail onlin experi lbs googl map specif ical googl place api take input queri cation latitud longitud pair option filter condit keyword starbuck poi type restau rant return poi nearbi order distanc low high locat relev review rate return poi lnr lbs test wechat sina weibo spectiv android app direct fetch locat posit servic search nearbi user wechat turn sina weibo return nearest user googl map servic return exact locat nearbi user provid attribut gender implement issu wechat mobil app api support nearest neighbor search conduct experi run droid app support nearest neighbor search offi cial android emul debug featur locat spoof issu queri locat monkeyrunn android emul interact app send queri receiv extract queri answer android emul screenshot queri answer screen pars ocr engin tesseract algorithm evalu evalu three algorithm experi lbs agg lnr lbs agg exist solut lbs note exist solut lnr lbs refer lbs nno lbs nno number tune paramet pick paramet set optimiza tion provid best perform test variant algorithm lack varianc reduct tech niqu discuss weight sampl order demon strate effect techniqu perform measur discuss measur effi cienci queri cost number queri issu lbs estim accuraci measur experiment relat error data point averag run experi real dataset unbiased estim experi seek unbiased estim lbs agg lnr lbs agg incorpor error reduct strate gie lbs nno unbias tool help monkeyrunner_ tesseract ocr figur voronoi decomposit starbuck pensiv bias correct step figur trace three gorithm estim count restaur plot ting current estim period fix number queri issu lbs lbs nno high varianc take longer converg estim converg ground truth lbs nno indic error reduct techniqu suc cess reduc varianc estim queri cost versus relat error start test key tradeoff queri cost relat error three algo rithm aggreg figur queri count school count restaur sum school enrol avg restaur rate austin texa lbs agg algorithm perform previous lbs nno case gorithm lnr lbs case achiev better perform previous algorithm despit lack tupl locat queri queri cost versus lbs size figur impact lbs databas size term number poi user queri cost estim count school fix relat error vari databas size pick subset databas uniform random estim aggreg expect sampl base approach increas databas size major impact slight increas queri cost complex topolog voronoi cell queri cost versus figur number tupl return interfac queri cost measur queri cost requir achiev rel ativ error aggreg count school compar variant leverag varianc reduct strategi adapt decid subset tupl top fix variant top tupl pect adapt strategi lower queri cost consi tentli achiev save queri cost efficaci error reduct strategi start verifi effect weight sampl extern knowledg figur compar perform sampl strategi uniform weight estim count school weight sampl variant result save queri cost final set experi evalu efficaci error reduct strategi describ paper compar variant algorithm lbs rang tabl summari onlin experi lbs aggreg estim queri budget googl place count starbuck googl place count restaur austin open sunday wechat count wechat user china wechat gender ratio wechat user china weibo count weibo user china weibo gender ratio weibo user china ing error reduct strategi lbs agg sequen tialli order discuss paper culmin lbs agg incorpor fig ure experi expect strategi faster initi leverag histori caus reduct queri cost observ lnr lbs onlin demonstr googl place onlin demonstr lbs agg googl place api estim aggreg dif ferent select condit involv select condit pass lbs count starbuck second involv aggreg select condit pass discuss count restau rant austin texa open sunday tabl experi verifi accuraci estim aggreg count starbuck public releas starbuck corp tabl queri lbs agg achiev accur estim relat error count provid intuit illustr execut algo rithm continu estim count starbuck enumer starbuck figur demonstr voronoi diagram construct algorithm vast size voronoi cell span hun dred thousand rural area smaller urban citi justifi effect weight sampl wechat sina weibo estim aggreg total number user gender ratio lnr lbs wechat sina weibo tabl periment observ tabl estim converg narrow rang issu small number queri access ground truth time note interest observ percentag male user higher wechat sina weibo observ verifi survey china note count aggreg mea sure number user enabl locat featur wechat weibo number regist activ account local accuraci final set experi evalu effect tupl posit comput proach track real user sought identifi precis locat static object locat gion conduct experi googl place wechat china treat googl place lnr lbs ignor tim queri cost ground truth lbs nno lbs agg lnr lbs agg figur unbiased esti mator relat error lbs agg lbs agg lnr lbs agg lnr lbs agg figur impact sampl strategi relat error lbs nno lbs agg lnr lbs agg figur count school relat error lbs nno lbs agg lnr lbs agg figur count restaur relat error lbs nno lbs agg lnr lbs agg figur sum enrol school relat error lbs nno lbs agg lnr lbs agg figur avg rate austin restaur fraction poi lbs nno lbs agg lnr lbs agg figur vari databas size adapt lbs agg lnr lbs agg figur vari ing locat provid api sought identifi loca tion random chosen poi issu queri poi wechat posit user divers locat china typic urban place sought identifi locat precis locat poi user comput distanc actual estim posit figur result experi sult poi locat exact locat poi locat distanc locat obfusc strategi employ wechat achiev accuraci lower time locat user time theoret method precis identifi locat discrep real occur ternal factor obfusc coverag local limit relat error lbs agg lbs agg lbs agg lbs agg lbs agg figur queri save ror reduct strategi local accuraci googl place wechat figur local accuraci work analyt infer lbs locat base servic lbs map servic googl map locat base social net work foursquar wechat sina weibo popular year prior work analyt lbs focuss exclus lbs scenario closest prior work seek estim count sum aggreg lbs nearest neighbor oracl correct bias area voronoi cell approach expens aggreg estim lbs foursquar provid nearest neighbor oracl interfac propos random region sam pling method unknown estim bias elim inat techniqu work lnr lbs work infer locat privat user lbs propos trilat ation base method infer locat user lbs provid relat distanc tensiv work infer locat identif user applic lbs model studi paper aggreg estim hidden web repositori number prior work perform aggreg estima tion static hidden databas provid unbias esti mator count sum aggreg static databas form base interfac describ effici techniqu random sampl hidden web databas util perform aggreg estim work propos sophist sampl techniqu reduc varianc aggreg estim hidden databas keyword interfac prior work studi esti mate size search engin corpus final remark paper explor problem aggreg estim locat base servic increas popular troduc taxonomi lbs queri interfac base locat tupl return lbs lnr lbs propos effici algorithm vari ous error reduct strategi outperform prior work ini tiat studi propos effect algorithm gregat infer posit tupl arbitrari precis independ interest verifi effect ness algorithm comprehens set experi larg real geograph dataset onlin demonstr high profil real websit refer http data http phoenix zhtml irol financialhighlight googl place api https place document openstreetmap http sina weibo http wechat http wechat weibo statist http media shtml bar yossef gurevich random sampl search corpus journal acm broder estim corpus size queri cikm dalvi kumar machanavajjhala rastogi sampl hidden object nearest neighbor oracl sigkdd dasgupta das mannila random walk approach sampl hidden databas sigmod dasgupta unbias estim size aggreg hidden web databas sigmod dasgupta zhang das leverag count sampl hidden databas icd dasgupta zhang das turbo charg hidden databas sampler overflow queri skew reduct edbt berg van kreveld overmar schwarzkopf comput geometri springer montjoy uniqu crowd privaci bound human mobil scientif report freedman statist model theori practic cambridg univers press locat belong break mobil social network autom user locat track mobihoc steiner wang zhang bao dissect foursquar venu popular random region sampl conext workshop liu wang agraw stratifi sampl data mine deep web fcs liu aggreg estim dynam hidden web databas vldb liu rahman thirumuruganathan zhang das aggreg estim locat base servic arxiv preprint arxiv yau rao privaci vulner publish anonym mobil trace ton shokouhi captur collect size distribut cooper retriev sigir srivatsa hick deanonym mobil trace social network side channel ccs wang agraw effect effici sampl method deep web aggreg queri edbt wang effici sampl method character point interest map icd zang anonym locat data work larg scale measur studi mobicom zhang zhang das mine search corpus effici unbias sampl aggreg estim sigmod zhang zhang das mine search corpus queri pool cikm appendix binari search process design binari search half pass conduct binari search find intersect half bound box perform binari search find segment half length end distanc return return tupl step take log queri perimet bound box consid half line start form angl arcsin arcsin pre determin small threshold distanc perform binari search process find long segment return note process fail point return set rule address situat termin search reach segment shorter return return tupl second move step long satisfactori long segment produc segment termin entir process output estim voronoi edg perpendicular bisector suppos produc satisfactori segment long segment simpli return esti mate voronoi edg pass mid point midpoint queri cost binari search process log algorithm pseudocod binari search process algorithm binari search input tupl locat queri return output edg intersect half bound box find dist queri queri dist construct line angl arcsin segment dist queri queri exist return perpendicular bisector return segment pass midpoint error bound edg estim theo rem error bound binari search process theorem tupl queri locat return locat voronoi cell edg intercept half maximum edg error estim satisfi max sin arctan point exist point estim voronoi edg generat max sin arctan euclidean distanc point dition vertex segment intercept intercept point satisfi max sin arctan simpl observ theorem binari search process reach arbitrari precis level upper bound set tan arcsin satisfi bound tan arcsin bound side polynomi input taylor pansion correspond queri complex log lead corollari maximum error edg defin corollari queri cost requir achiev max imum edg error log log consid bound box size constant error bound voronoi cell volum estim direct corol lari theorem error bound estim volum voronoi cell note design lnr lbs agg estim voronoi cell subregion real combin theorem lead corol lari corollari tupl ratio ume estim voronoi cell real sat isfi nearest distanc tupl databas maximum edg error 