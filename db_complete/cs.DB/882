socio spatial group queri impromptu activ plan chih shen nian yang senior member ieee liang hao huang wang chien lee member ieee ming syan chen fellow ieee abstract develop integr social network servic smartphon easi individu organ impromptu social activ anytim main challeng aris organ impromptu activ requir make time invit potenti activ locat correspond locat relationship candid attende combin candid attende activ locat creat larg solut space paper propos multipl ralli point social spatial group queri mrgq select appropri activ locat group nearbi attende tight social relationship consid special case mrgq socio spatial group queri ssgq determin set social acquaint attende minim total spatial distanc specif activ locat prove ssgq hard formul integ linear program optim model ssgq develop effici algorithm call ssgs employ effect prune techniqu reduc run time determin optim solut propos heurist algorithm ssgq effici produc good solut consid general mrgq mrgq hard number attende practic small optim solut effici propos integ linear program optim model mrgq design effici algorithm call mag employ effect search space explor prune strategi reduc run time find optim solut propos optim effici index potenti activ locat user studi demonstr strength ssgs mag manual coordin term solut qualiti effici experiment real dataset algorithm process ssgq mrgq effici outperform baselin algorithm includ base commerci parallel optim ibm cplex term queri process group queri spatial index social network introduct success develop integr social net work servic smartphon driven emerg locat base social network lbsn ser vice servic includ applic foursquar meetup facebook googl allow user connect friend comment event place restaur theater store share happen cur rent locat avail user locat social allow mobil user instant organ impromptu social activ anytim lbsn applic impromptu activ plan servic account spatial social factor locat friend consid suitabl activ locat close particip arriv time manner invit friend acquaint ensur comiti major challeng promptu activ plan lie factor distanc invite current locat activ locat share social connect note close friend locat specif activ locat friend potenti activ locat enjoy shen chen center informa tion technolog innov academia sinica taipei taiwan mail chi hya mschen yang huang institut sci enc academia sinica taipei taiwan mail dnyang huang lee depart comput scienc engin pennsylvania state univers usa mail wlee social layer spatial layer fig find friend impromptu social activ tight social relationship number candid attende increas number tiviti locat grow select suitabl attende activ locat tedious time consum impromptu activ plan benefit sig nific effici queri process algorithm automat recommend attende activ locat motiv exampl interplay social relationship activ attende activ locat creat challeng organ impromptu social activ figur databas candid attende three potenti activ locat social relationship candi attende captur social graph social layer figur locat candid attende spatial layer desir group size social constraint attende unfamiliar tende approach select group correspond activ locat minim total spatial distanc issu nearest neighbor queri activ locat result activ locat case satisfi requir social constraint unacquaint group member focus social tight group activ locat attende familiar member group incur larg spatial distanc suitabl impromptu activ contrast activ locat suitabl solut attende unacquaint group member incur small total spatial distanc paper propos queri multipl ralli point social spatial group queri mrgq deter mine suitabl activ locat social acquaint group minim total spatial distanc tiviti locat mrgq seek set suitabl attende correspond activ locat consid social spatial factor impromptu activ plan mrgq benefici real social network applic facebook integr group buy websit groupon provid social awar locat base vertis will discuss issu assum servic provid access user under social relationship current locat social graph vertex associ locat mutual acquaint vertic connect edg set potenti activ locat plan number activ attende number unacquaint peopl attende maximum spatial distanc spatial radius chosen activ locat select attende mrgq aim find set attende social graph activ locat potenti activ locat list total distanc attende activ locat minim distanc attende activ locat bound notic mrgq includ social constraint ensur familiar attende attende unfamiliar peopl select group set coordin freeli adjust social atmospher activ accommod type social activ formal mrgq formul problem multipl ralli point social spatial group queri mrgq social graph locat number attende set potenti activ locat familiar constraint spatial radius object mrgq find minim unfamiliar straightforward approach process mrgq case user motiv correspond group activ buy three free coupon chain restaur difficult user exact valu promis user select rang paramet algorithm return multipl solut user choos desir spatial distanc number vertic share edg enumer group attende activ locat elimin satisfi constraint social familiar spatial radius approach return pair group activ locat incur minimum total spatial distanc straightforward approach enumer candid pair group locat entail enorm search space mrgq hard size small practic impromptu activ scenario problem solv effici care explor social spatial con straint mrgq develop process strategi optim solut effici systemat examin search space avoid examin combi nation candid attende activ locat increment select attende correspond activ locat prioriti attende close activ locat close friend obtain group satisfi trivial algorithm address simultan choos suitabl attende nearest activ locat achiev group small total spatial distanc result feasibl group satisfi familiar constraint altern address priorit search group attende well group minimum spatial distanc closest activ locat summari effici process mrgq requir care design algorithm select attende nearbi activ locat simultan satisfi familiar constraint effici process mrgq propos attende locat activ locat addit design effect strategi travers search space includ socio spatial order pair distanc dere well number search space prune rule includ inner triangl distanc prune outer triangl distanc prune activ locat distanc prune familiar prune reduc process time select attende activ locat address spatial distanc candid loca tion attende activ locat social connect attende care explor effect prune redund search space find optim solut effici contribut paper summar identifi organ impromptu social tiviti social network applic formul novel queri mrgq optim set invite suitabl activ locat mrgq uniqu specifi familiar constraint invite prove problem hard inapproxim factor consid special case mrgq ssgq consid singl activ locat prove ssgq hard propos ssgs strategi find optim solut effici addit propos heurist algorithm ssgq ssgmerg effect exploit struc ture intermedi solut good solut polynomi time propos integ linear program ilp optim model ssgq demonstr ssgs outperform ilp effici process mrgq propos locat candid attende activ locat propos effici algorithm mag enabl search space travers prune strategi find optim solut effi cientli propos integ linear program ilp optim model mrgq demonstr mag outperform ilp run mercial integ program optim parallel comput conduct user studi peopl demonstr propos algorithm outperform manual coordin term solu tion qualiti effici ssgq mrgq implement ssgq facebook evalu perform propos algo rithm conduct extens experi real dataset experiment manifest ssgs ssgmerg requir time ilp opti mizat model commerci parallel optim ibm cplex likewis mrgq mag outper form baselin algorithm term solut qualiti effici effici ilp optim model rest paper summar analyz mrgq prove hard introduc work studi special case mrgq ssgq detail propos algo rithm detail propos algorithm effici process mrgq user studi experi final conclud paper problem analysi applic mrgq includ paramet determin size answer group activ locat familiar constraint spatial radius queri impact process strategi size group increas solut space consist candid group grow rapid prove process mrgq hard problem challeng process effici size small practic case second candid attende locat close candid activ locat priorit process search criteria aim minim total spatial distanc select attende size increas search space grow third dictat tight social relationship member invit group smaller mrgq indic candid attende tighter social relationship prioriti final reflect avoid select candid unaccept select activ locat spatial familiar constraint employ prune unqualifi candid group analyz hard mrgq discuss concret applic scenario mrgq problem analysi prove mrgq hard inapproxim factor approxim algorithm exist mrgq theorem mrgq hard inapproxim factor proof prove mrgq hard reduc tion cliqu decis problem cliqu graph determin graph cliqu complet graph vertic edg connect vertic mrgq vertex prove condit cliqu exist group vertic cliqu person social relationship attende group total spatial distanc prove suffici condit mrgq group size problem cliqu solut size mrgq hard prove inapproxim mrgq gap introduc reduct cliqu problem graph decis problem cliqu determin graph cliqu size complet graph vertic edg connect vertic instanc cliqu problem graph construct instanc mrgq input graph mrgq construct complet graph vertic vertex connect vertex set spatial object spatial distanc vertex set contrast spatial distanc vertex set arbitrari larger mrgq cliqu exist feasibl solut mrgq total spatial distanc cliqu exist mrgq feasibl solut extract feasibl solut optim solut return mrgq includ vertex total spatial distanc mrgq approxim factor smaller approxim algorithm solv cliqu decis problem distinguish case mrgq set arbitrari larger mrgq approxim ratio theorem propos integ linear program ilp optim model mrgq commerci solver cplex optim solut defin number decis variabl ilp formul binari variabl denot vertex binari variabl piq denot activ locat chosen solut attende join integ variabl denot number attende acquaint variabl denot distanc activ locat select problem minim total spatial distanc select activ iti locat attende min simpl formula serv well object function linear hand formula min serv well object function unknown object function mrgq min object function correct find total spatial distanc select activ locat attende attende will assign constraint detail will object function attende ilp formul mrgq equip constraint piq piq constraint guarante exact vertic select solut set constraint state locat select activ constraint familiar condit particip constraint left hand side lhs constraint ident number attende know constraint enforc total number unfamiliar attende exceed constraint assign chosen attende activ locat piq case constraint object function minim function will assign optim solut hand attende activ locat constraint restrict will object function attende constraint ensur spatial distanc attende activ locat exceed spatial radius observ con straint constraint substitut join constraint constraint correct sum number unfamiliar attende consid person address issu proach replac constraint attende will consid constraint case linear set decid contrast propos constraint effect avoid issu con straint allow constraint sum person note allow assign larger lhs constraint constraint hold guarante assign lead solut contradict lhs smaller case familiar condit enforc design constraint constraint replac piq complex formul correl number integr decis variabl signif icant reduc relax integr constraint enforc negat integ case negat real number number integ variabl formul reduc formul case correct object function integ variabl addit solut integ number replac largest integ number exceed feasibl solut lhs constraint integ number applic scenario discuss reason mrgq benefici real social applic facebook groupon initi person includ solut group propos mrgq employ onlin social network applic facebook initi promptu activ event function allow user initi activ locat invite difficult initi select set invite tight social relationship real time multipl candid locat branch popular chain restaur difficult initi manual select suitabl locat correspond attende mrgq integr facebook initi set candid activ locat queri paramet identifi invite suitabl activ locat initi person includ solut group addit deal day servic groupon benefit mrgq current groupon recommend offer deal coupon user prefer purchas histori advantag deal custom organ number friend buy three inclin buy coupon identifi group pose difficulti address issu groupon exploit mrgq provid social awar locat base advertis exampl promot chain restaur groupon identifi group tight social relationship identifi branch suitabl group social recommend attach locat base advertis increas chanc custom purchas coupon case groupon initi includ solut group work lbsn applic meetup activ coordin time design period meet read club user group print paper emphas scenario impromptu social activ time effort organ activ minim manual identif candid attende common practic today tedious time consum argu paper mrgq scenario recommend group suitabl attende activ locat social spatial factor account research find group social connect mem ber team format communiti search social tempor group queri circl friend queri report literatur context object total goal explor spatial social dimens find group friend locat impromptu activ team format find group expert requir skill aim minim communic cost expert communiti search find compact communiti member aim minim tal degre communiti social tempor group queri check time attende find group suitabl activ time circl friend queri find group friend consid social spatial properti friend group specif activ locat activ locat queri queri suitabl impromptu activ plan relev work spatial queri select set spatial point aim minim total spatial distanc propos scenario work social connect spatial point consid set point number point select group nearest neighbor queri find set point total spatial distanc point point minim hand segment set point continu nearest neighbor search return nearest neighbor point segment continu visibl nearest neighbor queri continu obstruct nearest neighbor queri extend continu nearest neighbor search incorpor obstacl problem design affect visibl distanc point lead mention queri focus spatial mension applic scenario lbsn applic best knowledg author research find ing group consid constraint spatial social dimens start work examin inter play social spatial dimens object find group mutual familiar attende total spatial distanc activ locat minim envisag result employ lbsn applic group recommend socio spatial group queri ssgq challeng process mrgq lie interplay social spatial dimens larg solut space consid relax version mrgq singl activ locat socio spatial group queri ssgq formul ssgq propos integ linear program ilp optim model ssgq act baselin comparison propos algorithm ssgq propos algorithm call ssgs effici process ssgq propos heurist algorithm ssgq ssgmerg find good solut effici ssgq formal defin problem socio spatial group queri ssgq social graph locat ssgq number attende activ locat familiar constraint spatial radius object find set minim total spatial distanc unfarmiliar theorem ssgq hard proof prove ssgq hard duction cliqu decis problem cliqu graph find graph cliqu complet graph edg connect vertic vertic ssgq vertex prove condit cliqu exist group vertic cliqu person social relationship attende group total spatial distanc prove suffici condit ssgq group size problem cliqu solut size theorem integ linear program ming ilp optim model ssgq defin number decis variabl formul binari variabl denot vertex join integ variabl denot number attende acquaint problem minim total spatial distanc vertex min constraint guarante exact vertic select solut set constraint ensur spatial distanc select attende exceed spatial radius constraint familiar condit particip constraint left hand side lhs ident number attende know constraint enforc total number unfamiliar attende exceed observ con straint constraint substitut join constraint constraint correct sum number unfamiliar attende consid person address issu proach replac constraint attende will consid constraint case linear set decid contrast propos constraint effect avoid issu constraint allow averag number vertic share edg constraint sum person note allow assign larger lhs constraint constraint hold guarante assign lead solut contradict lhs smaller case familiar condit enforc design constraint complex formul correl number integr decis variabl signif icant reduc relax integr constraint enforc negat integ case negat real number number integ variabl formul reduc formul case correct object function integ variabl addit solut integ number replac largest integ number exceed feasibl solut lhs constraint integ number algorithm design ssgq despit consid singl activ locat process ing ssgq challeng account interplay social spatial factor necessit systemat approach group forma tion propos algorithm call ssgs effici process ssgq ssgs adopt branch bound group format process form feasibl group consist member satisfi queri constraint basic idea maintain intermedi group increment add candid member remain set candid base order strategi travers space group format candid attende set activ locat ssgs initi candid attende spatial radius subsequ iter ssgs move candid attende feasibl solut disqualifi process ssgs backtrack previous step choos candid attende feasibl ssgs save current best solut backtrack previous step continu find better group process slow key issu devis travers order strategi find feasibl group devis effect rule prune redund group approach tree index locat candid provid guidanc select candid shortest spatial distanc activ locat refer distanc order spatial properti deriv max imum bound rectangl mbr tree con straint ssgq prune unqualifi candid reduc search space approach aim form feasibl group small total spatial distanc activ locat distanc base prune adopt socio spatial order priorit growth intermedi group base social tight recal distanc order expand individu closest queri point exampl consid figur input social graph number node indic spatial distanc figur present expans distanc order number node branch bound tree repres expans sequenc figur expans sequenc node sort spatial distanc queri point leaf node branch bound tree group individu creat total spatial distanc group smaller total spatial distanc generat earlier employ distanc order strategi good ignor social constraint generat group result group generat earli stage satisfi familiar constraint top group smallest total spatial distanc address weak distanc order bine social connect spatial distanc identifi intermedi group expand step intuit individu chosen distanc order move satisfi social condit social condit ensur lead group attende familiar follow social condit find individu distanc order satisfi social condit spatial social factor account socio spatial order ensur social connect select individu vertic good simpl approach ensur select number edg vertic exceed threshold larger threshold candid attende familiar attende current inclin chosen ramet examin current attende consequ attende case suffici number neighbor contrast ssgs select satisfi assum ssgs examin social connect group suffici criterion denot averag number acquaint member set neighbor individu satisfi dynam adjust paramet set initi intuit activ allow attende mutual unfamiliar case distanc order best strategi fact situat socio spatial order ident distanc order extrem case pli attende acquaint worth note incorpor dynam adjust paramet includ direct prop handl case vertex satisfi add individu solut grow follow familiar constraint graph distanc order distanc order socio spatial order socio spatial order ing fig exampl order strategi individu satisfi impli solut grow suffici social connect contrast find individu solut grow vertic bring suffici number edg solut socio spatial order set initi increas vertex satisfi vertex select notic maintain high criterion social connect set order priorit vertex lead suffici social connect vertex satisfi high criterion increas avoid filter feasibl solut vertex satisfi will examin larg figur present illustr exampl socio spatial order graph figur explor socio spatial order solid figur exampl initi vertex minimum spatial distanc satisfi ssgs move vertex satisfi ssgs examin vertex find satisfi vertex move expand choos vertex feasibl solut contrast distanc order select vertex vertex dash figur sequenti construct intermedi group meet familiar constraint exampl illustr desir joint consid spatial social domain order find feasibl solut ssgs earlier feasibl solut key factor prune strategi introduc prune strategi ssgs propos prune rule familiar prune distanc prune effect filter unqualifi intermedi group idea familiar prune deriv upper bound number acquaint member member includ distanc prune identifi lower bound total spatial distanc group grown ssgs stop process backtrack current prune familiar prune distanc prune familiar prune edg solut grow divid three categori set edg connect vertic set edg connect vertic select eir set edg connect vertic vertic select set acquaint neighbor select vertic clear good find upper bound maxv set acquaint neighbor upper bound vertex maximum degre identifi vertic select upper bound eir interedg interedg set edg connect vertic notic number edg feasibl solut half total degre vertic solu tion three categori edg familiar prune stop process condit hold max nrv interedg inequ left hand side upper bound averag number attende acquaint son feasibl solut grow condit state averag attende acquaint fewer attende familiar prune stop process backtrack solut grow explor satisfi familiar constraint social graph figur ssgs stop process backtrack move vertex will generat feasibl solut familiar constraint distanc prune vertic select process unnecessari vertic shortest spatial distanc total distanc larger best solut distanc prune identifi lower bound stop process condit hold dvmin term total spatial distanc ver tice vertex vmin smallest spatial distanc access dvmin repres lower bound total spatial distanc vertic consid social graph figur exampl feasibl solut explor total spatial distanc assign ssgs consid dvmin distanc prune remov state stop process backtrack previous state heurist algorithm ssgq prove earlier process ssgq hard problem fact spatial distanc candid problem hard familiar constraint requir address total dist expand node prune node expand node shortcut total dist total dist fig exampl ssgmerg propos effici heurist algorithm good solut effici ssgs employ branch bound framework increment improv solut find optim solut straightforward approach develop heurist algorithm ssgq branch bound search feasibl solut suffer main drawback run time constrain polynomi time approach maintain current minim total spatial distanc solut space prune ignor possibl exploit intermedi solut improv effici effect address issu propos algorithm name ssgmerg effect util structur intermedi solut generat good feasibl solut polynomi time idea iter merg good social tight group small spatial distanc intermedi solut earlier iter figur present social network snapshot branch bound tree socio spatial order feasibl solut prune accord ing distanc prune higher total spatial distanc straightforward heurist approach stop extend enjoy smaller total spatial distanc discov ere contrast incur small spatial distanc candid join group will social dens group small spatial distanc promis idea merg group merg base idea design systemat approach choos set suitabl group construct good feasibl solut intermedi solut expand socio spatial order creat tailor queri specif paramet activ locat effici ssgmerg process intermedi solut direct group size ssgq maintain set intermedi solut queue element intermedi solut attende priorit intermedi solut high social tight small spatial distanc sort intermedi solut rank function base socio spatial order tabl intermedi solut maintain con struct maintain construct solut set minimum satisfi socio spatial order spatial distanc candid activ locat rank function rank base total spatial distanc smaller score tighter social relationship closer consid exampl social graph figur assum ssgmerg inclin choos set intermedi solut queue basic idea merg pair small group larger merg pair small intermedi group intermedi solut store correspond inter mediat solut insert merg intermedi solut maintain intermedi solut smallest rank filter paramet control qualiti number intermedi solut set increas iter increment construct intermedi solut final extract feasibl solut incur minimum spatial distanc return solut import ssgmerg employ prune strategi reduc number intermedi solut exam inat ssgmerg merg intermedi solut intermedi solut discard condit hold min condit minimum spatial distanc candid exist current best solut measur minimum increment spatial distanc merg feasibl solut condit hold feasibl solut expand subset will better solut safe discard tabl merg solut construct ssgmerg bold underscor exampl construct merg construct merg combin merg process complet extract feasibl solut minimum spatial distanc tabl compar best feasibl solut figur total spatial distanc smaller involv paramet termi nate search process state generat branch bound ssgmerg refin solut merg approach effect restrict number generat intermedi solut ssgmerg effici construct good feasibl solut theorem theorem run time ssgmerg log log proof ssgmerg generat node branch bound tree merg intermedi solu tion creat feasibl solut three oper perform socio spatial order distanc prune familiar prune socio spatial order includ distanc order check distanc brows strategi iter extract candid attende minimum spatial distanc tree distanc order perform time worst case number tree leaf node access travers root leaf node tree incur log tree intern node access tree node access incur time distanc comput time tree node access log prioriti queue maintain distanc order take log time insert delet oper size prioriti queue log element insert prioriti queue insert cost element log log worst case size prioriti queue log total cost log log log log check socio spatial order size exceed requir time comput examin examin vertex includ current check time take time familiar prune perform time amin distanc prune time examin element prioriti queue total spatial distanc time distanc prune take time examin branch bound tree summari time complex attempt includ node log log hand ssgmerg merg intermedi solut rank intermedi solut rank function discard rank higher step take log time worst case merg intermedi solut insert cost time ssgmerg combin pair intermedi solut includ check prune condit take time merg intermedi solut run time ssgmerg log log note complex worst case tree distanc brows assumpt uniform distribut candid locat expect time tree distanc brows log log log import experiment manifest ssgmerg faster ssgs ssgmerg effect merg intermedi detail set will present experiment ate solut good feasibl solut avoid examin larg search space algorithm design mrgq turn attent multipl ralli point social spatial group queri mrgq find suitabl activ locat set candid locat social acquaint group minim total spatial distanc activ locat mrgq aim find pair social acquaint group peopl satisfi familiar con straint locat incur minimum total spatial distanc mrgq difficult ssgq candid social group closer locat care consid well address issu multipl candid locat straightforward approach repeat ssgs algorithm time sequenti find best group locat straightforward approach effici spatial correl exist multipl activ locat exploit addit desir design effect structur facilit effici travers prune search space work propos candid tree index activ locat balltre design order strategi identifi activ locat intermedi group candid satisfi familiar constraint prune strategi avoid generat redund pair group candid satisfi familiar constraint effect strategi travers search space propos includ pair distanc order singl refer distanc order process time improv introduc number search space prune rule includ inner triangl distanc prune outer triangl distanc prune tiviti locat distanc prune summari process select attende activ locat exploit spatial distanc candid locat well distanc attende activ locat effect prune redund search space effici find optim solut integ linear program ilp formul mrgq optim solut commerci solver ibm cplex parallel optim fastest commerci parallel solver requir unaccept amount time find optim solut mrgq simultan process spatial social dimens design algorithm effici process mrgq baselin algorithm mrgq baselin algorithm extens ssgs mention socio spatial order distanc prune remain extend familiar prune introduc tailor familiar constraint mrgq condit hold familiar prune stop move candid algorithm backtrack previous step consid candid attende min set neighbor minv repres minimum number neighbor individu minv maximum number unacquaint member incorpor exclud minv individu unacquaint member situat violat familiar con straint prune strategi hold group grow current will satisfi familiar constraint consid vertex degre individu contrast prune condit consid degre individu move individu hand side rhs number individu move hand solut group satisfi familiar constraint degre member group individu number neighbor smaller will grow feasibl solut select total number neighbor individu smaller select individu will generat feasibl solut intermedi group trim exampl social graph figur prune hold vertex current friend satisfi familiar constraint prune hold candid provid suffici social tight current satisfi familiar constraint introduc baselin algorithm ssp sfgp sequenti ssgq process ssp discuss earlier intuit approach answer mrgq sequenti invok algorithm ssgs activ locat intermedi best solut exploit prune inferior solut examin approach incur huge queri process cost simultan trim multipl activ locat improv ssp sfgp sequenti feasibl group process sfgp contrast ssp sequenti explor branch bound tree activ locat sfgp construct branch bound tree facilit joint explor spatial social dimens addit node tree sfgp maintain set main activ locat explor initi set sfgp find refer activ locat qref guid explor qref closest locat candid attende qref spatial closest pair qref lead smaller total spatial distanc earli social graph spatial distanc qref record expand backtrack qref prune distanc prune qref prune distanc prune branch bound tree sfgp fig exampl sfgp stage sfgp sfgp move candid socio spatial order introduc base qref move candid sfgp determin prune familiar prune mention prune familiar prune sfgp stop move candi date current backtrack current grow feasibl solut time candid move sfgp examin activ locat distanc prune condit introduc activ locat will remov distant member prune distanc prune expand empti activ locat prune sfgp stop expans backtrack exact candid satisfi familiar constraint sfgp comput spatial distanc activ locat extract activ locat incur minimum spa tial distanc spatial distanc smaller current minimum distanc sfgp record updat backtrack examin solut search space explor sfgp output record best solut correspond activ locat figur present exampl sfgp size rapid decreas candid move social network correspond spatial distanc figur assum step sfgp identifi qref candid attende spatial closest pair sfgp move step sfgp move note candid attende closest qref move socio spatial order sso prune familiar prune step sfgp move satisfi familiar constraint sfgp scan activ locat extract incur minimum total spatial distanc sfgp updat current best solut distanc backtrack previous state step sfgp discov appli distanc prune activ locat remov move generat better solut sfgp stop expand current backtrack step sfgp move step case remov distanc prune indic will lead better solut current sfgp examin futur expans current process sfgp find feasibl solut distanc better record solut updat sfgp repeat procedur return best solut search complet compar ssp sfgp joint examin activ locat candid attende employ distanc prune effect remov activ locat lead better solut util familiar prune discard intermedi group grow feasibl solut sfgp avoid repeat explor social group social group generat examin time ssp sfgp outperform ssp care examin sfgp find number area improv propos effici algorithm detail algorithm mag mrgq sfgp prune redund activ locat reli sequenti scan determin locat safe prune sfgp calcul lower bound total spatial distanc feasibl solut generat distanc prune hand identifi qref scan activ locat select qref good sfgp decid qref candid attende move adapt chang qref grow address issu propos algorithm multipl activ locat group select mag effi cientli process mrgq sfgp mag process multipl activ locat simultan mag incorpor idea activ locat distanc order strategi includ singl refer distanc order pair distanc order distanc prune strategi includ activ locat distanc prune outer triangl distanc prune inner triangl distanc prune activ locat avoid sequenti scan activ locat select qref prune unnecessari locat distanc order strategi qref effici enabl qref chang expans result feasibl solut smaller total spatial distanc effect distanc prune strategi exploit interplay activ locat well mutual distanc index ball index mbrs fig comparison tree balltre locat effect simultan prune multipl activ locat index activ locat mention sfgp incur sequenti scan activ locat distanc prune time candid move scan determin activ locat prune sfgp extract qref qref closest activ locat expand afterward includ propos pair distanc order apdo design dynam select qref current describ attende will move correspond qref minim total spatial distanc qref minu qref qref qref equip apdo mag find good feasibl solut prune search space distanc prune strategi approach sequenti scan candid attende identifi move avoid sequenti scan activ locat structur facil itat rapid estim spatial distanc activ candid potenti activ locat allow dis tanc prune strategi remov redund activ locat structur triangular inequ exploit distanc prune strategi reduc distanc comput detail structur construct runtim reus time queri process adopt balltre activ locat balltre activ locat store leaf node intern node balltre smallest ball cover children ball ball associ center ctr radius distanc lower bound candid ball space comput asmindist ctr leav balltre activ locat intern node tree correspond ball multipl activ locat balltre enabl remov unqualifi cation illustr figur simul taneous explor prune multipl activ locat lower bound total spatial distanc ball deriv distanc lower bound exceed current best solut assur activ locat will produc better solut social group grown activ locat safe prune figur mindist serv lower bound total spatial distanc employ triangular inequ avoid distanc comput mindist mindist dsi ctr dctr ctr dsi ctr fore distanc ctr ctr comput dsi ctr deriv lower bound spatial distanc summari invok sequenti scan distanc comput find total spatial distanc activ locat index activ locat balltre requir distanc comput number ball altern tree argu ball tree suitabl index activ locat figur illustr exampl activ cation index tree minimum bound rectangl mbrs provid bound ari locat insid figur mindist serv lower bound total spatial distanc mindist denot minimum distanc mbr difficult employ triangular inequ tree lower bound mindist figur mindist mindist hold inequ mindist mindist mindist guarante hold mindist pute mindist mindist direct incur distanc comput deriv lower bound number mbrs contrast balltre distanc comput ball balltre prefer tree mag design balltre bring advantag mag balltre enabl design effici distanc order strategi travers tree index candid attende balltre index activ locat propos distanc order strategi avoid redund examin candid attende activ locat extract refer activ locat qref distanc order strategi combin origin socio spatial order ing mention promis find good feasibl solut prune redund search space effect balltre enabl distanc base prune activ locat earli stage lower bound total spatial distanc set ball facilit prune propos distanc order strategi introduc distanc prune strategi base tree balltre distanc order socio spatial order ssgs applic mag design consid select activ locat propos distanc order strategi mag singl refer distanc order srdo select activ locat candid attende vseed note total spatial distanc feasibl solut srdo minim singl locat qref fix refer pair distanc order apdo adapt chang optim activ locat way choos best activ locat attende vseed qref fig exampl srdo includ minim total spatial distanc refer activ locat qref singl refer distanc order srdo gin srdo start select seed candid vseed refer activ locat qref dvseed qref minim avoid excess dis tanc comput qref grow srdo requir examin activ locat minim distanc effect elimin consider potenti activ locat effici vseed qref travers tree index candid attende balltre index activ locat simul taneous reduc number distanc comput improv effici distanc lower bound candid mbr activ locat ball mindist deriv mindist mindist ctr mindist ctr minimum distanc center radius mindist repres distanc lower bound candid activ locat determin redund examin candid attende activ locat locat distant mbrs ball tree balltre srdo maintain list record travers status tree balltre ini tialli insert root tree root balltre stage find mbr ball incur minimum mindist leaf node tree pop insert children leaf node balltre perform extract leaf node assign vseed qref note entri pop shortest distanc vseed qref closet attende locat pair candid attende activ loca tion mbr ball incur larger spatial distanc mindist lower bound dvseed qref mindist dvi approach effect avoid examin attende locat mutual distant correspond ing mbrs ball will extract list dvseed qref spatial radius mag feasibl solut case figur present illustr exampl srdo sume candid index tree activ locat index balltre find vseed qref insert root tree insert root ball tree element list mindist overlap qref qref qref fig exampl apdo srdo extract insert children srdo list mindist smallest insert children list srdo find incur minimum spatial distanc assign vseed qref vseed qref extract qref srdo fix candid attende chosen follow socio spatial order maintain requir social tight ness familiar prune employ prune intermedi solut will feasibl group distanc prune strategi base tree balltre employ remov activ locat detail will produc better solut pair distanc order apdo srdo grow qref select initi eventu tiviti locat minimum total distanc figur present illustr exampl candid index tree activ locat index balltre srdo find vseed qref move distant solut srdo incur larg total spatial distanc contrast better feasibl solut great reduc total spatial distanc propos pair distanc order apdo select proper candid adapt switch qref suitabl activ locat propos pair distanc order apdo select proper candid adapt switch qref suitabl activ locat apdo simultan choos qref candid attende expand iter total spatial distanc select qref minim min qref dvc qref qref straightforward approach select qref scan entir set approach requir distanc comput move candid reduc overhead travers tree balltre simultan reduc unnecessari distanc comput list maintain travers tree balltre stage mbr ball extract base score function min mindist mindist mindist ctr mindist exceed term repres minimum total spatial distanc activ locat second term repres minimum spatial distanc candid attende activ locat extract leaf node tree pop insert children leaf node balltre pop insert children apdo extract qref access candid attende activ locat distant repeat procedur leaf node andmi final move continu branch bound search procedur mindist ball activ locat remov activ locat satisfi spatial radius constraint apdo iter extract qref incur minimum spatial distanc avoid situat qref close small number candid attende distant apdo allow earli prune activ locat distant candid attende effect reduc comput overhead perform distanc prune strategi figur present exampl candid index tree activ locat index balltre initi apdo find correspond qref column tabl apdo insert root tree insert root balltre element list mindist overlap apdo extract insert children apdo list mindist smallest insert children list apdo find incur minimum spatial distanc candid move correspond qref choos second candid updat qref second column tabl insert root tree balltre extract insert children minim children insert note insert minim mindist overlap pop children insert mindist mindist minimum qref worth note stage qref chang incur smaller total spatial distanc second candid move third column tabl detail extract correspond qref qref move qref feasibl solut addit apdo examin children candid point ctr ctr mindist ball fig outer triangl distanc prune distanc prune strategi avoid examin redund activ locat simpl approach appli distanc prune deriv lower bound total spatial distanc activ locat lower bound larger current best solut activ locat safe discard futur expans approach comput intens total distanc attende activ locat introduc number prune strategi design boost effici trim redund search space attende propos outer triangl distanc prune otdp inner triangl distanc prune itdp deriv dis tanc lower bound triangular inequ incur small comput overhead propos activ locat distanc prune aldp deriv lower bound help tree balltre facilit prune activ locat ball simultan discuss otdp itdp prune singl locat point version extend prune ball locat ball version point view degener ball point version otdp itdp treat special case ball version outer triangl distanc prune strategi deriv lower bound total spatial distanc activ locat total spatial distanc activ locat deriv outer triangl indic deriv triangular inequ activ locat hand inner triangl distanc prune will detail deriv distanc lower bound triangular inequ pure base attende consid activ locat examin examin locat dsi denot spatial distanc attende dqx denot spatial distanc figur lower bound spatial distanc deriv dqx dsi dsi triangular inequ lower bound total spatial distanc comput dqx dsi dqx dsi hand compos group exact attende mag select remain attende lower bound total spatial distanc attende dvmin dvmin denot minimum spatial distanc candid denot current best solut lemma specifi outer triangl distanc prune lemma dqx dsi dvmin produc better solut set candid expand proof inequ term repr lower bound total spatial distanc third term lower bound total spatial distanc candid figur triangular inequ dqx maxsi dsi dqx dsi dsi hold dqx dsi dsi written dqx dsi dsi note dqx maxsi dsi satisfi left hand side dqx dsi dsi guarante negat dqx dsi lower bound dsi hand dvmin lower bound total spatial candid activ locat dqx dsi dvmin lower bound total spatial distanc set candid expand summari outer triangl distanc prune condit hold total spatial distanc set candid expand exceed equal dsi comput access comput dqx dsi portant improv outer triangl distanc prune singl locat ball locat figur prune multipl redund activ locat earli stage mag consid ball locat lower bound spatial distanc locat comput dctr ctr dsi ctr figur lower bound total spatial distanc locat dctr ctr dsi ctr mag deriv lower bound remain attende minmi mindist minmi mindist denot lower bound spatial distanc locat closest candid attende summari cur rentli best solut ball ball prune lemma lemma dctr ctr dsi ctr minmi mindist activ locat ball produc better solut set candid expand proof figur maxsi dsi ctr dctr ctr triangular inequ dctr ctr dsi ctr dsi ctr hold dctr ctr dsi ctr dctr ctr dsi ctr lower bound dsi ctr total distanc ctr addit dsi ctr lower bound distanc activ locat lower bound total spatial distanc activ locat dctr ctr dsi ctr lower bound total spatial distanc activ locat candid minmi mindist condit outer triangl distanc prune hold point ctr mindist ball fig inner triangl distanc prune activ locat produc better solut incorpor candid safe prune compar lemma lemma aggreg distanc comput includ multipl ball balltre outer triangl distanc prune perform time expand note dsi ctr comput access ball outer triangl distanc prune prune multipl ball recomput dsi ctr time inner triangl distanc prune itdp outer triangl distanc prune deriv distanc lower bound base distanc calcul activ locat hand idea inner triangl distanc prune attende sparser total spatial distanc tiviti locat increas inner triangl distanc prune remov redund activ locat deriv lower bound total spatial distanc attende activ locat base spatial distanc attende figur case three atten dee case distanc pair attende dsi solid line deriv lower bound total spatial distanc dot line dsi dsj dsi figur set lower bound spatial distanc locat sum lower bound total spatial distanc dsi dsi hand mag move attende lower bound total spatial distanc dvmin dvmin denot minimum spatial distanc candid inner triangl distanc prune lemma lemma dsi dvmin hold produc better solut set candid expand proof term inequ lower bound total spatial distanc second term lower bound total spatial distanc candid triangular inequ dsi dsj dsi figur dsi dsj dsi dsi dsj consequ dsi dsi dsi dsi dsi act lower bound total spatial distanc hand dvmin lower bound total spatial candid dsi dvmin lower bound total spatial distanc set candi date expand activ locat condit inner triangl distanc prune hold total spatial distanc set candid expand equal exceed note includ denomin prevent overestim duplic distanc dsi addit term construct increment expand requir recomput iter inner triangl distanc prune perform effici effici trim multipl unnecessari activ locat dsi lower bound total spatial distanc point center ball locat subtract term lower bound total spatial distanc locat figur otdp replac dvmin lemma lower bound minmi mindist ball activ locat safe prune lemma lemma dsi minmi mindist hold activ locat ball produc better solut expand proof illustr figur point lemma dsi lower bound total spatial distanc ctr incorpor ensur dsi lower bound total spatial distanc activ locat hand minmi mindist repres lower bound total spatial distanc candid condit hold activ locat produc better solut group candid expand safe prune activ locat distanc prune activ locat distanc prune exploit mbrs tree ball balltre filter unqualifi activ locat solut ball activ locat distanc prune joint consid lower bound attende lower bound remain candid sum lower bound exceed conclud activ locat produc better solut total spa tial distanc smaller activ locat distanc prune base lemma lemma mindist minmi mindist hold activ locat ball produc better solut current solut correspond ctr mindist fig activ locat distanc prune proof figur mindist dsi lower bound distanc activ locat mindist repres lower bound total spatial distanc activ locat ball minmi mindist repres lower bound total spatial distanc remain candid activ locat condit hold activ locat produc better solut didat select safe prune strategi simpl incur high comput overhead distanc comput perform ball find lower bound strategi incur distanc computa tion number ball fore propos strategi util activ locat relationship attende reduc number distanc comput analyz distanc prune strate gie denot number distanc comput minmi mindist activ locat distanc prune incur highest comput overhead distanc comput requir ball ball deriv mindist hand outer triangl distanc prune incur distanc comput ball worst case includ comput total spatial distanc ctr comput distanc ctr center ball deriv lower bound inner triangl distanc prune consid distanc pair attende comput increment cach earli stage time attende inner triangl distanc prune perform distanc comput ball outer triangl distanc prune inner triangl distanc prune effici activ locat distanc prune discuss user interest exist sponsor propos general model support scenario term user interest denot interest measur individu prefer candid locat person activ held locat small interest measur impli high prefer activ associ spatial radius constraint ssgq mrgq interest constraint problem denot interest threshold activ candid member prefer karaok studio bar interest measur coffe shop will set larg exceed threshold case will select activ mrgq ssgq flexibl handl case sponsor activ exist describ gener aliz graph model scenario sponsor sponsor repres set node ssgq mrgq sponsor connect person correl employe student regular custom link informa tion acquir address directori person facebook profil custom databas support ssgq mrgq sponsor set solut ssgs mag algorithm will automat find solut group correl attende sponsor activ locat provid sponsor chain restaur branch chain restaur group includ candid locat set note group size increas scenario sponsor repres sponsor initi solut group dynam chang user locat user cation approach employ fundament tree user locat chang frequent approach incur frequent updat record outdat inaccur promis approach exploit tree extens design dynam environ time parameter tree tpr tree improv version tpr tree tpr tree convent tree tpr tree adopt minimum bound rectangl mbr hierarch spatial object cation user record object locat individu timestamp tpr tree incorpor veloc object predict upcom posi tion updat trigger veloc chang strategi reduc number updat mbr object tree node function time dynam chang locat user tpr tree repres mbr denot extent refer time system param eter current veloc vector veloc vector mbr repres largest veloc object mbr direct strategi ensur mbr enclos under object futur futur mbrs object locat store explicit comput base locat refer time veloc vector figur present exampl mbr veloc vector three object veloc vector object solid arrow veloc vector mbr repres dash arrow figur present locat object enclos mbr refer time time slot figur locat object chang enclos mbr enlarg enclos object exampl tpr tree store locat object correspond mbr refer time locat object enclos mbr futur comput veloc vector support dynam environ paper axi axi mbr boundari refer time axi axi mbr boundari time fig exampl mbr object veloc vector place tree tpr tree tpr tree problem paramet includ ssgq andmrgq ensur optim group return dynam environ ment time unit afterward order prune strategi ssgs mag perform extent mbrs user locat calcul ssgs mag hand balltre paper index activ locat restaur theater updat frequent tractabl mrgq threshold graph graph theori analyz tractabl hard graph problem special graph class theoretician addit inapproxim mrgq analyz prove mag find optim solut polynomi time special graph class threshold graph defin definit threshold graph negat weight vertex call threshold graph hold subset node share edg degg denot degre degre partit divid overlap subset idi subset includ vertic degre degg exploit theorem literatur prove mag optim solut polynomi time threshold graph theorem threshold graph degre partit pair vertic connect vertex share neighbor describ tie break strategi socio spatial order mag set vertic spatial distanc queri point tie break strategi check vertic satisfi descend order vertex degre vertex maximum degg examin move satisfi employ pre process strategi remov unqualifi vertic input graph work general graph threshold graph social network paramet pre process strategi iter remov vertex fewer neighbor incid edg iter repeat vertic remov produc graph remov vertex form feasibl graph vertic neighbor includ group vertex fewer neighbor process call core decomposit remain graph maxim core largest graph vertex neighbor pre process strategi time intuit exist solut mrgq note degre partit core decomposit denot set vertic denot minimum remov core decomposit theorem compar theorem input threshold graph graph core decomposit hold neighbor vertex neighbor vertex proof prove contradict sume vertex vertex share edg theorem hold share edg minimum number hold impli edg definit threshold graph share edg neighbor number neighbor smaller remov pre process strategi contradict prove hold vertex connect theorem vertex connect neighbor vertex neighbor vertex core decomposit trim vertic smaller degre vertex remov theorem manifest vertic will prune well theorem vertex share neighbor provid theoret result mag theorem graph theori vertex threshold graph associ spatial distanc assum theorem threshold graph degre partit max mrgq mag stop return optim solut return solut polynomi time proof employ pair distanc order mag core decomposit graph theoret interest social network belong threshold graph hand hard result general social network present theorem fewer vertic feasibl solut mag stop time core decomposit perform prove exist feasibl solut prove theorem examin case prove mag find optim lution generat node branch bound tree theorem theorem vertic connect edg vertic select examin socio spatial order tie break strategi belong form path length root branch bound tree vertic connect theorem feasibl group node generat branch bound tree qref feasibl solut qref deriv pair distanc order qref optim solut qref distanc prune strategi mag perform exact time time branch bound node leaf node time root branch bound tree conclud search requir optim solut will optim solut case prove mag find optim solut generat exact node branch bound tree mag socio spatial order ing tie break strategi move vertic vertic move earlier move rest vertic construct group move vertic creat node branch bound tree build path length root prove feasibl group examin vertic drawn theorem theorem neighbor belong core extract subgraph vertic neighbor contrast vertex drawn neighbor vertex neighbor vertex theorem fewer neighbor vertex drawn descript vertex drawn neighbor feasibl group case qref optim solut qref pair distanc order distanc prune strategi conclud search need mag stop time complex analyz tail time complex construct node pre process strategi take time node branch bound tree construct mag extract qref list examin mbrmi ball satisfi score function identifi three distanc prune strategi perform worst case time apdo obtain qref intern node tree balltre access max time extract satisfi perform max time distanc prune strategi perform extract satisfi take time otdp itdp aldp take time time complex mag extract pair qref max node branch bound tree take max time extract qref perform distanc prune strategi hand node branch bound tree time check tie break strategi perform take log time familiar prune perform take addit time qref extract distanc prune strategi perform conclud search need take max time time complex mag log max input graph pre process time complex max experiment implement ssgq facebook recruit peopl background student public privat sector worker compar solut qualiti time overhead answer ssgq mrgq manual coor dinat propos algorithm user complet ssgq task mrgq task social graph extract social network facebook spatial locat sampl facebook checkin record addit real dataset collect studi particip evalu perform solut qualiti ssgs ssgmerg heurist algorithm ssgq mention mag larg real dataset dataset crawl foursquar repres lbsns month dataset social spatial individu compar mag relev algorithm geo social circl friend queri gcofq nearest neighbor pnn evalu solut qualiti perform addit dataset evalu mag mrgq larg real dataset dataset youtub social network extract youtub video share websit individu activ locat ssgq mrgq random select dataset measur sampl scenario user studi perform user studi task ssgq mrgq task user studi ssgq span network size spatial radius fix assign task task user freeli select peopl find familiar prefer person activ network size manual ssgs ssgmerg coordin time ist network size manual ssgs ssgmerg solut qualiti ist network size manual correct manual ssgs ssgmerg solut network size manual minimum manual ssgs ssgmerg time ist network size manual minimum manual ssgs ssgmerg solut ist network size manual correct manual ssgs ssgmerg solut fig user studi figur compar manual coordin ssgs ssgmerg answer ssgq user studi figur present time find solut scenario result indic ssgq challeng manual coordin larg network size contrast ssgs obtain optim solut second ssgmerg obtain optim solut time figur demonstr solut manual coordin requir larger spatial distanc optim larger network size friend nearbi easier find group attende smaller total spatial distanc addit solut qualiti figur solut manual coordin guarante follow familiar constraint correct rate figur challeng person joint minim total spatial distanc ensur familiar constraint correct rate drop dramati calli network size increas hand figur ssgmerg obtain solut close optim solut ssgmerg effect util intermedi solut construct good solut figur user freeli select peopl find familiar prefer person activ minimum repres smallest manual solut follow miliar constraint paramet extract manual solut regard input paramet ssgq social network demonstr ssgs ssgmerg find better solut smaller time user analyz previous manual coordin find suitabl user ssgs ssgmerg find solut queri afterward figur network size compar decreas ist manual correct manual mag solut qualiti ist manual correct manual mag solut ist manual minimum manual mag solut ist manual correct manual mag solut manual manual mag time manual mag time activ organiza tion distratio mag mag comparison accept accept better user satisfact interest user satisfact interest user satisfact fig user studi correct rate manual coordin drop difficult user find tighter social group number attende solut manual coordin wors solut ssgs ssgmerg loos requir social connect larg mrgq task span fix user studi mag equip apdo propos prune strategi compar solut qualiti algorithm call greedymanu imit behavior manual coordin find candid radius activ locat pick activ locat largest number candid nearbi exist feasibl group return repeat procedur remain activ locat figur compar manual coordin mag answer mrgq user studi figur demonstr solut manual coordin incur larger spatial distanc optim num ber activ locat increas easier find group attende activ locat smaller total spatial distanc addit correct rate figur solut manual coordin guarante follow social constraint smaller challeng user joint minim total spatial distanc ensur social constraint figur user freeli select peopl analyz familiar paramet prefer person activ minimum repres smallest meet familiar constraint user select paramet extract manual solut regard input paramet mrgq queri social network demonstr user difficult handl small larg examin combin distanc manual coordin deviat optim solut mag figur increas correct rate solut qualiti manual coordin deterior difficult user find tight social group figur user freeli select number peopl form group manual figur indic averag group size measur user studi increas select group size drop challeng find optim group user time find group grow small group size loos requir social connect final figur present time spent find solut scenario result indic mrgq challeng manual coordin larg number potenti candid locat figur compar comput time solut qualiti greedymanu mag obtain solut smaller time solut qualiti wors mag stop feasibl group effect optim solut mrgq consid user interest dis cuss compar user satisfact consid user interest user choos activ locat mrgq locat tag coffe shop restaur bar interest measur activ locat user user user compar group select mag user figur compar user satisfact user interest incorpor manifest user agre group select mag outperform manual select group incorpor inter est increment user choos better incorpor user interest chose accept demonstr incorpor user interest improv user satisfact perform evalu propos algorithm mrgq evalu effect effici propos algorithm mrgq apdo srdo denot mag pair distanc order singl refer distanc order simplifi version apdo mention socio spatial order familiar prune mention includ experi indic set maximum figur compar mag mrgq work dataset mag equip apdo socio spatial order propos prune strategi geo social circl friend queri gcofq aim find group peopl minim linear combin social diamet spatial diamet maximum spatial distanc pair group member select group activ locat gcofq experi gcofq gcofq pnn mag tio comput time gcofq pnn mag ist solut qualiti gcofq pnn familiar constraint gcofq mag social diamet fig comparison relev work dataset tio ssp ilp sfgp srdo apdo algorithm tio ilp srdo apdo srdonobal apdonobal impact balltre tio apdo apdonoaldp apdonootdp apdonoitdp distanc prune tio apdo familiar prune fig perform comparison dataset implement limit spatial diamet nearest activ locat gcofq identifi group return solut hand pnn extract group member nearest activ locat consid familiar constraint fig ure compar comput time solut qualiti pnn obtain group minimum time distanc figur minimum group minimum number unfamiliar member attende group solut return pnn feasibl mgrq solut qualiti gcofq wors algorithm gcofq examin activ locat group format process figur gcofq difficult follow familiar constraint contrast mag familiar constraint identifi optim group nearest activ locat figur pare social diamet group gcofq mag pnn display group pnn disconnect figur manifest mag design minim social diamet social diamet close gcofq figur evalu effici mag dataset figur compar comput time propos algorithm valu massiv search space ssp incur largest comput time grow hand equip socio spatial order balltre distanc prune familiar tio strategi socio spatial order tio vari tio vari fig perform comparison dataset prune srdo apdo effect reduc time acquir optim solut outperform integ linear program ilp apdo requir minimum comput time effect minim total spatial distanc qref expans figur compar algorithm balltre srdo apdo requir smaller comput time balltre outperform ilp propos outer triangl inner triangl activ locat distanc prune strategi effect remov redund activ locat ball earli stage figur impact propos prune strategi outer triangl distanc prune otdp inner triangl distanc prune itdp activ locat distanc prune aldp familiar prune denot manifest prune strategi effect process spatial social relationship deed critic effici process mrgq familiar prune power second deriv tighter upper bound number peopl acquaint member perform evalu propos algorithm ssgq set spatial radius set periment determin base user studi studi indic user particip impromptu activ ssgmerg empir set rang observ rang ssgmerg incur small execut time solut achiev improv straightforward approach feasibl solut hand set small smaller intermedi solut case will includ suffici number distinct candid limit possibl construct good solut figur analyz propos strategi denot socio spatial order distanc prune familiar prune spectiv result indic socio spatial order effect reduc execut time socio spatial order consid spatial social domain guid effici tio ilp ssgselect ssgmerg vari tio ilp ssgselect ssgmerg vari fig comparison propos algorithm ilp ssgq search feasibl solut optim solut explor fewer state branch bound tree figur figur compar ssgs ramet set figur indic execut time increas grow ssgs case explor larger search space find optim solut hand figur larger lead smaller execut time easier feasibl solut distanc prune trim search space comparison ilp ssgq figur compar perform integ linear pro gram ilp ssgmerg ssgs experi ment renown general purpos commerci parallel timiz cplex adopt find optim solut propos ilp formul ssgmerg ssgs singl thread program ilp repres baselin benchmark examin effici propos algorithm ssgs ssgmerg singl thread outperform ilp ssgmerg ssgs care includ effect prune order strategi ssgmerg exploit structur intermedi solut ssgmerg achiev superior perform ssgs ilp perform evalu ssgmerg figur compar solut qualiti execut time ssgmerg set default set figur compar solut qualiti ssgmerg ssgs measur execut time ssgmerg ssgs length time denot solut ssgtimecut figur ratio ssgtimecut ssg merg total spatial distanc solut ssgmerg divid total spatial distanc solut ssgtimecut increas ssgmerg better solut will examin intermedi solut inclin extract better grow improv ssgmerg difficult ssgs extract good feasibl solut earli stage ssgmerg effect merg exist intermedi solut good solut figur execut time ssgmerg grow execut time increas slowli size state set fix extra comput merg intermedi solut incur limit compar solut return ssgmerg optim solut return ssgs figur figur display ratio optim solut qualiti tio execut time comparison opt tio ssgselect comparison ssgs ist vari opt ssgmerg ist feasibl solut comparison straightforward approach fig experiment ssgmerg solut solut ssgmerg optim solut valu divid solut valu tain ssgmerg result manifest solut ssgmerg close optim solut figur compar execut time ssgmerg ssgs ssgmerg outperform ssgs execut time ssgmerg increas slowli grow figur present solut qualiti ssgmerg set total spatial distanc decreas grow larger ssgmerg examin distinct candid attende intermedi solut enabl ssgmerg construct better solut figur compar solut qualiti dif ferent ssgmerg straightforward approach feasibl solut ssgs measur execut time ssgs feasibl solut set proper ssgmerg length time opt repres optim solut return ssgs figur ssgmerg solut close opti mal solut outperform straightforward approach solut straight forward approach converg increas ssg merg better solut ssgmerg time combin group multipl atten dee great reduc time expand socio spatial order ensur earli expand group incur small total spatial distanc ssgmerg produc solut close optim solut comparison mrgq relev work compar state art method paramet conduct experi vari ing present figur figur compar feasibl ratio ratio solut satisfi familiar constraint mag relev approach ili gcofq pnn mag feasibl ratio ist gcofq pnn mag solut qualiti ili gcofq pnn mag feasibl ratio ili gcofq pnn mag feasibl ratio fig comparison relev work paramet propos mag achiev feasibl ratio propos familiar prune strategi effect trim intermedi solut will satisfi familiar constraint earli stage decreas feasibl ratio gcofq pnn drop pnn consid social domain gcofq design minim linear combin social diamet spatial distanc group member worth note feasibl ratio pnn low unaccept loos familiar constraint group return pnn disconnect figur compar solut qualiti feasibl ratio approach number candid locat increas approach find solut smaller total spatial distanc potenti good choic propos mag outperform gcofq term solut qualiti gcofq examin activ locat minim maximum spatial distanc pair group member pnn acquir group minimum spatial distanc figur manifest feasibl ratio pnn small individu closest activ locat satisfi familiar constraint case figur present feasibl ratio familiar constraint propos mag obtain solut satisfi familiar constraint feasibl ratio increas feasibl ratio gcofq pnn drop group member connect larger difficult gcofq pnn follow familiar constraint gcofq group small social diamet group member unacquaint member feasibl ratio gcofq suffici experiment mag dynam environ ment perform experi mrgq locat user dynam chang generat user trajectori extract dataset locat visit individu ratio move user tree tpr tree number updat tio ratio move user tree tpr tree queri execut time fig comparison tree tpr tree individu visit locat equal probabl maximum speed min destin user random pick visit locat rout user acceler speed maximum speed middl rout travel maximum speed rout deceler user reach destin destin assign random compar mrgqs tree tpr tree experi chang ratio move user specif ratio user move rest static measur number updat mrgqs structur addit queri exe cution time measur time process queri structur experi issu mrgqs random time slice minut start time queri paramet set figur compar number updat tree tpr tree ratio move user ratio increas number updat grow rapid tree number move user increas locat updat occur tree updat user locat split mbrs rebal structur frequent contrast number updat tpr tree small compar tree tpr tree incorpor veloc vector mbrs avoid frequent updat figur compar queri execut time tree tpr tree ratio move user execut time mrgqs tree tpr tree small execut mrgqs tree smaller tpr tree tree spend time updat structur maintain smaller mbrs smaller mbrs tree provid better capabl contrast execut time tpr tree increas ratio number move user grow case mbrs larger capabl deterior perform comparison mag prune strategi compar srdo apdonootdp apdonoitdp donoaldp apdo chang paramet figur present experiment default paramet increas comput time apdo increas slowli apdo outperform approach apdonoaldp apdonootdp apdonoitdp srdo propos distanc prune strategi effect avoid redund activ locat examin increas approach apdo incur comput time tio apdo apdonoaldp apdonootdp apdonoitdp srdo distanc prune dif ferent tio apdo apdonoaldp apdonootdp apdonoitdp srdo distanc prune dif ferent fig effect distanc prune strategi tio ssp sfgp srdo apdo algorithm tio vari tio vari tio vari fig sensit test mag dataset youtub larger familiar prune effect loosen familiar constraint propos apdo distanc prune strategi avoid redund expans increas search space increas apdo prune strate gie expand earlier apdo outperform approach final apdo explor qref expans good solut earlier srdo distanc prune strategi apdo effect enabl propos apdo outperform srdo experiment mag dataset youtub evalu propos mag dataset youtub social network extract youtub video share websit individu spatial dataset random assign spatial coordin individu current locat experi random extract activ locat dataset experi indic set maximum figur evalu propos algorithm dataset youtub figur dataset youtub time number candid dataset comput time srdo apdo incur small comput time dataset youtub social spars averag degre enabl social prune strategi effect remov redund search space figur compar apdo paramet set dataset youtub fewer spatial dens cluster comput time limit distanc prune strategi familiar prune prune unqualifi group larg number low degre node social graph comput time reduc conclus address automat activ plan base social spatial relationship attende activ locat defin queri mrgq joint find optim set attende best activ locat multipl activ locat studi special case mrgq ssgq featur singl activ locat process mrgq hard inapproxim factor formul mrgq integ linear program propos effici algorithm mag addit index candid attende tree propos candid locat balltre devis order prune strategi base social spatial relationship experiment comput time requir singl thread mag smaller ibm cplex parallel opti mizer problem process ssgq hard devis effici algorithm ssgs process ssgq strategi includ dis tanc order socio spatial order distanc prune familiar prune propos prune redund search space optim solut effici implement ssgq facebook conduct user studi ssgq mrgq demonstr propos algorithm outperform manual coordin term solut qualiti effici refer cplex http softwar integr optim cplex optim roussopoulo kelley vincent nearest neighbor queri sigmod lappa liu terzi find team expert social network kdd shan team format general task expertis social network socialcom sozio gioni communiti search problem plan success cocktail parti kdd papadia shen tao mouratidi group nearest neighbor queri icd tao papadia shen continu nearest neighbor search vldb yang chen lee chen social tempor group queri acquaint constraint vldb liu sun chen huang jian chen circl friend queri geo social network dasfaa gao zheng lee chen continu visibl nearest neighbor queri edbt gao zheng continu obstruct nearest neighbor queri spatial databas sigmod hjaltason samet distanc brows spatial databas tod liu sun chen huang jian chen circl friend queri geo social network dasfaa omohundro balltre construct algorithm technic report mahadev pele threshold graph topic elsevi liu zhu circular distanc label number outerplanar graph siam discret math chang kuo label problem graph siam discret math seidman network structur minimum degre social network batagelj zaversnik algorithm core decom posit network corr yin lee lee exploit geograph influenc collabor point interest recommend sigir yang leskovec defin evalu network commu niti base grouth truth icdm salteni jensen leutenegg lopez index posit continu move object sigmod tao papadia sun tpr tree optim spa tiotempor access method predict queri vldb beckmann kriegel schneider seeger tree effici robust access method point rectangl sigmod appendix pseudo code propos algorithm pseudo code propos algorithm ssgs sfgp mag singl refer distanc order mag pair distanc order present algorithm ssgs algorithm requir graph locat number attende activ locat familiar constraint spatial radius user locat index tree ensur optim group curdist employ tree rang queri find vertic distanc findgroup curdist output output answer procedur findgroup insi insr curdist insi insr unvisit vertex employ tree distanc brows extract unvisit vertex minimum spatial distanc mark visit increas mark remain vertic unvisit break satisfi condit socio spatial order curdist curdist familiar prune distanc prune satisfi break findgroup curdist curdist break procedur algorithm sfgp algorithm requir graph locat number attende activ locat familiar constraint spatial radius user locat index tree ensur optim group correspond activ locat find qref qref spatial closest pair findgroupandloc sfgp qref output output answer procedur findgroupandloc sfgp insi insr inqi qref insi insr inqi unvisit vertex employ tree distanc brows extract unvisit vertex minimum spatial distanc qref mark visit increas mark remain vertic unvisit break satisfi condit socio spatial order familiar prune satisfi break satisfi distanc prune break findgroupandloc sfgp qref minqi argminqi break procedur algorithm mag algorithm apdo requir graph locat number attende activ locat familiar constraint spatial radius user locat index tree root activ locat index balltre root ensur optim group correspond activ locat findgroupandloc apdo output output answer procedur findgroupandloc apdo insi insr inqi insi insr inqi unvisit vertex qref apdoanddistprun set leaf node balltre prune descend prune ball mark visit increas mark remain vertic unvisit break satisfi condit socio spatial order familiar prune satisfi break satisfi distanc prune mark prune mark prune break findgroupandloc apdo minqi argminqi break procedur apdoanddistprun procedur apdoanddistprun list qref leaf node pop mbr pop ball mindist mindist minimum prune satisfi otdp lemma prune remov mark prune itdp lemma prune remov mark prune aldp lemma prune remov mark prune leaf node child mbr push leaf node child ball push qref return qref procedur 