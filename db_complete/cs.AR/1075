mgsim simul tool multi core processor architectur lankamp poss yang uddin jesshop univers amsterdam netherland februari abstract mgsim open sourc discret event simul chip hardwar compon develop univers amsterdam intend teach vehicl studi fine grain hardwar soft ware interact core hardwar multithread processor includ support core model instruct set con figur multi core interconnect multipl configur cach mem ori model dedic subsystem comprehens monitor interact facil default model configur ship mgsim implement microgrid core architectur hardwar concurr manag mgsim written object class repres chip compon optim architectur model describ process network content introduct context work architectur simul compon model librari monitor measur shortcom futur work summari conclus acknowledg refer introduct mgsim discret event simul chip hardwar compon devel ope group research csa univers terdam mgsim develop teach vehicl studi fine grain hardwar softwar interact core hard ware multithread processor includ support core model differ ent instruct set architectur isa configur multi core interconnect multipl configur cach memori model dedic subsystem comprehens monitor interact facil default model con figur ship mgsim simul microgrid platform pro grammer mgsim full system emul comput equip microgrid softwar infrastructur compon model simul kernel written object class repres chip ponent ancillari tool written python characterist featur mgsim framework promot definit architectur mod compon clock domain synchron fifo buffer model describ process network mgsim free charg open sourc licens articl review mgsim tool box version start describ background stori compar petitor review simul framework exist compon model user inspect state simul final outlin futur develop wrap present context work motiv audienc histor mgsim develop explor behavior risc core group core processor chip mgsim matur versatil framework simul core architec ture develop mgsim guid main purpos support scientif design core general purpos processor architectur implement mgsim influenc activ csa group univers amsterdam design space explor multi processor system chip test combin architectur paramet optim platform specif applic design techniqu processor micro architectur chang featur individu processor core memori inter connect higher perform cost ratio purpos mgsim support undergradu gradu ate educ activ comput architectur parallel program host http svp figur emul simul venn diagram exampl ming compil construct oper system design particu lar mgsim tailor requir provid human scale softwar infrastructur comprehend standalon student field integr emul platform oper softwar softwar packag seamless deploy readi student comput minim effort provid interfac observ illustr intern work sys tem run emul simul mgsim consid simul framework full system emul simul tool reproduc abstract model compon behavior predict simul key item toolbox hardwar architect explor behavior comput compon design final pre select softwar benchmark emul tool reproduc concret behavior comput artifact includ hardwar softwar interfac processor emula tor exampl compil oper system develop debug softwar control environ ship product short simul exist debug optim hardwar design emul exist debug optim softwar run emul system emul divid partial full system emul call virtual partial emul applic code run emul environ oper system function servic host guest interfac full emul entir softwar stack run emul hardwar mgsim serv hardwar simul full system emul illustr distinct fig work group softwar framework simul emul illustr mgsim relat figur entiti relationship diagram mgsim simul contrast mgsim simplescalar provid partial emul oper ate system function serv host platform syscal pseudo instruct mgsim design full system emul studi behavior oper softwar run emul platform simplescalar design emul singl core platform focus lie multi core platform purpos softwar architectur mgsim closer framework mgsim consist librari compon group configur topolog defin multi core platform framework discret event compon base simul emul full system time write offer monitor visual facil mgsim differ mgsim level first design motiv emul exist platform design requir entir ist softwar stack unchang exampl gnu linux freebsd solari mgsim share requir implement simpler mgsim access educ activ second start singl core system emul focus accur simul larg state art sequenti processor multi core support optim core share high level function emul cach coher network inter processor interrupt network contrast mgsim design ground core network featur detail memori interconnect dedic point point messag network core mgsim product tool oper softwar fine grain multi core applic architectur simul framework compos main part illustr fig simul kernel base abstract process regist front configur compon kernel main config config mgsystem mgsystem handlecommandlin cmd_run stepsystem kernel step updat cyclehandl onarbitr cyclehandl cyclehandl tabl call graph initi simul cycl buffer latch arbitr port well execut driver sched ule readi compon process simul cycl librari compon model object class ponent type chip processor core cach memori network interconnect compon model implement base abstract simul kernel typic compon will defin process option intern state process latch buffer arbitr visibl compon system configur constructor instanti compon model connect form full architectur model distribut top level system topolog constructor individu constructor compon model choos instanti compon depend compon simul front user interfac mgsim inter face compos command pars configur file loader interact command interpret event trace filter asynchron monitor final option asynchron monitor run asynchron sep arat thread execut period sampl state select ponent write trace file fifo analysi visual extern tool detail simul overview tabl step step overview initi mgsim handl simul step initi mgsim instanc front pars command paramet configur file step creat config object hold databas configur variabl step front stantiat configur constructor mgsystem turn popul architectur model instanti compon configur step point model readi object construct simul start invok interact front display interact prompt accept user command step exampl invok command start simul trigger step method simul kernel step step advanc simul cycl cycl pend updat state structur share compon fifo buffer commit visibl cycl acquir phase cycl activ compon process acquir phase process handler declar intent share structur request arbitr phase process updat intern state acquir phase complet involv arbitr request resolv kernel arbitr resolv activ process check phase cycl phase arbitr report process determin control path stall access share storag phase process updat intern state check phase complet remain block process commit phase cycl phase process control path chosen check phase updat intern state declar updat share storag effect start cycl emit inform messag log synchron event trace kernel cycl activ process reschedul cycl cycl simul clock frequenc note check phase process block deni arbitr attempt read empti fifo process idl empti input fifo will reactiv subsequ cycl produc data fifo mechan mgsim model behavior asynchron network compon anatomi compon compon simul framework intend correspond rough compon chip area hardwar organ tree child node repres part parent compon exampl dcach data cach pipelin compon child node processor compon processor encompass base interfac compon object object compo nent identifi relat sibl tree parent compon children compon clock domain share parent simul kernel drive entir compon tree addit compon defin process repres state machin function circuit share storag arbitr fifo buffer regist singl bit latch process includ process compon process block access intern state process state share process compon requir arbitr decid process schedul servic provid logic process compo nent inspect handler invok interact mand prompt user command administr data simul repres hard ware compon counter statist illustr concept icach compon model instruct cach defin exampl process p_outgo p_incom input output queu memori buffer m_outgo m_incom share memori subsystem control schedul p_outgo p_incom intern state m_line repres data block pro tect concurr access share arbitr p_servic servic fetch pipelin process write m_outgo servic onmemoryreadcomplet connect memori process complet load write m_incom administr refer m_memori simul compon charg simul memori system administr counter m_numhit generat cach statist compon process process simul framework repres activ data transfor mation communic system process trigger avail data specif share storag will call sourc storag trigger process activ cycl handler call kernel cycl correspond clock domain process cycl handler turn tempt acquir storag arbitr fail stall stall cycl handler will behavior subsequ cycl behavior succeed success complet process consum data sourc storag stay readi invok behavior cycl state machin process idl sourc storag empti base interfac process process process process enclos compon identifi enclos compon state run stall idl cycl handler invok cycl clock domain run stall illustr concept outgo process icach compon process trigger m_outgo fifo buffer popul refil request fetch stage cach miss outgo process charg pick front request cycl send memori system simplifi handler list behavior issu memori load servic servic unsuccess memori con tention handler turn report failur kernel will kernel stall process stall outgo handler will call result icach dooutgo auto address m_outgo front m_memori read address deadlockwrit unabl read return fail m_outgo pop return success list behavior outgo process result icach doincom p_serv ice invok return fail auto m_incom front commit m_line line_ful m_incom pop return success list simplifi behavior incom process cycl request issu memori handler con sume entri report success m_outgo empti result outgo mark idl kernel macro deadlockwrit regist messag print kernel process system stall sign deadlock process instanti occur enclos instantia tion instanti constructor will process declar process cycl handler simul kernel cycl handler typic implement method enclos compon exampl icach dooutgo exampl addit featur handler process incom list process trigger m_incom fifo buffer popul memori load complet messag come memori refil data cach miss handler access intern cach state m_line acquir arbitr p_servic protect data access race fetch stage fetch servic acquir p_servic arbitr acquisit occur phase acquir phase cycl handler see invok method succeed phase invok regist arbitr request acquir phase complet kernel resolv arbitr mark process arbitr fail process handler check phase cycl invok return true fals depend arbitr note entireti handler execut acquir phase arbitr succeed intern compon state modifi phase process arbitr cycl result updat intern state m_line exampl enclos commit block perform phase cycl access share storag push pop intern handl commit block extra mark process handler execut process handler three phase commit block state updat fundament mechan mgsim achiev transact compon share storag share storag basic abstract simul kernel repres state visibl process control updat semant process updat storag clock domain link sourc storag process storag will activ process empti multipl updat cycl reject form arbitr explicit allow storag model type storag provid buffer fifo buffer accessor push pop front regist full empti storag cell accessor read write clear empti singleflag singl bit trigger accessor set clear isset buffer model support multipl updat cycl maximum set instanti reflect abil fifo circuit process fifo append faster cycl time client process arbitr servic port process synchron access share storag intern state arbitr requir mgsim abstract abstract arbitr servic model standalon arbitr cir cuit independ storag state protect loos analog concept mutex lock concurr program languag grant access process handler perform mul tipl updat protect state atom exampl arbitr p_servic icach discuss arbitr servic protect intern state m_line concurr access fetch servic incom process second abstract arbitr port model arbitr circuit combin storag structur multipl entri exampl regist file bitrat port arbitr entri structur separ depend request access cycl indic respect process stall access process stall arbitr write arbitr port regist file core model processor share storag state model singl entiti requir protect offer arbitr servic cheaper simul arbitr servic port parameter arbitr strategi model arbitr circuit arbitr prioriti arbitr multipl process connect fix prioriti cycl process highest prioriti grant access simplest cheapest arbitr hardwar prioriti chosen care avoid starvat prioriti invers cyclic arbitr multipl process connect equal prioriti dur ing cycl counter increment grant access round robin fashion expens implement hardwar guarante fair prioriti cyclic arbitr akin prioriti arbitr lowest prioriti level share multipl process cyclic arbitr expens arbitr implement hardwar termin deadlock detect process activ share storag updat share storag updat process situat process system idl correspond system halt machin situat recogn kernel termin simul error mgsim intend architectur sit uation occur architectur model error system deadlock process erron defin mutual wait compet access cyclic chain share storag activ process wait arbitr declar kernel stall kernel detect cycl idl process stall conclud deadlock occur termin simul deadlock error individu cycl handler mark process stall regist deadlock messag kernel deadlockwrit detect deadlock kernel replay involv cycl handler print deadlock messag user investig situat intuit mechan limit situat livelock occur livelock process appear kernel make progress idl stall situat detect expect form error handl softwar level run simul platform timeout simul platform wait extern input correspond ing process simul input devic mark run idl stall extern input receiv deadlock occur rest system time kernel unabl detect reason simul devic provid concept activ input process run devic activ activ deactiv request explicit sys tem softwar run simul platform input oper minim amount time deadlock detect disabl contract implement abstract provid kernel model circuit templat construct hardwar implement ponent mgsim fall victim three pitfal protect mgsim framework pitfal mention abil defin deadlock architectur happen group process direct indirect wait cyclic arbitr chain avoid pitfal requir analysi process depend graph thorough test model design second pitfal abil express cycl handler process implement hardwar write mgsim restrict languag process handler erron full general languag defin behavior unbound space time requir avoid pitfal requir check code analysi express putat correspond primit recurs function exist equival circuit implement third pitfal abil configur simul clock frequenc compat length critic path circuit implement ing process cycl handler cycl handler definit correspond minimum complex hardwar complex turn place lower bound durat clock cycl silicon technolog energi suppli mgsim prevent implement user defin ing simul clock frequenc smaller cycl durat requir hardwar circuit avoid pitfal requir expert knowledg relationship circuit specif cycl handler circuit plexiti hardwar relationship energi gate densiti critic path length frequenc envis silicon technolog pitfal share simul framework simul level higher individu circuit gate pitfal partial prevent futur autom solut detail compon model librari mgsim ship set predefin compon model prede fine configur system topolog preset librari three compon categori processor devic interconnect memori system figur overview processor compon processor core model mgsim librari predefin processor model processor fpu separ fpu share processor processor model implement simpl processor core order singl issu stage risc pipelin overview compon fig write model emul subset dec alpha isa bit endian isa bit big endian mip isa bit big endian isa emul top pipelin stage albeit data path stage behavior exampl sparc model consum cycl read stage store doubl std instruct read three regist operand read port regist file consum cycl memori stage doubl load store addit base pipelin behavior processor model pro vide order complet instruct type dynam dataflow schedul equip regist file full empti bit regist mark output operand long latenc instruct pend subsequ instruct read pend input schedul wait operand origin instruct complet featur enabl latenc toler load miss cach line stall pipelin independ subsequ instruct continu execut featur provid risc model processor origin design simul detail dynam schedul abil risc detail chap processor model simul hardwar multithread ing configur number hardwar thread featur herit risc model processor design simul hardwar schedul niagara architec ture processor preemptiv switch thread figur extern interfac predefin processor model fetch stage instruct advanc input depend niagara cycl switch overhead processor model support extern interfac illustr fig interfac instanc fpu share pro cessor interfac bidirect asynchron oper dispatch order processor appropri queue pipelin fpu complet order interfac memori system data instruct cach support memori system processor issu multipl request wait answer communic bidirect interfac control network chip noc separ memori system network processor receiv messag influenc hardwar thread remot access regi ter dedic thread manag unit tmu hardwar risc heritag processor isa extens send mes sage noc describ chap app option interfac noc separ previous network enabl processor simul memori map interfac memori stage pipelin send receiv messag direct devic noc simul integr direct memori access dma control convert messag noc memori request particip main pipelin administr interfac inspect debug user mgsim framework time write choic isa emul processor static compil mgsim instanc support alpha isa sparc isa simul execut choic enabl compil time optim architectur constant width data word width memori address data endian architectur paramet configur initi time includ cach size associ dex clock frequenc fpu core map avail figur serial memori model serialmemori processor figur serial memori model multi core configur interfac buffer size memori noc interfac memori model mgsim librari multipl memori system connect processor core extern memori exist memori model side side motiv ongo scientif multi core architectur evalu practition typic find perform compar analys behavior multi core system memori architectur system topolog framework limit applic model combin memori model number core accur complex hardwar circuit correspond model grow unfavor number core suggest switch memori architectur outlin user care align frequenc memori clock domain expect hardwar complex chosen configur time write framework logic automat scale frequenc circuit complex report unrealist unimplement configur expert knowledg user expect appli serial memori simplest memori model serialmemori illustr fig singl core configur load store request processor queu buffer entri default handl request handler process simul memori control latenc figur parallel memori model parallelmemori multi core configura tion handl request configur respons serv direct processor request handler multi core configur compon chang mgsim arbitr servic control access request buffer simul request bus processor respons request serv direct processor initi request separ bus arbitr singl initi write request snoop cach processor bus grant access arbitr memori system model simul high sensit con tention request bus rare practic core front configur key memorytyp set serial auto matic build memori system type parallel memori parallelmemori model ident serialmemori singl core configur differ multi core configur illustr fig processor port memori implement request queue handler independ content separ core write request snoop cach processor transpar snoop content simul model intend repres ideal parallel memori studi theoret bound throughput latenc content consid intend accur model hardwar hardwar implement requir arbitr request handler access physic memori array bank memori arbitr port bank front configur key memorytyp set parallel tomat build memori system type bank memori singl core configur predefin model provid offer memori level parallel separ request memori bank bankedmemori fig ddrmemori fig sequenti request handler serialmemori figur bank memori model bankedmemori figur bank memori model control ddrmemori simul channel control protocol addit parallel overlap handl subsequ request pipelin model number bank configur select bank ddr channel request come processor base memori address request queu select bank channel process asynchron respons queu deliveri respons bank channel processor deliv arbitr servic memori clock cycl model intend simul hardwar memori system processor connect multipl memori modul bidirect bus address bank map select strategi select bank channel configur compon librari zeroselector select bank channel troubleshoot ing directselector directselectorbinari lowest order bit address bank rightxor rightadd comput bank channel exclus binari rightxor sum rightadd low order block figur bank memori model multi core configur size bit address xorfold addfold general rightxor rightadd bit address comput step rotat base hash address low order bit hash select bank channel directselectorbinari model common circuit hardwar sensit stride memori access align number bank content singl bank model pro vide ideal random address bank map consid simul ideal load distribut higher circuit complex hardwar implement predefin set recogn front configur key memorytyp bank bankedmemori directselector directselectorbinari strategi depend number bank configur number bank power randombank bankedmemori strategi ddr ddrmemori directselector directselectorbinari strategi depend number ddr channel configur randomddr ddrmemori strategi bank memori multi core configur bankedmemori ddrmemori general multi core configur fig fig multipl processor processor receiv bank select circuit request come processor queu select bank channel arbitr servic appropri simul content bank channel respons deliv direct processor issu arbitr core bank chan nel control direct point point respons link processor write request snoop cach processor transpar snoop content simul number processor number bank independ configur separ number processor figur bank memori model control multi core con figur number bank automat scale multi core general model intend simul memori circuit hardwar crossbar switch multistag interconnect network processor memori bank channel niagara chip hardwar energi cost circuit prevent practic core ring base cach diffus network ongo project univers amsterdam aim design novel memori system base scalabl network cach latest outcom provid memori model librari predefin compon famili model refer coma zlcoma sourc code acronym coma histor tie work cach memori architectur origin coma vision dram bank system manag network larg cach key characterist partit address space memori static directori memori retain address current memori protocol memori ensur address network correspond key featur block data correspond frequent address migrat system frequent featur memori system call attract memori memori architectur model librari diverg origin coma concept reason difficult fit entir dram storag system singl chip chip coma cach directori difficult manag latenc bandwidth scale requir chip parallel memori architectur design univers amsterdam static partit address space memori bank distribut network cach chip attract properti coma cach line fetch uniform mem ori architectur uma uniform memori architectur numa cach memori architec ture coma cach dif fusion memori architectur cdma figur overview differ memori architectur cach network tend stay network avoid chip memori access cach network resolv fetch data fetch extern memori coma chip directori rememb address current chip cach network differ coma memori architectur mod ele mgsim best describ cach diffus memori architec ture cdma base attract cach cach diffus network cdn summar differ convent uniform uniform memori architectur coma cdmas fig coma zlcoma mention initi librari cdma model call coma zlcoma topolog layout cach directori network link present section model zlcoma histor implement correspond token base write invalid cach protocol publish design strive minim communic cach network protocol current reli complex metadata updat cach directori implement hardwar expens weak consist model violat expect share memori program limit motiv design altern simpler write updat cach protocol compon topolog coma model simpler protocol write updat messag signal memori load line duplic cach request exclus forc cach evict copi zlcoma protocol suffer high bandwidth content write heavi workload poor cach local protocol project csa group univers amsterdam exist hardwar product time write model default configur librari strive reflect realist potenti hardwar implement futur chip figur cach diffus network cdn processor cach extern channel compon cach diffus network simplest configur cdma model depict fig processor connect memori interfac attract cach act second level cach model singl attract cach call cach framework attract cach connect root directori ring network green link pictur organ distribut cach line model root directori call rootdirectori mgsim root directori turn connect main memori control channel simul ddrmemori model discuss earlier topolog main configur paramet model defin structur attract cach cach size number set set associ strategi map memori address cach set indic selector option cach structur clock frequenc compon adjust well number buffer network link number directori entri rootdirectori automat configur base cach paramet number cach network time write default configur coma zlcoma model librari defin associ attract cach xorfold set select strategi link buffer space request entir cach network exclud channel clock cdma topolog compon model librari accompani configur code instanti compon model connect form actual architectur simplifi configur mgsim parameter topolog compon architectur constructor automat connect compon general skeleton base paramet desir number compon type propos network topolog cdmas singl ring stack ring refer configur code provid cdma model mgsim librari constructor parameter desir num ber compon type automat instanti compon connect ring network simpl ring number attract cach number root directori configur separ count grow figur singl ring cdma three attract cach directori figur singl ring cdma attract cach three directori ponent automat organ depict fig multipl attract cach multipl root directori configur ponent automat interleav ring network minim averag latenc request abil defin multipl root directori memori parallel write memori address space stripe memori granular singl cach line maxim load distribut request provid topolog skeleton stack ring cluster attract cach group local ring ring connect top level ring root directori extern memori exampl fig motiv stack ring exploit local multi core comput requir lot cach movement core independ memori activ rest system case desir segreg network activ physic avoid influenc negat bandwidth rest system servic offer local ring cdmas local inter cach traffic local ring stay independ traffic local ring stack ring connect point local ring top level ring partial directori model directori compon mgsim inventori line local ring singl ring topolog partial root directori interleav top level ring partial directori size automat base configur local attract cach figur singl ring cdma three attract cach three directori figur stack ring cdma attract cach root direc tori share attract cach dimens parallel share attract cach multipl processor illustr fig type con figur communic model processor share cach serial memori model present request bus arbitr simultan request processor respons serv separ respons bus serial memori type share subject content request bus summari configur paramet paramet guid instanti cdma model singl ring stack ring number set set associ attract cach number root directori total number processor number processor attract cach buffer size ring network link clock frequenc memori compon stack ring number attract cach local ring figur simpl cdn share attract cach number attract cach well number local ring stack ring topolog comput automat base config urat set simul devic mgsim librari pseudo devic interfac simul system simul environ provid devic terfac assum network chip request respons packet base communic primari interfac bus addit librari defin exampl dedic network chip connect devic processor core model separ memori oper separ logic network choic enabl separ studi memori traffic initi applic mgsim design system motiv publish real time clock rtc pseudo devic provid access real time simul sys tem oper mode support read request queri current time write request configur asynchron timer event deliv time network facil exploit processor core interfac trigger period process consol pseudo devic three pseudo devic provid interfac user uart implement serial subset standard program interfac simul host serial connect termin file unix fifo process lcd implement charact matrix display program mode memori array correspond charact display serial byte orient interfac automat implement newlin scroll simul host display render text termin display implement pixel orient display support video mem ori configur size serv frame buffer support palett index true rgb color mode simul host display render graphic display interfac host file system pseudo devic rpc implement virtual file system server oper remot procedur call protocol read write request pseudo devic simul system perform call standard filesystem oper host environ open read write facil design enabl benchmark larg input data file feed comput intens algorithm focus eval uat comput provid direct access rpc interfac simul bypass overhead full oper system simul read memori dma control pseudo devic activerom implement combin read memori rom dma control main devic provid access content specif file simul host exampl execut code benchmark pro gram addit option automat initi set unix environ variabl list command argument facilit execut multipl simul rang softwar paramet provid extern expect devic return rom data read request write request configur trigger dma oper embed dma control asynchron send region rom network chip node network facil design autom load initi bootstrap soft ware code ram start simul system manag control pseudo devic smc implement initi sequenc simul system devic discoveri protocol devic discoveri implement small rom automati calli popul list node address compon type model connect network system initi smc compon activ perform action trigger peer activerom devic send bootabl execut code ram cach control processor core connect network transfer complet trigger boot signal processor core boot signal inform processor core address network softwar run processor core iointerfacecor pipelin load store unit cach interfac memori network core memori interfac network direct memori access asynchron event handl int cebroadcast incom read write request outgo read write request figur exampl iointerfac processor core model simul dynam discov devic configur exampl interconnect librari provid model interconnect call nullio impl ment fulli connect network node node node latenc network cycl clock frequenc individu configur communic latenc independ packet size network appear infinit bandwidth compon realist model interconnect real system demonstr protocol enabl function full system emul environ cost focus measur implement simpl exampl futur work hardwar softwar interfac explain standard subsystem assum packet orient network pseudo devic processor core protocol port messag type messag argument read request address size read respons payload write request address size payload channel payload contrast processor core today assum bus interfac memori system address data line interrupt line connect core network librari propos compon iointerfac reus core model compon servic broadcast messag type signal asynchron unexpect event differ messag type broadcast deliv node network broadcast call notif sourc code debugflowwrit branch pc_str commit m_output m_output swch true return pipe_flush list behavior risc model branch translat memori load store issu softwar run core outgo read write request implement uncach memori map translat incom broadcast messag prefer mechan asynchron signal interrupt translat incom read write request direct access memori interfac form direct memori data inject network illustrag fig default risc processor model iointerfac implement memori map report broad cast dataflow synchron mechan base techniqu publish monitor measur mgsim three main facil track simul process synchron event trace enabl report simul event tain specif categori intend troubleshoot inspect detail cycl cycl behavior compon asynchron monitor enabl asynchron sampl state simul regular time interv mechan faster synchron event trace accur intend collect ing statist larger time scale perform counter creat bridg softwar run simul system simul environ enabl program read simul state valu combin comput mechan intend captur time resourc usag individu softwar compon larger benchmark program facil describ section synchron event trace compon cycl handler servic invok mgsim api report simul event exampl pipelin execut stage provid risc core model code list control path branch instruct debugflowwrit macro format print messag defin argument correspond trace type type descript mem memori load store instruct pipe event report pipelin activ reg access regist file fpu event float point unit flow branch instruct thread creation risc oper ionet messag network deadlock event report process stall net risc event deleg link network sim general simul event default tabl synchron trace type main branch printf printf branch vfprintf vfprintf creat __slffmta_t_vfprintf vfprintf sync __slffmta_t_vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch strlen strlen branch strlen strlen branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __vfprintf __vfprintf branch __slffmta_t_vfprintf vfprintf detach vfprintf branch printf printf branch main main branch _start list exampl synchron flow trace flow enabl overhead format event text avoid trace disabl trace type current defin list tabl individu trace enabl disabl interact command prompt user trace item order master cycl counter origin compon process compon handler produc event singl charact key identifi event categori text event exampl trace list produc compil program int main void printf hello return toolchain present set breakpoint main abl flow trace breakpoint reach exampl figur exampl viewlog util synchron event trace illustr event trace reveal time call tree program time spent function trace print termin captur file pipe extern util mgsim exampl util call viewlog con vert event trace html file suitabl graphic visual web browser exampl output provid fig exampl core model run parallel implement equat state fragment loop livermor benchmark suit output viewlog produc column compon row cycl col umn color hardwar thread risc core model browser window center start data parallel oper cursor hover intersect cycl cach core pop label memori event occur locat asynchron monitor asynchron monitor intend captur evolut time semi continu variabl simul model architectur describ fig monitor thread run concurr simul thread repeat sampl set select variabl binari record output stream sampl rate configur stream redirect file pipe extern util mgsim generic util readtrac transform binari format text suitabl plot gnuplot readtrac reduc aggreg monitor sampl exampl case illustr fig exampl core readtrac mgsim simul thread monitor thread stream parser record stream fifo synthesi engin trace metadata engin code python text output tabul number gnuplot gnuplot script diagram report select variabl sampl monitorsamplevari provid user variabl select synthesi code gnuplot script compat ple synthesi engin aggreg incom record provid higher level insight simul figur architectur case asynchron monitor mgsim simul model configur classic whetston sequenti program appl macbook pro simul host monitor thread configur sampl simul cycl counter counter number instruct execut core pipelin sam pling rate configur sampl execut last real second simul time instruct time monitor thread produc sampl approxim effect rate sampl readtrac util subsequ conjunct gnuplot produc figur figur model host mgsim run instruct real second kip general slower equival hardwar implement perspect better view simul speed naiv estim base final count indic program perform counter monitor facil provid fulli extern invis simul platform librari interfac enabl perform introspect simul program step standard core model support standard isa featur expos perform counter exist exampl alpha base risc model support rpcc instruct read cycl counter librari compon call perfcount core model memori interfac redirect load specif rang address perform counter config ure program introspect progress simul read fix memori rang time write perfcount cess counter number clock cycl execut instruct issu benchmark simul second simul perform mgsim simul model intel duo simul host run benchmark simul platform sim instruct sim second perform sim instruct real second perform mgsim sim cycl real second perform mgsim figur exampl applic asynchron monitor memori request mechan implement enabl precis report mgsim statist start point comput express sourc code intend realist model perform counter interfac real hardwar shortcom futur work present state framework standard compon librari start experi mgsim archi tectur educ reveal serious shortcom common occurr implement design error implement model mgsim common error defini tion deadlock circuit circular depend compo nent model expos depend buffer process mgsim framework analyz detect circular depend automat ical implement detect mechan reduc time requir troubleshoot model error second shortcom lack facil checkpoint restor entir simul state failur occur mechan reproduc issu play entir execut scenario start simul program exact execut simpli imposs issu troubleshoot long run softwar simul platform mechan serial serial simul state freez featur vir tual machin great increas suitabl mgsim sandbox environ troubleshoot simul softwar shortcom question aros simi lariti mgsim discuss despit project goal overlap technic approach strik ing inter compon interfac compon granular configur facil intrigu project rais opportun investig librari memori model reus lack regard determin core model reus mgsim provid increas platform compat program run simul platform summari conclus present mgsim open sourc framework compon librari simul core processor framework written implement high configur discret event multi clock simul engin librari compon versatil hardwar multithread order risc core support multipl isa multipl memori interconnect subsystem enabl full system emul comprehens inspect monitor facil suitabl architectur educ mgsim current univers amsterdam partner applic includ scientif microgrid architectur general graduat level educ processor cach memori architec ture perform wise mgsim model thousand compon convent desktop grade hardwar mgsim base framework discret event compon base multi core simul framework compar perform focus compat real hard ware intra core accuraci model core mgsim focus plement simplic accuraci larg core model acknowledg framework main compon model origin design implement mike lankamp mgsim current stewardship author articl develop mgsim fund dutch govern project nwo microgrid european union grant number appl core advanc univers amsterdam grant china scholarship council author carl joslin michiel van tol thoma bernard andrei matei thorough evalu test mgsim tool chain incept well zhang contribut cdma model zlcoma refer bernard bousia guang jesshop lankamp van tol zhang general model concurr implement core dynam risc processor najjar blume edi tor proc intl conf embed comput system architectur mod ele simul samo ieee samo greec juli isbn nathan binkert ronald dreslinski lisa hsu kevin lim ali saidi steven reinhardt simul model network system ieee micro issn doi bolychevski jesshop muchnick dynam schedul risc architectur iee proceed comput digit techniqu septemb issn doi cdt dahlgren torrella cach memori architectur comput june issn doi zhang jesshop verif chip coma cach coher protocol intern confer algebra methodolog softwar technolog isbn antonio gonzález mateo valero nigel topham joan parcerisa elimin cach conflict miss xor base placement function proc intern confer supercomput acm york usa isbn doi hagersten landin haridi ddm cach memori chitectur comput septemb issn doi michael hick michiel van tol chris jesshop scalabl core architectur intern confer embed comput system architectur model simul samo ieee juli isbn doi icsamo raphael kena poss realiz hardwar microthread revist general purpos processor interfac cons quenc challeng phd thesi univers amster dam http realiz hardwar microthread kongetira aingaran olukotun niagara multi thread sparc processor ieee micro march april issn doi lankamp develop refer implement microgrid microthread microprocessor thesi univers amsterdam amsterdam netherland august http dist svp doc mike lankamp mike lankamp design evalu multithread core chitectur phd thesi univers amsterdam appear mcmahon livermor fortran kernel comput test numer perform rang technic report ucrl lawrenc livermor nation lab usa dec raphael poss mike lankamp irfan uddin jaroslav sýkora kafka heterogen integr simplifi core architectur simul proc workshop rapid simul perfor manc evalu method tool rapido acm isbn pub poss doi raphael poss mike lankamp qiang yang jian michiel van tol chris jesshop appl core microgrid svp core invit paper smail niar editor proc euromicro confer digit system design dsd ieee comput societi septemb isbn pub poss doi dsd zhang chris jesshop chip coma cach coher pro tocol microgrid microthread core boug editor euro par workshop volum lncs springer 