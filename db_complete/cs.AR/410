sic fpga base high speed data acquisit system high energi physic applic swagata mandal suman sau amlan chakrabarti subhasi chattopadhyay vlsid design contest track honor mention januari univers calcutta vecc kolkata kolkata india sumansau abstract high energi physic experi hep high speed fault resili data communic need detec tor sensor host transient fault occur communic hardwar extern effect presenc charg particl nois environ radiat effect hep experi lead sin gle multipl bit error order communic sys tem function radiat environ direct intervent human high speed data quisit daq architectur support error recoveri design present effici implement field pro grammabl gate array fpga base high speed daq system optic communic link support multi bit error correct model design implement xilinx kintex board test board board communic well communic pci peripher ponent interconnect express data communic speed gbps achiev board board board communic estim resourc util critic path delay measur motiv remain immens challeng develop effici daq chain hep experi demand high data rate low error scope develop sys tem architectur daq chain general consist analog sensor hardwar analog digit convert high resolut connect digit daq chain storag process work target digit daq chain commu nicat host comput analysi data general success hep experi requir daq chain handl issu channel read frequenc khz synchron limit data capac consid fpga hardwar prototyp devel opment reconfigur perfect support evolv design requir well avail design flexibl protocol implement term hardwar softwar design propos system high data rate transient error correct capabl design requir daq prototyp design describ paper xilinx kintex board optic fiber ble jitter clean clock generat power suppli host xilinx ise softwar chipscop pro analyz tool system design complet flow system function block figur detail function descript block describ prototyp bit input bit slow control field data transmit optic link scrambler scrambler scrambler reduc occurr long quenc maintain good balanc input signal come convert accur time recoveri receiv equip resort redund code latenc clock cycl add redund system code scrambler opposit respect scrambler receiv side bch encod decod bch binari error correct code function block detect error occur diation seu hit charg particl transmiss bch code correct bit error code scheme bit data append redund bit error correct code effici increas code effici bch code case error correct ing capabl will reduc tripl error correct bch code will duce code effici optim code effici error correct capabl chosen bch code block increas extra hardwar redund clock latenc system increas reliabl data transfer decod code data follow three step determin error locat polynomi detect error locat chien search algo rithm locat data error posit interleav interleav interleav reorder data transmit ted consecut byte data distribut larger sequenc data reduc burst error interleav great improv capac code correct burst error kind interleav communic system block interleav convolut interleav block interleav interleav block add extra clock latenc system process increas code correct capabl extra overhead figur interleav process figur interleav process effect burst error three block data block size bit con sider transmiss nois disrupt bit data error distribut receiv data margin amount distort complet loo ing data receiv block burst error interleav process opposit respect interleav receiv side mux demux clock domain cross block consist dual port ram read write control break bit frame three bit width mhz clock drive multi gigabit transceiv mgt data rate clock frequenc chang requir block synchron data rate mgt part design keep data rate reduc bandwidth consumpt channel transmitt receiv side synchron figur architectur block diagram mux demux clock domain cross dual port ram control logic mhz mhz mux bit bit bit dual port ram mhz demux bit bit address_a address_b address_a address_b control logic figur mux demux clock domain cross serial serial block simpli convert parallel data serial data transmit communic channel built mgt serial simpli convert serial data parallel data receiv side frame align pattern search frame align block receiv side data nois transmit chan nel frame align align frame correct process frame frame header detect frame type proper search receiv side frame format system top figur standard frame consist field header field consist bit data slow con trol field consist bit data data field width bit forward error correct field width bit fec field reserv control daq chain futur extra wide bus frame field error correct width data field bit extra wide bus frame consist three field header field slow control field data field extra wide bus frame format will applic probabl occurr error side radiat zone effici data transfer higher extra wide bus frame format compromis error frame align pattern search block consist block pattern search block shifter block bottom figur shifter block shift receiv data bit side msb side send pattern search block pattern search block check header receiv header proper detect pattern search block will continu search header time search process will complet frame synchron header proper detect scrambler bch encod interleav mux bit descrambl bch decod deinterleav demux bit frame align serial serial bit mhz bit mhz bit mhz gbps pattern search bit mhz bit mhz sender receiv mgt mgt data pattern generat pcie figur intern block propos system bit slip command will generat search process header will deseri righter shifter state machin pattern search demux lock status bit slip command headerfram data receiv header slow control user data forword error correct fec bit bit bit bit header slow control user data bit bit bit standard frame format extra wide bus frame format frame format figur frame format frame align pro cess data transfer host pcie asynchron fast fast fifo scatter gather direct memori access sgdma transfer data fpga board pcie pcie gen core xilinx interconnect fpga pcie figur data will written fifo frequenc mhz mgt run data will read fifo frequenc mhz pcie core run side captur data program develop window softwar develop kit sdk written languag complet chain function block fig ure high speed daq multi bit error correct bit error correct impl ment fpga board figur complet rial flow diagram generat standard frame format bit user data scrambl scrambler block bit data divid bit block data scrambl block parall scrambl data bit header map input line bch encod bch encod block cor rect bit error bit input total bit correct techniqu extra resourc output encod append frame bit data bit data terleav function block mux interleav describ reduc burst error header posit chang frame format red color fig ure interleav process help synchron frame receiv side mux demux clock domain cross block dual port ram write bit data mhz clock read data mhz clock rate bit word size data rate write gbps read gbps bit data serial transmitt transmit optic fiber cabl receiv side function block serial demux clock domain cross interleav bch coder scrambler perform oppo high speed communic logic error correct async fifo wr_en data full empti data rd_en wr_clk rd_clk dma xilinx pcie interfac core host pcie link bus fpga fpga fpga detector sensor jitter free clock generat kintex fpga board figur pcie interfac block experiment setup propos daq site function respect serial mux interleav bch encod scrambler frame align pattern search block extra compon receiv side detail function descript extra block standard frame format gener ation header extra wide bus frame header system implement full prototyp daq chain implement xilinx kintex board avnet xilinx ise platform vhdl languag extern jitter clean clock sourc drive mgt kintex board time diagram transmitt receiv side figur signal function tabl experiment setup perfor manc block diagram experiment setup system figur achiev maximum bit rate gbps system standard mode frame bit data bit error correct fec bit header bit fec correct bit error appli encod block parallel bit error correct block extra wide bus frame format error correct code frame carri bit data bit frame data rate achiev con sider data field standard mode error correct mode extra wide bus mode data rate measur data transfer effici mention mode resourc util function block system includ critic time delay tabl critic time maximum delay time output circuit block input power consumpt calcul xilinx xpower tool tabl board modul logic power signal power kintex bch encod bch decod scrambler descrambl interleav deinterleav frame align pcie top modul pcie top modul pcie tabl modul wise power consumpt video link real lab setup https conclus work propos novel daq design hep experi propos daq support high speed gbps optic data communic achiev multi bit error correct daq design implement xilinx kintex board real test setup develop involv ing board board communic pcie interfac host detail perform analysi daq impl mentat present term time diagram resourc uti lizat critic path delay block fpga power consumpt propos daq design impl mentat involv optic data communic multi bit error correct capabl consid kind serv benchmark design hep daq refer bose ray chaudhuri class error correct ing binari group code control scrambler scrambler scrambler scrambler bch encod bch encod bch encod bch encod interleav header slow control data frm scr fec scr scr scr scr scr fec scrambl bch encod interleav frame frame frame figur standard frame format generat chien cyclic decod procedur bose chaudhuri hocquenghem code theori ieee transac tion nashiyama nishijima sekiguchi shimano goka studi basic mechan singl event upset high energi microbeam nuclear instrument method physic beam interact materi atom zhi yuan decod tripl error correct binari bch code industri electron applic iciea ieee confer june fabric_clk mgt_ref_clk pll_lock reset busy_o done_o transmitt scrambler data data data data encod encod encod encod tx_gearbox_output receiv frame_algnr_rightshift data data data data data data data frame_algnr_pattrn_srch frame_algnr_bscount frame_algnr_wraddr write bit data data data data data decod decod decod decod deco descrambl data data data data data data data figur time diagram transmitt receiv signal signal function fabric_clk drive block daq transmiss receiv side mgtref_clk drive mgt transmiss receiv side pll_clk drive mgt transmiss receiv side pll_lock output pll indic pll generat stabl clock transmiss receiv side reset reset system transmiss receiv side busy_o high system enter process readi transmiss receiv side scrambler signal data output scrambler block transmiss side encod signal data bch encod transmiss side mux_output signal output mux block bit width transmiss side frame_alignr_rightshift store receiv data shift bit receiv side frame_alignr_pattern_search check header match receiv side frame_alignr_bscount store output counter header match receiv side header_lock_o high frame lock receiv side frame_alignr_wraddr store address ram receiv data will written receiv side ram_en high ram readi perform receiv side write bit data store bit data written ram receiv side decoder_en high bch decod readi perform receiv side decod decod data receiv side descrambl output data descrambl block receiv side tabl descript signal time diagram board modul slice regist slice lut lut flip flop bram critic path kintex bch encod bch decod scrambler descrambl interleav deinterleav frame align pcie top modul pcie top modul pcie tabl resourc util 