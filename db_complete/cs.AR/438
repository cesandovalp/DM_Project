threadpoolcompos open sourc fpga toolchain softwar develop jen korinth david chevalleri andrea koch embed system applic group esa technisch universita darmstadt darmstadt germani email ahk abstract extend abstract present threadpoolcompos high level synthesi base develop framework meta toolchain uniform program interfac fpgas portabl multipl platform term fpga applic program interfac sign autom acceler higher level synthesi introduct year major advanc high level synthesi hls spawn generat hardwar compil legup nymbl academ domain xilinx vivado hls industri generat effi cient behavior equival hardwar comput kernel describ tool burden tackl high complex task generat hardwar specif equal daunt task system synthesi provid entir hardwar softwar environ generat hardwar kernel encompass defin connect memori manag host fpga communic make fpga access appropri softwar interfac threadpoolcompos aim divid task generat fpga hardwar design actual hls problem problem generat chip micro architectur system level main goal threadpoolcompos provid easili customiz open sourc tool suitabl research investig problem mon benchmark environ research work hls tool isol softwar develop low level mechan threadpoolcompos develop context project repara aim tomat front develop flow heterogen parallel comput encompass multi core gpu fpga dsp base process element flow legaci code increment refactor modern turn high level code suitabl target processor deduc threadpoolcompos threadpoolcompos toolchain framework will present top approach applic parallel runtim tpc api platform api devic driver simul fig threadpoolcompos softwar stack softwar interfac hardwar bitstream generat fpga devic tpc api tpc api upper api layer fig applic direct tpc api parallel runtim framework opencl fastflow interfac tpc api core task devic enumer manag data transfer devic job prepar launch list exampl snippet job launch alloc devic tpc_handle_t tpc_device_alloc dev copi array data devic tpc_device_copy_to dev data tpc_blocking_mod prepar job kernel magic tpc_job_id_t j_id tpc_device_acquire_job_id dev set argument handl tpc_device_job_set_arg dev j_id sizeof launch job tpc_device_job_launch dev j_id tpc_blocking_mod call block complet return int tpc_device_job_get_return dev j_id sizeof printf result job releas job tpc_device_release_job_id dev j_id releas devic memori tpc_device_fre dev list tpc api exampl small block memori alloc devic tpc_device_alloc data copi tpc_device_copy_to job request prepar set argument memori handl kernel work data transfer devic job launch devic block copyright held author owner internationalworkshop fpgas softwar programm fsp london unit kingdom septemb block mode call return job finish final collect devic memori freed style reminisc opencl deliber choic flatten learn curv note deliber decid manual data transfer manag order runtim schedul timiz opportun keep intermedi devic job execut capabl current integr fastflow time heterogen parallel comput platform api wide rang fpga base process platform exist rang reconfigur system chip larger pci express base acceler devic aim specif audienc design applic mind benefit huge chosen architectur divers easili unifi amount appeal fpga platform fore platform api insert secondari softwar abstract layer beneath tpc api purpos implement devic specif function current devic memori manag access hardwar regist devic memori devic host communic feedback api implement share librari addit benefit exchang runtim softwar perspect allow move platform recompil applic facilit sign space explor applic increas usabl compil toolchain standalon kernel xact core fpga design devic bitstream hls tpc llsp fig tpc compil flow compil flow threadpoolcompos depict fig standalon kernel extract applic behavior equival core generat xilinx vivado hls threadpoolcom poser instanti arrang core composit creat threadpool micro architectur wrap platform yield complet synthesiz design final low level synthesi lls perform fpga vendor toolchain xilinx vivado central idea threadpoolcompos hls hardwar compil level individu acceler oppos system piler creat entir hardwar system acceler well intern extern interfac awkward threadpool thread unit thread unit kernel kernel control pcie bridg zynq mem ram ctrl zynq cach sys signal interrupt ctrl pcie msi int ctrl architectur platform fig fpga design organ develop identifi extract comput kernel applic tool support select platform devic devic famili fpgas specifi composit threadpoolcompos toolchain composit defin kernel design desir number parallel process element pes kernel degre parallel kernel architectur construct templat organ pes design fig illustr general organ design architectur defin templat instanti chip organ pes call threadpool connect host memori hardwar infrastructur instanti templat provid chosen platform note depend templat type minim enabl maxim exist architectur platform facilit comparison architectur platform toolchain base scala sbt structur templat written vivado integr tcl threadpoolcompos easi custom modifi extend iii platform evalu threadpoolcompos work progress undergon thorough optim current system support three platform class fpga evalu board zedboard featur zynq seri fpga fmax mhz dual core arm cortex mhz host processor run xilinx linux xilinx larger version system fpga fmax mhz cortex run mhz final pcie interfac base fflink host core intel xeon run ghz linux fig averag data throughput idl system benefit huge pcie interfac transfer chunk alloc chunk size kib zedboard fig averag bidirect transfer rate fpga host user applic memori mib size kib larger chunk zynq platform current kernel dma buffer transfer alloc lead slow copi approach current develop address defici fig depict interrupt latenc three platform evalu hardwar softwar round trip time hardwar counter count clock cycl rais interrupt hardwar receiv acknowledg softwar hardwar measur includ intermedi softwar layer level user applic level latenc rang shortest latenc achiev shortest kernel runtim call thread sleep sur prise transport interrupt pcie packet dedic wire latenc lower core xeon run speed arm zedboard rru zedboard fig interrupt latenc measur round trip time max avg min hardwar kernel signal inter rupt receiv acknowledg host conclus futur work threadpoolcompos open sourc meta toolchain facilit explor chip microarchitectur fpga acceler comparison hls tool separ hls system chip architectur generat unifi api softwar develop combin threadpoolcompos platform architectur improv separ concern solid basi futur autom chitectur explor effort threadpoolcompos current support zynq zedboard devic well xilinx pcie support futur work aim increas perform hardwar design develop custom core integr fli hardwar generat chisel languag threadpoolcompos will releas open sourc form download year refer cani choi aldham zhang kammoona cza jkowski brown anderson legup open sourc high level synthesi tool fpga base processor acceler sys tem embed comput system tec acm transact huthmann liebig koch hardwar softwar compil nymbl system reconfigur communic centric system chip recosoc int workshop repara reengin enabl perform power applic onlin http aldinucci danelutto kilpatrick torquati fastflow high level effici stream multi core program multi core core comput system ser parallel distribut comput pllana xhafa wiley chevalleri korinth koch fflink lightweight high perform open sourc pci express interfac recon figur acceler high effici acceler reconfigur technolog heart intern symposium bachrach richard lee waterman avizieni wawrzynek asanov chisel construct hardwar scala embed languag design autom confer dac acm edac ieee 