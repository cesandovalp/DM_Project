improv gpu perform resourc share vishwesh jatala depart cse iit kanpur vjatala jayvant anantpur serc iisc bangalor jayvant amey karkar depart cse iit kanpur karkar abstract graphic process unit gpus consist stream multiprocessor sms achiev high throughput run larg number thread context switch hide execut latenc number thread block number thread launch depend resourc usag number regist amount share memori thread block alloc thread thread block granular resourc complet will wast propos approach share resourc util wast resourc launch thread block effect approach resourc regist share scratchpad share memori share propos optim hide long execut latenc reduc number stall cycl implement approach gpgpu sim simul experiment valid applic benchmark suit gpgpu sim rodinia cuda sdk parboil serv regist share applic maximum improv averag improv scratchpad share observ maximum improv averag improv keyword regist share scratchpad share warp schedul thread level parallel introduct graphic process unit gpus effect acceler larg data parallel applic gpus consist stream multiprocessor sms achiev high throughput concurr execut larg number thread hide long latenc throughput achiev gpu depend amount thread level parallel tlp util studi focus improv throughput gpus exploit tlp amount tlp util gpu depend number thread resid applic launch gpu execut configur consist number thread block number thread thread block number thread block launch depend resourc requir number regist amount share memori need thread block unit resourc thread block requir rtb unit complet execut launch rtb thread block util rtb rtb unit remain mod rtb unit wast paper propos mechan share resourc order launch thread block reduc wastag resourc share regist share scratchpad improv throughput sms observ increas number thread benefit comput bound applic result increas cach miss memori bound applic decreas perform overcom propos optim call owner warp owf schedul extra thread block constitu warp effect regist share approach propos optim unrol reorder regist declar dynam warp execut improv regist util minim number stall cycl observ addit thread block motiv problem resourc underutil occur gpu resourc alloc thread block granular iti analyz benchmark applic gpgpu sim applic limit regist resourc number resid thread block figur percentag regist unutil figur consid applic hotspot thread benchmark regist thread block number regist requir thread block configur tabl number regist fit thread block regist wast figur number resid thread block applic limit scratchpad resourc figur percentag scratchpad memori remain unutil consid applic lavamd thread block benchmark byte scratchpad memori configur tabl amount scratchpad memori byte fit thread block byte memori remain unutil behavior observ applic well applic constrain resourc quirement low resid wast gpu configur describ tabl benchmark detail tabl tabl iii backprop tree hotspot lib mum mri sgemm stencil number resid thread block backprop tree hotspot lib mum mri sgemm stencil ist regist underutil lavamd number resid thread block lavamd scratchpad underutil figur number resid thread block limit regist regist underutil number resid thread block limit scratchpad memori scratchpad underutil resourc gpu approach share reduc number unutil resourc order increas number resid thread block experi extra thread block help hide long execut latenc increas throughput contribut contribut work util resourc gpus effect propos novel resourc share mechan enabl launch thread block implement approach resourc regist scratchpad propos optim improv throughput applic implement approach gpgpu sim simu lator evalu applic gpgpu sim rodinia cuda sdk parboil benchmark suit observ averag improv regist share averag improv scratchpad share paper organ describ background requir approach approach present section iii discuss hard ware overhead implement approach describ experiment evalu vii discuss work viii conclud paper background typic nvidia gpu consist set stream ing multiprocessor sms multiprocessor execut unit call stream processor sps cuda support extens languag allow pro grammer defin invok parallel function call kernel gpu kernel invok execut configur thread specifi number thread thread block number thread block number thread block resid depend number regist thread block number regist amount scratchpad memori thread block amount scratchpad memori maximum number thread allow maximum number thread block allow thread thread block divid set consecut thread call warp warp schedul schedul readi warp cycl pool readi warp thread warp execut instruct warp schedul schedul instruct order current instruct warp issu warp consid readi warp schedul cycl stall cycl number stall cycl increas time throughput decreas approach increas number resid thread block util wast regist well scratchpad memori increas number resid warp improv warp schedul hide long latenc iii resourc share increas number thread block allow thread block share resourc exampl consid applic thread block size warp thread thread block requir resourc unit complet execut resourc unit thread block resid util resourc unit remain unit wast schemat approach baselin figur thread block schedul order reduc wastag resourc approach alloc thread block share mode alloc resourc unit separ thread block total unit block alloc alloc unit exclus privat unshar resourc remain unit share resourc alloc resourc thread block ownership share resourc wait share resourc till block finish describ detail approach type resourc regist share scratchpad share regist share scenario figur improv regist alloc scheme figur number resourc unit unit unshar unit unshar unit unshar number regist reg reg unshar reg unshar share reg scratch pad memori spm spm unshar spm unshar share spm figur approach resourc alloc default approach regist share scratch pad memori share alloc regist thread block remain regist share thread block pair warp thread block alloc regist describ refer unshar thread block share thread block consid pair warp particip share approach alloc regist exclus privat unshar regist remain regist share regist alloc warp share exclus manner access pool share regist time exampl warp access share regist exclus access share regist prevent access share regist till finish impli continu execut access share regist point busi wait finish execut access share regist continu addit warp progress help hide execut latenc general idea comput increas number thread block will consid gpu regist consid thread block requir rtb regist warp thread block requir regist complet execut increas number thread block share regist exist thread block alloc rtb threshold regist pair share thread block alloc regist figur equival alloc regist warp thread block warp share thread block pair warp access rwt unshar regist independ access remain share regist grant access detect regist access warp share unshar effici access regist file unit modifi exist regist file access mechan figur warp warpid access regist regno check warp unshar warp belong unshar thread block figur warpid regno unshar warpid regno rwt acquir lock share reg retri figur regist access mechan thid smemloc thid unshar threadblock smemloc rtbt acquir lock alu share loc retri figur scratchpad access mechan step unshar warp direct access regist regist file combin warpid regno warpid share warp access regist unshar regist regno rwt step rwt number unshar regist alloc warp regno rwt treat regist share regist warp access unshar regist direct regist file access share regist exclus access acquir lock step retri access cycl consid scenario figur thread block share mode assum warp acquir lock access share regist acquir lock assum warp wait warp respec tive arriv barrier instruct syncthread warp acquir lock access share regist lock deadlock occur avoid deadlock ensur thread block share regist warp acquir lock warp acquir lock share regist warp acquir exclus access share regist finish execut exampl warp acquir lock wait share regist wait share regist syncthread syncthread figur deadlock presenc barrier instruct acquir lock avoid deadlock scratchpad share figur exampl scratchpad share consid gpu unit scratchpad memori thread block requir unit increas number thread block alloc unit alloc remain scratchpad unit thread block scratchpad share thread block access scratchpad memori privat remain unit memori allot block access regist share approach refer unshar thread block share thread block thread share thread block access memori locat share scratchpad gain exclus access acquir lock thread share thread block continu execut instruct till access share scratchpad locat point thread busi wait till finish execut implement support scratchpad share gpgpu sim figur step share scratchpad access follow rule share regist access breviti note deadlock occur scratchpad share comput thread block launch naiv method share thread block share resourc thread block launch thread block compar default share approach number thread block progress effect thread block share exampl consid scenario thread block resid share naiv share approach thread block resid block share resourc block block share resourc block happen block start access share resourc caus block wait effect thread regist share distribut scratchpad memori pair warp thread thread block access scratchpad locat alloc block block block will progress naiv share approach block progress share approach reduc throughput avoid describ method comput total number thread block share unshar launch number effect thread block share share approach notat number unit resourc rtb number resourc unit requir thread block number pair thread block launch share mode number thread block launch share resourc thread block maximum number thread block launch threshold comput number resourc thread block share thread block threshold alloc rtb resourc unit share thread block rtb resourc unit share unit share launch rtb thread block progress approach thread block launch share mode thread block progress share pair launch thread block progress unshar thread block launch progress thread block progress approach order number effect thread block approach share approach relat hold rtb share pair thread block alloc rtb resourc unit unshar thread block alloc rtb resourc unit total number resourc unit urtb srtb total number thread block launch share approach equal number unshar thread block number share pair equat rtb rtb rtb actual number thread block resid depend maximum number resid thread maximum number resid thread block number thread block resid figur warp schedul approach minimum number factor optim propos resourc share approach unshar share warp schedul warp play role determin perform applic propos optim call owner warp owf schedul warp effect thread block tbi tbj share pair warp tbi wait share resourc tbj call tbj owner block warp belong tbj call owner warp tbi call owner block warp tbi call owner warp owner thread block finish execut transfer ownership owner thread block owner thread block owner owner thread block launch schedul owner warp owf warp schedul issu warp cycl pool readi warp solut warp categor three type unshar share owner share owner regist share share owner warp depend correspond share owner warp releas regist progress scratchpad share warp owner thread block wait owner thread block complet execut owner warp algorithm priorit warp order share owner unshar share owner highest prioriti share owner warp help finish sooner depend share owner warp progress share owner warp progress stall lower prioriti unshar warp help hide stall type warp readi figur illustr schedul unshar warp high prioriti compar share warp degrad perform applic unrol reorder regist declar regist share owner warp wait owner warp access share regist instruct issu owner warp share regist warp wait start reg reg reg pred reg reg code reg pred reg reg reg reg reg reg reg reg code normal declar unrol declar figur unrol reorder regist declar execut correspond owner warp releas share regist order allow owner warp execut instruct stall unavail share regist unrol reorder regist declar illustr consid ptxplus code figur generat gpgpu sim sgemm applic parboil suit instruct code access regist regist sequenc number declar regist share regist threshold owner warp wait regist releas delay access share regist unrol rearrang order regist declar unshar regist regist sequenc number figur owner warp execut number instruct start access share regist implement optim convert sembl code ptxplus produc gpgpu sim optim assembl code achiev find order regist usag ensur unshar regist share regist modifi regist declar regist assembl code declar final modifi gpgpu simul optim ptxplus code simul instruct optim easili integr assembl level exist cuda compil dynam warp execut studi kayiran formanc memori bound applic degrad increas number resid thread block execut addit thread block increas cach miss lead increas number stall cycl regi ter share approach exploit thread level parallel addit warp owner warp compar scratchpad share regist share allow owner warp start execut correspond owner warp finish order reduc number stall rais execut owner warp propos optim dynam enabl disabl execut long latenc instruct memori issu addit block control execut memori instruct owner warp monitor number stall cycl execut memori instruct owner warp lead increas number stall decreas probabl execut memori instruct owner warp illustr consid gpu sms share mode approach disabl execut memori instruct owner warp specif smi allow execut memori instruct owner warp compar stall cycl period stall stall observ smi stall appear probabl execut memori instruct smi owner warp decreas predetermin stall smi probabl execut memori instruct smi owner warp increas reduc number stall cycl control execut memori instruct run experi select period iciti monitor cycl ensur monitor overhead high suffici number stall cycl observ experi initi sms allow execut memori instruct probabl execut memori struction owner warp depend stall cycl observ smi probabl smi decreas increas interv satur counter hardwar requir regist scratchpad share requir bit share mode enabl bit will set number thread block assign resourc share default number thread block thread block store partner thread block set thread block unshar mode thread block assum thread block repres bit requir warp requir bit owner bit set warp owner warp warp bit need regist share warp requir bit share unshar mode warp bit requir warp share mode correspond share warp identifi sharer thread block thread block relat posit thread block pair share warp lock variabl access share regist exclus lock variabl set warp gain access share regist warp maximum share pair warp total bit scratchpad share pair share thread block lock variabl access share locat exclus lock variabl set thread block gain access share scratchpad region thread block maximum share pair thread block total log bit total amount storag requir bit gpu sms implement regist share implement scratchpad share requir compar circuit implement resourc access figur step experiment analysi evalu methodolog implement approach gpgpu sim baselin architectur compar proach tabl experiment evalu approach applic gpgpu sim rodinina cuda sdk parboil benchmark depend resourc requir applic divid benchmark three set set tabl consist applic number thread block limit regist set tabl iii applic limit scratch pad memori final set tabl consist applic number thread block limit factor regist maximum number resid thread maximum number resid thread block applic tabl iii name kernel evalu number thread thread block tabl report number regist thread kernel gpgpu sim comput number resid thread block tabl iii amount scratch pad memori thread block compil applic cuda execut input provid benchmark suit threshold configur percent age resourc share exampl thread block requir rtb unit resourc choos alloc rtb resourc unit share tabl gpgpu sim architectur resourc gpu configur number cluster number core cluster max number thread block core max number thread core number regist core scratchpad memori core warp schedul lrr number schedul cach core cach dram schedul fcfs time trrd twr trcd tras trp trc tcl tcdlr tabl set benchmark limit regist benchmark applic kernel block regist size thread gpgpu sim backprop bpnn adjust weight cuda gpgpu sim tree findrangek rodinia hotspot calcul temp rodinia lib pathcalc portfolio kernelgpu rodinia mum mummergpukernel parboil mri computeq gpu parboil sgemm mysgemmnt parboil stencil hybrid coarsen thread block resourc unit rtb share resourc unit threshold comput percentag regist share experiment threshold resourc share experiment measur perform approach number instruct execut cycl ipc number stall cycl number idl cycl compar baselin gpgpu sim implement resourc share help increas number thread block launch applic set set figur compar effect number thread block launch regist share approach denot share owf unrol dyn baselin implement denot unshar lrr applica tion mum backprop hotspot mri approach launch thread block thread maximum limit number resid thread applic stencil tree launch thread block compar baselin approach applic lib sgemm approach launch thread block maximum limit number resid thread block figur compar number resi dent thread block launch scratchpad share label share owf baselin approach launch upto thread block maximum limit number resid thread block figur improv ipc regist share baselin lrr loos round robin plement observ applic tree hotspot mum stencil achiev speedup tabl iii set benchmark limit scratchpad memori benchmark applic kernel block scratch size pad size cuda sdk convolutionsepar convolutionrow kernel cuda sdk convolutionsepar convolutioncolumn kernel rodinia lavamd kernel gpu cuda rodinia needl cuda share rodinia needl cuda share rodinia srad srad cuda rodinia srad srad cuda tabl set benchmark limit thread block benchmark applic kernel limit rodinia backprop bpnn layerforward cuda thread gpgpu sim bfs kernel thread rodinia gaussian block gpgpu sim executesecondlay block fig ure perform improv ipc scratchpad share lavamd achiev speedup spectiv applic leverag optim perform better perform improv ipc lavamd reason number resid thread block launch approach base implement instruct scratchpad memori locat fall share scratchpad addit thread block execut instruct wait share thread block lib launch thread block regist share enabl improv increas cach miss caus addit share block bench mark backprop sgemm achiev modest improv regist share improv scratchpad share mri slow addit share block increas cach miss increas number stall improv upto barrier instruct instruct access share scratchpad memori limit progress share thread access share scratchpad locat figur effect propos optim regist share compar baselin approach compar regist share approach timiz exist baselin lrr schedul polici label share lrr noopt consid applica tion hotspot achiev speedup optim addit thread block launch approach help hide execut latenc regist unrol optim label share lrr unrol improv regist unrol help increas usag unshar regist start share regist applic execut instruct backprop tree hotspot lib mum mri sgemm stenciln unshar lrr share owf unrol dyn lavamd unshar lrr share owf backprop tree hotspot lib mum mri sgemm stencil share owf unrol dyn lavamd share owf figur compar number resid thread block baselin implement regist scratchpad memori perform improv ipc compar baselin implement regist scratchpad memori backprop tree hotspot libmum mri sgemm stencil share lrr noopt share lrr unrol share lrr unrol dyn share owf unrol dyn lavamd share lrr noopt share owf backprop tree hotspot libmum mri sgemm stencil stall cycl idl cylc stall cycl idl cycl figur perform analysi optim regist share scratchpad share percentag decreas stall idl cycl regist share scratchpad share note lavamd stall cycl baselin approach cycl share owf approach decreas idl cycl backprop tree hotspot lib mum mri sgemm stencil share owf unrol dyn lavamd share owf backprop tree hotspot lib mum mri sgemm stencil share owf unrol dyn lavamd share owf figur perform comparison scratchpad share regist share gto baselin schedul perform comparison scratchpad share regist share level baselin schedul access share regist enabl dynam warp execut label share lrr unrol dyn improv limit execut memori instruct owner warp appli owf optim label share owf unrol dyn applic speed presenc owf optim prioriti owner warp decreas compar warp memori instruct issu owner warp interfer warp minim cach miss tree behav hotspot applic term perform gain vari optim applic mum opti mizat slow observ increas resid thread block lead increas cach miss issu memori instruct owner warp increas cach miss instruct issu owner warp help minim stall cycl regist unrol optim slight improv appli dynam warp execut speed analyz dynam warp execut reduc addi tional stall cycl produc issu memori instruct owner warp owf optim perform improv decreas interfer owner warp lib improv presenc share optim observ perfor manc unrol optim number instruct unshar regist instruct share regist exact optim dynam warp execut observ applic owner warp complet execut instruct owner warp start issu memori instruct owf optim observ small degrad increas number stall cycl compar lrr schedul polici benchmark sgemm backprop stencil achiev good improv owf optim abl instruct issu owner warp execut prioriti interfer warp minim cach miss perform improv mri addit thread block increas cach miss approach slow reduc presenc optim summar memori bound applic mum advantag propos share approach presenc dynam warp execut owf optimiza tion comput bound applic hotspot perform better optim improv owf optim figur owf optim scratchpad share lavamd improv optim label share lrr noopt addit thread block cess memori locat belong share scratchpad memori applic improv appli optim addit thread block help hide latenc owf optim applic improv upto owf optim schedul owner warp effici help minim stall cycl improv ipc lavamd improv upto benefit share owf optim perform better optim appli applic observ number miss stall cycl owf optim compar optim figur report percentag decreas number idl cycl cycl warp issu warp readi execut stall cycl pipelin stall compar baselin implemen tation observ applic reduct number idl cycl max expect increas number thread block number instruct readi execut creas applic mum lib backprop hotspot stencil number stall cycl reduc regist approach applic number stall cycl reduc scratchpad share indic addit thread block launch approach hide long execut latenc better observ increas stall cycl applic tree stencil number idl cycl reduc benefit approach mri number stall cycl increas approach increas number cach miss lavamd increas mum lib backprop tree hotspot sgemm stencil mri tru unshar lrr reg share owf unrol dyn reg lavamd unshar lrr shmem share owf shmem figur comparison lrr number regist scratchpad number stall cycl addit thread launch approach wait execut unit unit readi increas number stall approach cach miss compar baselin approach figur perform improv regist scratchpad share approach gto greedi schedul observ approach improv regist share improv upto scratchpad share figur observ improv ipc regist share improv upto scratchpad share level schedul polici measur effect resourc share mechan compar lrr schedul number resourc figur base approach label unshar lrr reg regist approach regist increas number regist increas number resid thread block baselin approach approach perform better applic exampl applic mum perform better approach number thread block approach dynam warp execut optim help minim stall produc addit thread block applic sgemm tree lib perform better baselin approach increas number resid thread block increas number activ warp figur compar scratchpad share approach byte memori baselin approach bye memori figur observ perform compar baselin approach approach launch number resid thread block equal baselin approach lavamd perform better baselin approach share help minim latenc owf optim help schedul warp effici degrad approach number resid thread block approach baselin approach number stall cycl observ approach baselin implement tabl ipc regist share share backprop tree hotspot lib mum mri sgemm stencil tabl resid thread block regist share share backprop tree hotspot lib mum mri sgemm stencil share perform tabl tabl vii analyz perform resourc share approach amount share observ applic perform better amount share tabl viii increas amount resourc share number resid thread block will increas resid thread block help hide long latenc help achiev high throughput tabl vii notic applic behav share percentag share number resid thread block approach baselin implement time approach decid launch thread block unshar mode block unshar mode warp unshar warp case owf optim dynam warp schedul warp achiev higher perform baselin approach tabl vii perform better share number instruct execut start enter share scratchpad memori region share extra instruct belong loop statement observ ipc valu perform analysi set benchmark formanc regist share scratchpad share proach set applic tabl present figur discuss earlier applic limit number resourc factor number thread thread block measur perform approach lrr schedul polici gto schedul polici owf schedul figur observ propos resourc share approach lrr schedul label share lrr unrol dyn perform exact level schedul polici direct integr share approach tabl vii ipc scratchpad share share lavamd tabl viii resid thread block scratchpad share share lavamd baselin lrr schedul unshar lrr number thread block launch applic limit resourc approach launch addit thread block thread block unshar mode behav exact baselin approach approach gto schedul polici share gto unrol dyn perform exact baselin approach gto schedul polici share unshar gto final observ owf schedul polici share owf unrol dyn approach parabl unshar gto implement owf optim warp arrang prioriti owner unshar owner warp case launch addit thread block thread block unshar mode unshar warp sort dynam warp perform share owf unrol dyn unshar gto implement vii work xiang discuss thread block level resourc manag propos hardwar solut launch partial thread block resourc launch full thread block approach solut partial thread block run patent regist manag scheme concept virtual regist actual physic regist launch thread block allow physic regist mechan combin propos solut yang propos hardwar softwar solut problem caus alloc dealloc share memori thread block granular warp regist file describ solut reduc power consumpt regist file turn unalloc regist gebhart propos unifi memori regist scratchpad primari cach partit resourc applic requir lot hardwar chang access unifi storag contrast backprop bfs gaussian unshar lrr share lrr unrol dyn unshar gto share gto unrol dyn share owf unrol dyn backprop bfs gaussian unshar lrr share lrr unshar gto share gto share owf figur perform analysi set applic regist share scratchpad share approach requir fewer modif hardwar work pro pose hardwar softwar solut improv throughput gpus handl branch thread diverg orthogon approach techniqu improv gpu perform includ reduc cach content improv dram bandwidth hide long latenc reduc energi consumpt roger propos cach conscious wave front schedul algorithm intra wave front local detector focus share cach level warp schedul propos narasiman divid warp group schedul warp group round robin manner hide long latenc better gebhart propos energi effici hierarch regist file storag level warp schedul high throughput processor owl propos techniqu prove cach content dram bank level parallel viii conclus futur work paper propos techniqu share sourc effect util wast resourc launch addit thread block effect util addit thread block propos optim help reduc stall produc system valid approach regist share scratchpad share applic improv maximum averag regist share maximum averag scratchpad share futur plan incorpor tradit compil analysi optim approach exampl live rang analysi instruct reorder detect releas regist point regist share warp thread block wait share regist plan studi cach replac polici regist share improv throughput memori bound applic refer kayiran jog kandemir das optim thread level parallel gpgpus pact tarjan skadron demand regist alloc dealloc multithread processor patent app xiang yang zhou warp level diverg gpus character impact mitig hpca yang xiang mantor rubin zhou share memori multiplex novel improv gpgpu throughput pact gpgpu sim http cuda program guid http parboil benchmark http parboil bakhoda yuan fung wong aamodt analyz cuda workload detail gpu simula tor ispass abdel maje annavaram warp regist file power effici regist file gpgpus hpca gebhart keckler khailani krashinski dalli unifi primari cach scratch regist file memori throughput processor micro bruni collang diamo simultan branch warp interweav sustain gpu perfor manc isca diamo ashbaugh maiyuran kerr yalamanchili simd converg thread fron tier micro fung aamodt thread block compact effici simt control flow hpca han abdelrahman reduc branch diver genc gpu program gpgpu meng tarjan skadron dynam warp subdi vision integr branch memori diverg toler anc isca rhu erez dual path execut model effici gpu control flow hpca capri predict compact adequaci han dling control diverg gpgpu architectur isca anantpur govindarajan tame control diver genc gpus control flow linear roger aamodt cach conscious wavefront schedul micro narasiman shebanow lee miftakhutdinov mutlu patt improv gpu perform larg warp level warp schedul micro gebhart johnson tarjan keckler dalli lindholm skadron hierarch thread schedul regist file energi effici throughput processor acm tran comput syst jog kayiran chidambaram nachiappan mishra kandemir mutlu iyer das owl cooper thread array awar schedul techniqu improv gpgpu perform asplo 